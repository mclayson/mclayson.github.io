(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){e.exports=a.p+"static/media/logo.694152e3.png"},109:function(e,t,a){e.exports=a(201)},118:function(e,t,a){},201:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(35),r=a.n(l),o=a(9),c=a(3),i=a(11),d=a(10),p=a(2),u={current_user:null,all_users_data:{},all_jobs_data:{},all_tasks_data:{},all_leads_data:{},all_projects_data:{},all_photos_data:{},all_invoices_data:{},terms:{receipt:{id:"receipt",name:"due on receipt"},net15:{id:"net15",name:"net 15"},net30:{id:"net30",name:"net 30"},net60:{id:"net60",name:"net 60"}},roles:{},company_settings:{weekend:[0,6],daily_work_hours:8}};var m=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"EXAMPLE":return Object(p.a)({},t,{examplePropOne:"newPropOne"});case"EXAMPLE-TWO":return Object(p.a)({},t,{examplePropTwo:a.sampleData+a.moreData});case"SETUP-COMPANY":return Object(p.a)({},t,{current_user:Object(p.a)({},t.current_user||{},{company_setup:!0})});case"SETUP-USER":return Object(p.a)({},t,{current_user:Object(p.a)({},t.current_user||{},{user_setup:!0})});case"SIGNIN-USER":return Object(p.a)({},t,{current_user:a.user_data});case"SIGNOUT-USER":return Object(p.a)({},t,{current_user:null});case"SELECT-JOB":return Object(p.a)({},t,{selected_project:a.project_id,selected_job:a.job_id,selected_job_index:a.index||0});case"UPDATE-ALL-USERS-DATA":return Object(p.a)({},t,{all_users_data:a.all_users_data});case"UPDATE-USERS-DATA":return Object(p.a)({},t,{all_users_data:Object(p.a)({},t.all_users_data,a.users_data)});case"EDIT-USER":return Object(p.a)({},t,{all_users_data:Object(p.a)({},t.all_users_data,Object(d.a)({},a.user_id,Object(p.a)({},t.all_users_data[a.user_id],a.user_object)))});case"ASSIGN-JOB-TO-USER":return function(e,t){var a={};if(t.old_user_id){var n=(a=Object(p.a)({},e.all_users_data[t.old_user_id])).jobs.indexOf(t.job_id);n>-1&&a.jobs.splice(n,1)}for(var s,l=Object(p.a)({},e.all_users_data[t.user_id]),r=!0,o=0;o<l.jobs.length;o++)if(l.jobs[o]===t.job_id){r=!1;break}return r&&l.jobs.push(t.job_id),t.old_user_id?Object(p.a)({},e,{all_users_data:Object(p.a)({},e.all_users_data,(s={},Object(d.a)(s,t.user_id,l),Object(d.a)(s,t.old_user_id||"no-old-user",a),s))}):Object(p.a)({},e,{all_users_data:Object(p.a)({},e.all_users_data,Object(d.a)({},t.user_id,l))})}(t,a);case"ASSIGN-TASK-TO-USER":return(e=Object(p.a)({},t.all_users_data[a.user_id])).tasks.push(a.job_id),Object(p.a)({},t,{all_users_data:Object(p.a)({},t.all_users_data,Object(d.a)({},a.user_id,e))});case"SELECT-USER":return Object(p.a)({},t,{selected_user:a.user_id});case"UPDATE-ALL-LEADS-DATA":return Object(p.a)({},t,{all_leads_data:a.all_leads_data});case"UPDATE-LEADS-DATA":return Object(p.a)({},t,{all_leads_data:Object(p.a)({},t.all_leads_data,a.leads_data)});case"SELECT-LEAD":return Object(p.a)({},t,{selected_lead:a.lead_id});case"OPEN-LEAD-EDITOR":return Object(p.a)({},t,{open_lead_editor:a.lead_id});case"EDIT-LEAD":return Object(p.a)({},t,{all_leads_data:Object(p.a)({},t.all_leads_data,Object(d.a)({},a.lead_id,Object(p.a)({},t.all_leads_data[a.lead_id],a.lead_object)))});case"UPDATE-ALL-PROJECT-DATA":return Object(p.a)({},t,{all_projects_data:a.all_projects_data});case"UPDATE-PROJECTS-DATA":return Object(p.a)({},t,{all_projects_data:Object(p.a)({},t.all_projects_data,a.projects_data)});case"UPDATE-PROJECT-COLOR":return function(e,t){for(var a=Object(p.a)({},e.all_projects_data[t.project_id]),n={},s=0;s<a.jobs.length;s++){var l=Object(p.a)({},e.all_jobs_data[a.jobs[s]]);l.project_color=t.color,n[l.id]=l}return Object(p.a)({},e,{all_projects_data:Object(p.a)({},e.all_projects_data,Object(d.a)({},t.project_id,Object(p.a)({},e.all_projects_data[t.project_id],{color:t.color}))),all_jobs_data:Object(p.a)({},e.all_jobs_data,n)})}(t,a);case"OPEN-PHOTO-GALLERY":return Object(p.a)({},t,{open_photos:a.project_id});case"UPDATE-PHOTOS-DATA":return Object(p.a)({},t,{all_photos_data:Object(p.a)({},t.all_photos_data,a.photos_data)});case"EDIT-PHOTO":return Object(p.a)({},t,{all_photos_data:Object(p.a)({},t.all_photos_data,Object(d.a)({},a.photo_id,Object(p.a)({},t.all_photos_data[a.photo_id],a.photo_object)))});case"OPEN-INVOICE-EDITOR":return Object(p.a)({},t,{open_invoice_editor:a.invoice_id});case"EDIT-INVOICE":return Object(p.a)({},t,{all_invoices_data:Object(p.a)({},t.all_invoices_data,Object(d.a)({},a.invoice_id,Object(p.a)({},t.all_invoices_data[a.invoice_id],a.invoice_object)))});case"OPEN-PROJECT-EDITOR":return Object(p.a)({},t,{open_project_editor:a.project_id,new_project_data:a.project_data});case"OPEN-PROJECT-SUMMARY":return Object(p.a)({},t,{open_project_summary:a.project_id});case"EDIT-PROJECT":return Object(p.a)({},t,{all_projects_data:Object(p.a)({},t.all_projects_data,Object(d.a)({},a.project_id,Object(p.a)({},t.all_projects_data[a.project_id],a.project_object)))});case"SELECT-JOB-SCHEDULE":return Object(p.a)({},t,{selected_job_schedule:{date:a.date,user_id:a.user_id}});case"UPDATE-ALL-JOB-DATA":return Object(p.a)({},t,{all_jobs_data:a.all_jobs_data});case"UPDATE-JOB-DATA":return Object(p.a)({},t,{all_jobs_data:Object(p.a)({},t.all_jobs_data,a.job_data)});case"EDIT-JOB":return Object(p.a)({},t,{all_jobs_data:Object(p.a)({},t.all_jobs_data,Object(d.a)({},a.job_id,Object(p.a)({},t.all_jobs_data[a.job_id],a.job_object)))});case"DELETE-JOB":return function(e,t){var a=Object(p.a)({},e.all_jobs_data);delete a[t.job_id];for(var n=Object(i.a)(e.all_projects_data[t.project_id].jobs),s=0;s<n.length;s++)if(n[s]===t.job_id){n.splice(s,1);break}return Object(p.a)({},e,{all_jobs_data:Object(p.a)({},a),all_projects_data:Object(p.a)({},e.all_projects_data,Object(d.a)({},t.project_id,Object(p.a)({},e.all_projects_data[t.project_id],{jobs:n}))),selected_job:null})}(t,a);case"ADD-JOB":return function(e,t){var a=Object(p.a)({},e.all_projects_data),n=Object(p.a)({},e.all_leads_data);return a[t.project_id]?t.project_id&&a[t.project_id].jobs.push(t.job_id):t.lead_id&&n[t.lead_id].jobs.push(t.job_id),Object(p.a)({},e,{all_projects_data:a,all_leads_data:n,all_jobs_data:Object(p.a)({},e.all_jobs_data,Object(d.a)({},t.job_id,t.job_object))})}(t,a);case"UPDATE-JOB-TEMPLATE-DATA":return Object(p.a)({},t,{all_job_templates_data:Object(p.a)({},t.all_job_templates_data,a.template_data)});case"UPDATE-PROJECT-TEMPLATE-DATA":return Object(p.a)({},t,{all_project_templates_data:Object(p.a)({},t.all_project_templates_data,a.template_data)});case"OPEN-JOB-EDITOR":return Object(p.a)({},t,{open_job_editor:a.job_id});case"OPEN-JOB-CREATOR":return function(e,t){return Object(p.a)({},e,{open_job_creator:{project_id:t.project_id,job_id:t.job_id}})}(t,a);case"CLOSE-JOB-CREATOR":return function(e,t){return Object(p.a)({},e,{open_job_creator:null})}(t);case"UPDATE-ALL-TASK-DATA":return Object(p.a)({},t,{all_tasks_data:a.all_tasks_data});case"UPDATE-TASK-DATA":return Object(p.a)({},t,{all_tasks_data:Object(p.a)({},t.all_tasks_data,a.task_data)});case"ADD-TASK":var n=Object(p.a)({},t.all_jobs_data),s=Object(p.a)({},t.all_projects_data);return a.job_id&&n[a.job_id].tasks.push(a.task_id),a.project_id&&s[a.project_id].tasks.push(a.task_id),Object(p.a)({},t,{all_projects_data:s,all_jobs_data:n,all_tasks_data:Object(p.a)({},t.all_tasks_data,Object(d.a)({},a.task_id,a.task_object))});case"EDIT-TASK":return Object(p.a)({},t,{all_tasks_data:Object(p.a)({},t.all_tasks_data,Object(d.a)({},a.task_id,Object(p.a)({},t.all_tasks_data[a.task_id],a.task_object)))});case"DELETE-TASKS":n=Object(p.a)({},t.all_jobs_data),s=Object(p.a)({},t.all_projects_data);for(var l=Object(p.a)({},t.all_tasks_data),r=0;r<a.task_ids.length;r++){var o=l[a.task_ids[r]];if(o.job_id)for(var c=0;c<n[o.job_id].tasks.length;c++)n[o.job_id].tasks[c]===a.task_ids[r]&&n[o.job_id].tasks.splice(c,1);if(o.project_id)for(var m=0;m<s[o.project_id].tasks.length;m++)s[o.project_id].tasks[m]===a.task_ids[r]&&s[o.project_id].tasks.splice(m,1);delete l[a.task_ids[r]]}return Object(p.a)({},t,{all_jobs_data:n,all_projects_data:s,all_tasks_data:l});case"COMPLETE-TASK":var _=Object(p.a)({},t.all_tasks_data[a.task_id],{completed:!0});return Object(p.a)({},t,{all_tasks_data:Object(p.a)({},t.all_tasks_data,Object(d.a)({},a.task_id,_))});case"SELECT-TASK":return Object(p.a)({},t,{selected_task:a.task_id});case"UPDATE-ROLES":return Object(p.a)({},t,{roles:Object(p.a)({},t.roles,a.roles)});case"UPDATE-COMPANY-SETTINGS":return Object(p.a)({},t,{company_settings:Object(p.a)({},t.company_settings,a.settings)});default:return t}},_=Object(c.e)(Object(c.c)({state:m}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),h=a(204),b=a(202),f=(a(118),a(4)),j=a(5),E=a(8),g=a(6),v=a(7),y=function(){return{type:"SETUP-USER"}},k=function(){return{type:"SETUP-COMPANY"}},O=function(){return{type:"SIGNOUT-USER"}},C=function(e){return{type:"SIGNIN-USER",user_data:e}},D=function(e,t,a){return{type:"ASSIGN-JOB-TO-USER",old_user_id:e,user_id:t,job_id:a}},w=function(e){return{type:"UPDATE-USERS-DATA",users_data:e}},N=function(e){return{type:"SELECT-USER",user_id:e}},T=function(e){return{type:"UPDATE-LEADS-DATA",leads_data:e}},S=function(e){return{type:"SELECT-LEAD",lead_id:e}},P=function(e,t){return{type:"EDIT-LEAD",lead_id:e,lead_object:t}},M=function(e){return{type:"UPDATE-PROJECTS-DATA",projects_data:e}},x=function(e,t){return{type:"UPDATE-PROJECT-COLOR",project_id:e,color:t}},A=function(e){return{type:"OPEN-PHOTO-GALLERY",project_id:e}},I=function(e){return{type:"UPDATE-PHOTOS-DATA",photos_data:e}},L=function(e,t){return{type:"EDIT-PHOTO",photo_id:e,photo_object:t}},J=function(e){return{type:"OPEN-INVOICE-EDITOR",invoice_id:e}},U=function(e,t){return{type:"EDIT-INVOICE",invoice_id:e,invoice_object:t}},B=function(e,t){return{type:"OPEN-PROJECT-EDITOR",project_id:e,project_data:t}},R=function(e){return{type:"OPEN-PROJECT-SUMMARY",project_id:e}},F=function(e,t){return{type:"EDIT-PROJECT",project_id:e,project_object:t}},H=function(e){return{type:"UPDATE-JOB-DATA",job_data:e}},W=function(e){return{type:"UPDATE-JOB-TEMPLATE-DATA",template_data:e}},q=function(e){return{type:"UPDATE-PROJECT-TEMPLATE-DATA",template_data:e}},z=function(e,t,a){return{type:"ADD-JOB",job_id:e,job_object:t,project_id:a}},Y=function(e){return{type:"OPEN-JOB-EDITOR",job_id:e}},K=function(e,t){return{type:"EDIT-JOB",job_id:e,job_object:t}},V=function(e,t){return{type:"DELETE-JOB",job_id:e,project_id:t}},G=function(e,t,a){return{type:"SELECT-JOB",project_id:e,job_id:t,index:a}},X=function(e,t){return{type:"SELECT-JOB-SCHEDULE",date:e,user_id:t}},Z=function(e){return{type:"UPDATE-TASK-DATA",task_data:e}},Q=function(e,t,a,n){return{type:"ADD-TASK",task_id:e,task_object:t,job_id:a,project_id:n}},$=function(e){return{type:"OPEN-LEAD-EDITOR",lead_id:e}},ee=function(e,t){return{type:"OPEN-JOB-CREATOR",project_id:e,job_id:t}},te=function(){return{type:"CLOSE-JOB-CREATOR"}},ae=function(e,t){return{type:"EDIT-TASK",task_id:e,task_object:t}},ne=function(e){return{type:"DELETE-TASKS",task_ids:e}},se=function(e){return{type:"COMPLETE-TASK",task_id:e}},le=function(e){return{type:"SELECT-TASK",task_id:e}},re=function(e){return{type:"UPDATE-ROLES",roles:e}},oe=function(e){return{type:"UPDATE-COMPANY-SETTINGS",settings:e}},ce=a(206),ie=a(205),de=a(73),pe=a(12),ue=[0,6],me=8;function _e(){for(var e=["A","B","C","D","E","F","G","H","J","K","M","N","P","Q","R","S","T","U","V","W","X","Y","Z","2","3","4","5","6","7","8","9"],t="",a=0;a<10;a++){t+=e[Math.ceil(Math.random()*e.length)-1]}return t.toLowerCase()}var he={company_setup:!0,user_setup:!0,company_config:{homepage:"/dashboard"},config:{homepage:"/projects"},first_name:"Joe",last_name:"Smith",email:"joe.smith@projulcustomer.com",company_id:_e(),roles:["admin","owner","scheduler","project-manager"],trades:["Company Owner"]},be={owner:{id:"owner",name:"Owner"},admin:{id:"admin",name:"Admin"},scheduler:{id:"scheduler",name:"Scheduler"},"project-manager":{id:"project-manager",name:"Project Manager"}},fe=["Marcia Byrd f","Homer Jensen m","Derrick Hopkins m","Sara Bowman f","Ora Hawkins f","Traci Gonzalez f","Charles Knight m","Shari Palmer f","Alfred Mcbride m","Josephine Martinez f","Geraldine Page f","Pete Grant m","Brooke Cummings f","Willis Yates m","Randy Thomas m","Mack George m","Melanie Reid f","Terence Rodgers m","Meredith Foster f","Patsy Campbell f","Carolyn Dixon f","Esther Weaver f","Lillian Maxwell f","Gladys Watts m","Mae Nunez f","Sammy Clark m","Sandra Rios f","Kathryn Terry f","Courtney Dennis f","Don Caldwell m","Kenny Glover m","Marcus Harrison m","Molly Young f","Joshua Edwards m","Bertha Warner f","Gayle Stokes m","Victoria Harris f","Jana Singleton f","Orville Hoffman m","Benjamin Fleming m","Erma Lowe m","Miguel Stephens m","Rafael Smith m","Albert Marsh m","Wayne Goodman m","Tasha Parsons f","Johnnie Munoz m","Wade Ward m","Blanche Carter m","Cesar Cooper m"],je={},Ee=["#1a66ff","#40ceff","#008e7d","#3dc1aa","#8e2828","#cc4848","#ff8383","#4f2382","#7e4dc4","#bd9af4","#725b42","#96897d","#004723","#297a4e","#6cb78c","#2d5184","#6d97c9","#e06000","#ff9136"];function ge(){var e=Ee[Math.round(Math.random()*(Ee.length-1))];return je[e]?ge():(je[e]=!0,e)}var ve=[{p:"8cab461124f55cbfa2db24bad04f5c5f.jpg",w:400,h:600},{p:"Bathroom sink 1.png",w:683,h:838},{p:"bathSink.jpg",w:736,h:491},{p:"Integrated sink and counter.png",w:592,h:742},{p:"Distressed counter and sink.png",w:595,h:738},{p:"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-38.jpg",w:1e3,h:668},{p:"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-23.jpg",w:1e3,h:668},{p:"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-17.jpg",w:1e3,h:666},{p:"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-16.jpg",w:1e3,h:667},{p:"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-7.jpg",w:1e3,h:667},{p:"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-1.jpg",w:1e3,h:667},{p:"counter shower and sink.png",w:794,h:542},{p:"Counter slab with bowl sinks.png",w:792,h:479},{p:"custom-concrete-ramp-sink-by-concrete-wave-design-bath-portfolio-26.jpg",w:792,h:479}],ye={Estimation:{default_trade:"Project Manager",name:"Estimation",id:"Estimation",icon:"fas fa-clipboard-list"},"Sign Contract":{default_trade:"Customer",name:"Sign Contract",id:"Sign Contract",icon:"fas fa-file-signature"},"Pre Deposit":{default_trade:"Customer",name:"Pre Deposit",id:"Pre Deposit",icon:"fas fa-dollar-sign"},"Demolition-tile-floor":{default_trade:"Laborer",name:"Demolition - Tile Floor",id:"Demolition-tile-floor",icon:"fas fa-hammer",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Demolition-tile-shower":{default_trade:"Laborer",name:"Demolition - Tile Shower",id:"Demolition-tile-shower",icon:"fas fa-hammer",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Demolition-vanity":{default_trade:"Laborer",name:"Demolition - Vanity",id:"Demolition-vanity",icon:"fas fa-hammer",data:[{name:"quantity",units:"qty",type:"number",value:""}]},"Demolition-cabinet":{default_trade:"Laborer",name:"Demolition - Cabinet",id:"Demolition-cabinet",icon:"fas fa-hammer",data:[{name:"quantity",units:"qty",type:"number",value:""}]},"Demolition-toilet":{default_trade:"Laborer",name:"Demolition - Toilet",id:"Demolition-toilet",icon:"fas fa-hammer",data:[{name:"quantity",units:"qty",type:"number",value:""}]},Protection:{default_trade:"Laborer",name:"Protection",id:"Protection",icon:"fas fa-tape"},"Plumbing-shower-valve":{default_trade:"Plumber",name:"Plumbing - Shower Valve",id:"Plumbing-shower-valve",icon:"fas fa-tint",data:[{name:"quantity",units:"qty",type:"number",value:""}]},"Drywall-prep":{default_trade:"Drywall Installer",name:"Drywall - Prep",id:"Drywall-prep",icon:"fas fa-brush",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Tile-cement-board":{default_trade:"Tile Setter",name:"Tile - Cement Board",id:"Tile-cement-board",icon:"fas fa-toolbox",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Tile-water-proofing":{default_trade:"Tile Setter",name:"Tile - Water Proofing",id:"Tile-water-proofing",icon:"fas fa-toolbox",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Drywall-texture":{default_trade:"Drywall Installer",name:"Drywall - Texture",id:"Drywall-texture",icon:"fas fa-brush",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Drywall-paint":{default_trade:"Drywall Installer",name:"Drywall - Paint",id:"Drywall-paint",icon:"fas fa-brush",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Tile-flooring":{default_trade:"Tile Setter",name:"Tile - Flooring",id:"Tile-flooring",icon:"fas fa-toolbox",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Tile-shower-pan":{default_trade:"Tile Setter",name:"Tile - Shower Pan",id:"Tile-shower-pan",icon:"fas fa-toolbox",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Tile-shower-walls":{default_trade:"Tile Setter",name:"Tile - Shower Walls",id:"Tile-shower-walls",icon:"fas fa-toolbox",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Carpentry-vanity-install":{default_trade:"Carpenter",name:"Carpentry - Vanity Install",id:"Carpentry-vanity-install",icon:"fas fa-toolbox",data:[{name:"quantity",units:"qty",type:"number",value:""}]},"Carpentry-cabinet-install":{default_trade:"Carpenter",name:"Carpentry - Cabinet Install",id:"Carpentry-cabinet-install",icon:"fas fa-toolbox",data:[{name:"quantity",units:"qty",type:"number",value:""}]},"Countertop-quartz-install":{default_trade:"Countertop Installer",name:"Countertop - Quartz Install",id:"Countertop-quartz-install",icon:"fas fa-toolbox",data:[{name:"square footage",units:"sqft",type:"number",value:""}]},"Plumbing-shower-trim":{default_trade:"Plumber",name:"Plumbing - Shower Trim",id:"Plumbing-shower-trim",icon:"fas fa-tint",data:[{name:"quantity",units:"qty",type:"number",value:""}]},"Plumbing-toilet-install":{default_trade:"Plumber",name:"Plumbing - Toilet Install",id:"Plumbing-toilet-install",icon:"fas fa-tint",data:[{name:"quantity",units:"qty",type:"number",value:""}]},"Plumbing-sink-hook-up":{default_trade:"Plumber",name:"Plumbing - Sink Hook Up",id:"Plumbing-sink-hook-up",icon:"fas fa-tint",data:[{name:"quantity",units:"qty",type:"number",value:""}]},"Plumbing-faucet-install":{default_trade:"Plumber",name:"Plumbing - Faucet Install",id:"Plumbing-faucet-install",icon:"fas fa-tint",data:[{name:"quantity",units:"qty",type:"number",value:""}]},"Clean Up":{default_trade:"Laborer",name:"Clean Up",id:"Clean Up",icon:"fas fa-broom"},Inspection:{default_trade:"Project Manager",name:"Inspection",id:"Inspection",icon:"fas fa-clipboard-list"},"Final Payment":{default_trade:"Customer",name:"Final Payment",id:"Final Payment",icon:"fas fa-dollar-sign"}},ke={"bathroom-remodel":{id:"bathroom-remodel",name:"Bathroom Remodel",jobs:["Estimation","Sign Contract","Pre Deposit","Demolition-tile-floor","Demolition-tile-shower","Demolition-vanity","Demolition-toilet","Protection","Plumbing-shower-valve","Drywall-prep","Tile-cement-board","Tile-water-proofing","Drywall-texture","Drywall-paint","Tile-flooring","Tile-shower-pan","Tile-shower-walls","Carpentry-vanity-install","Countertop-quartz-install","Plumbing-shower-trim","Plumbing-toilet-install","Plumbing-sink-hook-up","Plumbing-faucet-install","Clean Up","Inspection","Final Payment"]},"kitchen-remodel":{id:"kitchen-remodel",name:"Kitchen Remodel",jobs:["Estimation","Sign Contract","Pre Deposit","Demolition-tile-floor","Demolition-cabinet","Protection","Drywall-prep","Tile-cement-board","Tile-water-proofing","Drywall-texture","Drywall-paint","Tile-flooring","Carpentry-cabinet-install","Countertop-quartz-install","Plumbing-sink-hook-up","Plumbing-faucet-install","Clean Up","Inspection","Final Payment"]}},Oe=[0,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9],Ce=["Project Manager","Operations Manager","Plumber","Technician","Electrician","Laborer","Dry Wall Installer","Tile Setter","Hardwood Installer","Framer"],De={"Sign Contract":"Customer","Pre Deposit":"Customer",Estimation:"Project Manager",Demolition:"Laborer",Protection:"Laborer","Tile Installation":"Tile Setter","Hardwood Installation":"Hardwood Installer",Plumbing:"Plumber","Clean Up":"Laborer",Inspection:"Project Manager","Final Payment":"Customer"},we={Estimation:["Complete Estimation"],Demolition:["Break it down"],Protection:["Lay down plastic","Tape up walls"],"Tile Installation":["Put the tile in"],"Hardwood Installation":["Put the hardwood in"],Plumbing:["Fix the pipes"],"Clean Up":["Clean up mess"],Inspection:["Complete Inspection"]},Ne={"Sign Contract":"fas fa-file-signature","Pre Deposit":"fas fa-dollar-sign",Estimation:"fas fa-clipboard-list",Demolition:"fas fa-hammer",Protection:"fas fa-tape","Tile Instalation":"fas fa-toolbox",Plumbing:"fas fa-tint","Clean Up":"fas fa-broom",Inspection:"fas fa-clipboard-list","Final Payment":"fas fa-dollar-sign"},Te="fas fa-toolbox";var Se=0;function Pe(e,t,a,n,s,l){Se++;var r,o=6+Math.random()*me/4,c=Math.max(1,o+Math.random()*me),i="t"+Se+"p"+t.id,d=De[a];if(s&&d&&Je[d])if("Customer"===d){for(var p=0;p<Je[d].length;p++)t.id===Je[d][p].visible_projects[0]&&(r=Je[d][p]);r||(s=!1)}else r=Je[d][Math.floor(Math.random()*Je[d].length)];else s=!1;var u=function(e,t,a,n){var s=[],l="";if(we[e])for(var r=0;r<we[e].length;r++)l="task_"+_e(),Ie[l]={name:we[e][r],description:"<p>"+we[e][r]+" is a cool task.</p>",completed:!(!t||!a)&&!!(Math.round(100*Math.random())%5),id:l,job_id:n},s.push(l);return s}(a,s,l,i);l=0;for(var m=0;m<u.length;m++)u[m].completed&&l++;var _={start_dates:e?[new Date(n.getFullYear(),n.getMonth(),n.getDate(),o),new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,o),new Date(n.getFullYear(),n.getMonth(),n.getDate()+2,o)]:s?[new Date(n.getFullYear(),n.getMonth(),n.getDate(),o)]:[],end_dates:e?[new Date(n.getFullYear(),n.getMonth(),n.getDate(),c,-Math.round(10*Math.random())),new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,c,-Math.round(10*Math.random())),new Date(n.getFullYear(),n.getMonth(),n.getDate()+2,c,-Math.round(10*Math.random()))]:s?[new Date(n.getFullYear(),n.getMonth(),n.getDate(),c,-Math.round(10*Math.random()))]:[],assigned_user:s?r.id:null,project_id:t.id,project_color:t.color,project_name:t.name,default_trade:d,name:a,icon:Ne[a]||Te,progress:s&&Math.round(l/u.length*100)||0,id:i,tasks:u};return r&&r.jobs.push(_.id),_}var Me={},xe={},Ae={},Ie={},Le={},Je={Customer:[]};function Ue(e){var t=Math.random(),a={jobs:[],tasks:[],id:t,first_name:fe[Math.floor(Math.random()*fe.length)].split(" ")[0],last_name:e.name.substr(0,e.name.indexOf(" ")),trade_name:"Customer",address:"1234 N 360 St. City, State, 55555",billing_address:"1234 N 360 St. City, State, 55555",visible_projects:[e.id]};return Je.Customer.push(a),Le[t]=a,a}var Be=[{name:"Scott Livingroom Remodel",color:ge(),id:_e(),jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Clean Up","Inspection","Final Payment"]},{name:"Johnson Kitchen Remodel",color:ge(),id:_e(),jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Plumbing","Clean Up","Inspection","Final Payment"]},{name:"Smith Bathroom Remodel",color:ge(),id:_e(),jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Plumbing","Clean Up","Inspection","Final Payment"]},{name:"Osborn Kitchen Tile",color:ge(),id:_e(),jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Hardwood Installation","Plumbing","Clean Up","Inspection","Final Payment"]},{name:"Harmon Home Exterior",color:ge(),id:_e(),jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Clean Up","Inspection","Final Payment"]},{name:"Burke Bathroom Remodel",color:ge(),id:_e(),jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Plumbing","Clean Up","Inspection","Final Payment"]}],Re=[{jobs:[],tasks:[],id:"user_"+_e(),first_name:"Tmc Builders Inc",last_name:"",trade_name:"Contractor,Plumber"},{jobs:[],tasks:[],id:"user_"+_e(),first_name:"Wood N'Things Llc",last_name:"",trade_name:"Contractor"},{jobs:[],tasks:[],id:"user_"+_e(),first_name:"Cabinet Pros",last_name:"",trade_name:"Contractor"},{jobs:[],tasks:[],id:"user_"+_e(),first_name:"Gilman Contractors Inc",last_name:"",trade_name:"Contractor"},{jobs:[],tasks:[],id:"user_"+_e(),first_name:"Crowne Closets & Cabinetry",last_name:"",trade_name:"Contractor"},{jobs:[],tasks:[],id:"user_"+_e(),first_name:"The Structures Group Southwest Inc",last_name:"",trade_name:"Contractor"},{jobs:[],tasks:[],id:"user_"+_e(),first_name:"B Smith Construction Inc",last_name:"",trade_name:"Contractor"},{jobs:[],tasks:[],id:"user_"+_e(),first_name:"Turner CO",last_name:"",trade_name:"Contractor"},{jobs:[],tasks:[],id:"user_"+_e(),first_name:"Tower Mechanical Sv",last_name:"",trade_name:"Contractor"}];!function(){for(var e=0;e<Re.length;e++)Le[Re[e].id]=Re[e];for(e=0;e<fe.length;e++){var t="user"+Math.random(),a=fe[e].split(" "),n=Ce[Oe[Math.floor(Math.random()*Oe.length)]];Le[t]={jobs:[],tasks:[],roles:"Project Manager"===n?["project-manager"]:[],id:t,first_name:a[0],last_name:a[1],email:a[0]+"."+a[1]+"@construction.com",photo_uri:"https://randomuser.me/api/portraits/"+("m"===a[2]?"men":"women")+"/"+Math.ceil(80*Math.random()+12)+".jpg",trade_name:n}}for(var s=new Date,l={},r=0;r<ue.length;r++)l[ue[r]]=!0;for(var o in Le){var c=Le[o];Je[c.trade_name]=Je[c.trade_name]||[],Je[c.trade_name].push(c)}for(var i=0;i<Be.length;i++){var d=Be[i],p=new Date(s.getFullYear(),s.getMonth(),s.getDate()-2*i),u=0,m=Ue(d);d.customer_id=m.id,d.address=m.address,d.blob_uri="./blob/photos/",d.photos=[];for(var _=0;_<ve.length;_++){var h={src:d.blob_uri+ve[_].p,width:ve[_].w,height:ve[_].h,name:"A job well done.",description:"We need some more work like this around here!"};h.id="photo_"+Math.random(),xe[h.id]=h,d.photos.push(h.id)}for(var b=0;b<d.temp_jobs.length;b++){for(var f=new Date(p.getFullYear(),p.getMonth(),p.getDate()+b+u),j=b<i?100:b===i?Math.min(Math.round(100*Math.random()),100):0;l[f.getDay()];)u++,f=new Date(p.getFullYear(),p.getMonth(),p.getDate()+b+u);var E=Pe(0===i&&3===b,d,d.temp_jobs[b],f,0!==j||!!Math.round(100*Math.random()%4),j);d.jobs.push(E.id),Me[f.getFullYear()+"_"+f.getMonth()]||(Me[f.getFullYear()+"_"+f.getMonth()]=[]),Me[f.getFullYear()+"_"+f.getMonth()].push(E),Ae[E.id]=E}}}();var Fe={},He=["new","scheduled","pending","estimate","approved","rejected"],We={new:3,scheduled:7,pending:10,estimate:8,approved:6,rejected:3},qe={0:20,1:10,2:5,3:5,4:6,5:4};!function(){var e,t=0,a=new Date;for(var n in qe)for(var s=0;s<qe[n];s++){var l=(t<fe.length?fe[t]:fe[Math.floor(Math.random()*fe.length)]).split(" ");e=l[0]+"_lead_"+_e();for(var r=n,o={},c=a,i=r;i>=0;i--)c=new Date(c.getFullYear(),c.getMonth(),c.getDate()-Math.floor(Math.random()*We[He[r]])),o[He[i]]=c;Fe[e]={id:e,index:s,new_date:o.new,scheduled_date:o.scheduled,pending_date:o.pending,estimate_date:o.estimate,approved_date:o.approved,rejected_date:o.rejected,status:He[r],first_name:l[0],last_name:l[1],name:l[0]+" "+l[1]+" Project",jobs:[]},t++}}();var ze=function(e,t,a){var n=Array.from(e),s=n.splice(t,1),l=Object(de.a)(s,1)[0];return n.splice(a,0,l),n},Ye=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).onBeforeDragStart=function(){},a.onDragStart=function(){},a.onDragUpdate=function(){},a.onDragEnd=function(e){return function(e){var t=e.source,n=e.destination;if(console.log(e),n)if("TEMPLATE"===e.type){if("template_jobs"===t.droppableId&&"timeline"===n.droppableId){if(a.props.selected_lead){var s,l,r,o=Object(i.a)(a.props.all_leads_data[a.props.selected_lead].jobs);if(a.props.all_project_templates_data[e.draggableId])for(var c=a.props.all_project_templates_data[e.draggableId].jobs,u=c.length-1;u>=0;u--)l="job"+_e(),o.splice(n.index,0,l),s=Object(p.a)({},a.props.all_job_templates_data[c[u]]),r=Object(p.a)({},s,{start_dates:[],end_dates:[],assigned_user:null,project_id:a.props.selected_lead,project_color:null,project_name:null,progress:0,id:l,tasks:s.tasks||[]}),a.props.addJob(l,r,a.props.selected_lead);else l="job"+_e(),o.splice(n.index,0,l),s=Object(p.a)({},a.props.all_job_templates_data[e.draggableId]),r=Object(p.a)({},s,{start_dates:[],end_dates:[],assigned_user:null,project_id:a.props.selected_lead,project_color:null,project_name:null,progress:0,id:l,tasks:s.tasks||[]}),a.props.addJob(l,r,a.props.selected_lead);a.props.editLead(a.props.selected_lead,{jobs:o})}}else if("timeline"===t.droppableId&&"timeline"===n.droppableId){var m=Object(i.a)(a.props.all_leads_data[a.props.selected_lead].jobs),_=Object(p.a)({},m.splice(t.index,1)[0]);m.splice(n.index,0,_),console.log(_),a.props.editLead(a.props.selected_lead,{jobs:m})}}else if("JOB"===e.type){var h,b,f;if(a.props.selected_project)if(a.props.all_project_templates_data[e.draggableId])for(var j=a.props.all_project_templates_data[e.draggableId].jobs,E=0;E<j.length;E++)h=a.props.all_job_templates_data[j[E]],b="job"+_e(),f={start_dates:[],end_dates:[],assigned_user:null,project_id:a.props.selected_project,project_color:a.props.all_projects_data[a.props.selected_project].color,project_name:a.props.all_projects_data[a.props.selected_project].name,default_trade:h.default_trade,name:h.name,description:h.description,icon:h.icon,progress:0,id:b,tasks:h.tasks||[]},a.props.addJob(b,f,a.props.selected_project);else h=Object(p.a)({},a.props.all_job_templates_data[e.draggableId]),b="job"+_e(),f={start_dates:[],end_dates:[],assigned_user:null,project_id:a.props.selected_project,project_color:a.props.all_projects_data[a.props.selected_project].color,project_name:a.props.all_projects_data[a.props.selected_project].name,default_trade:h.default_trade,name:h.name,description:h.description,icon:h.icon,progress:0,id:b,tasks:h.tasks||[]},a.props.addJob(b,f,a.props.selected_project)}else if("LEAD"===e.type){var g={new_leads:"new",scheduled_leads:"scheduled",pending_leads:"pending",estimate_leads:"estimate",approved_leads:"approved",rejected_leads:"rejected",other_leads:""},v={new_leads:[],pending_leads:[],scheduled_leads:[],estimate_leads:[],approved_leads:[],rejected_leads:[],other_leads:[]};for(var y in a.props.all_leads_data)switch(a.props.all_leads_data[y].status){case"new":v.new_leads.push(Object(p.a)({},a.props.all_leads_data[y]));break;case"pending":v.pending_leads.push(Object(p.a)({},a.props.all_leads_data[y]));break;case"scheduled":v.scheduled_leads.push(Object(p.a)({},a.props.all_leads_data[y]));break;case"estimate":v.estimate_leads.push(Object(p.a)({},a.props.all_leads_data[y]));break;case"approved":v.approved_leads.push(Object(p.a)({},a.props.all_leads_data[y]));break;case"rejected":v.rejected_leads.push(Object(p.a)({},a.props.all_leads_data[y]));break;default:v.other_leads.push(Object(p.a)({},a.props.all_leads_data[y]))}if(t.droppableId===n.droppableId){var k=Object(i.a)(v[n.droppableId]),O=ze(k,t.index,n.index);a.props.updateLeadsData(O.reduce(function(e,t,a){return t.index=a,e[t.id]=t,e},{}))}else if("project_leads"===n.droppableId){var C=Object(p.a)({},a.props.all_leads_data[e.draggableId]);C.status=g[n.droppableId],C[C.status+"_date"]=C[C.status+"_date"]||new Date,a.props.editLead(C.id,C);var D,w=_e(),N=ge(),T=Math.random(),S=Object(p.a)({},C,{id:T,trade_name:"Customer",jobs:[],tasks:[]}),P=[];if(a.props.all_leads_data[C.id].jobs){for(var M,x={},A=a.props.all_leads_data[C.id].jobs,I=0;I<A.length;I++)x[M=A[I]]=Object(p.a)({},a.props.all_jobs_data[M],{project_id:w,project_color:N,project_name:C.first_name+" "+C.last_name+" project"}),P.push(M);a.props.updateJobsData(x)}D={name:C.first_name+" "+C.last_name+" project",address:C.address,customer_id:T,color:N,id:w,jobs:P,tasks:[],photos:[],completed:!1},a.props.updateUsersData(Object(d.a)({},T,S)),a.props.updateProjectsData(Object(d.a)({},w,D)),a.props.selectJob(w,null)}else if("archive_leads"===n.droppableId){var L=Object(p.a)({},a.props.all_leads_data[e.draggableId]);L.status=g[n.droppableId],L[L.status+"_date"]=L[L.status+"_date"]||new Date,a.props.editLead(L.id,L)}else{var J=Object(p.a)({},a.props.all_leads_data[e.draggableId]);J.status=g[n.droppableId],J[J.status+"_date"]=J[J.status+"_date"]||new Date,a.props.editLead(J.id,J)}}}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return s.a.createElement(pe.a,{onBeforeDragStart:this.onBeforeDragStart,onDragStart:this.onDragStart,onDragUpdate:this.onDragUpdate,onDragEnd:this.onDragEnd()},this.props.children)}}]),t}(n.Component),Ke=Object(o.b)(function(e){return{all_projects_data:e.state.all_projects_data,all_leads_data:e.state.all_leads_data,all_jobs_data:e.state.all_jobs_data,all_project_templates_data:e.state.all_project_templates_data,all_job_templates_data:e.state.all_job_templates_data,selected_project:e.state.selected_project,selected_lead:e.state.selected_lead}},function(e){return Object(c.b)({editLead:P,editProject:F,addJob:z,updateJobsData:H,updateLeadsData:T,updateUsersData:w,updateProjectsData:M,selectJob:G},e)})(Ye),Ve=a(138),Ge=a(203),Xe=a(102),Ze=a.n(Xe),Qe=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).signOut=function(e){e.preventDefault(),window.clientApplication.logout(),a.props.signOutUser()},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return s.a.createElement("header",null,s.a.createElement(Ve.a,{to:"/"},s.a.createElement("img",{src:Ze.a,alt:"Projul Logo"})),s.a.createElement("label",{htmlFor:"nav-menu-checkbox",className:"nav-button"},s.a.createElement("i",{className:"fas fa-bars"})),s.a.createElement("nav",null,this.props.current_user&&s.a.createElement("ul",{className:"flex-center"+(!this.props.current_user||this.props.current_user.company_setup||this.props.current_user.user_setup?"":" menu-placeholder")},s.a.createElement("li",null,s.a.createElement(Ge.a,{exact:!0,to:"/dashboard"},s.a.createElement("i",{className:"fas fa-home"}),s.a.createElement("span",null,"dashboard"))),s.a.createElement("li",null,s.a.createElement(Ge.a,{exact:!0,to:"/leads"},s.a.createElement("i",{className:"fas fa-phone"}),s.a.createElement("span",null,"leads"))),s.a.createElement("li",null,s.a.createElement(Ge.a,{to:"/projects"},s.a.createElement("i",{className:"fas fa-toolbox"}),s.a.createElement("span",null,"projects"))),s.a.createElement("li",null,s.a.createElement(Ge.a,{exact:!0,to:"/schedule"},s.a.createElement("i",{className:"far fa-calendar-alt"}),s.a.createElement("span",null,"schedule"))),this.props.current_user.roles.indexOf("admin")+1&&s.a.createElement("li",null,s.a.createElement(Ge.a,{exact:!0,to:"/admin"},s.a.createElement("i",{className:"fas fa-cog"}),s.a.createElement("span",null,"admin"))),s.a.createElement("li",null,s.a.createElement("a",{href:"#sign-out",onClick:this.signOut},s.a.createElement("i",{className:"fas fa-sign-out-alt"}),s.a.createElement("span",null,"sign out")))),s.a.createElement("label",{htmlFor:"nav-menu-checkbox",className:"close-cover"})))}}]),t}(s.a.Component),$e=Object(o.b)(function(e){return{current_user:e.state.current_user}},function(e){return Object(c.b)({signOutUser:O},e)})(Qe),et=function(){return s.a.createElement("footer",null,"Projul \xa9 ",(new Date).getFullYear())};function tt(e,t){return e.indexOf(t)>0?e.substr(0,e.indexOf(t)):e}function at(e){return(e+="").replace(/\s+/g,"-").toLowerCase()}var nt=a(42),st={clientID:"097b5df2-496e-4e2a-87ac-dcb775b2b170",authority:"https://projul.b2clogin.com/projul.onmicrosoft.com/b2c_1_siupin",b2cScopes:["https://projul.onmicrosoft.com/dev-api/user_impersonation"],webApi:"https://functionapp220181204090627.azurewebsites.net/api/Function1?name=Projul"},lt=function(e){function t(e){var a;Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).SignIn=function(){window.clientApplication.loginRedirect(st.b2cScopes)},a.state={signed_in:!1,loading:!1};var n=Object(nt.a)(Object(nt.a)(a));return setTimeout(function(){a.props.signInUser(he)},100),window.clientApplication.acquireTokenSilent(st.b2cScopes).then(function(e){console.log(window.clientApplication.getUser()),console.log("Signed In!"),n.props.signInUser(he)},function(e){console.log("Error acquiring the access token to call the Web api:\n"+e)}),a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("section",{id:"signin",className:this.state.loading?"loading":""},s.a.createElement("div",{className:"card"},s.a.createElement("h1",null,"welcome back"),s.a.createElement("button",{className:"button-sign-in load-button",disabled:this.state.loading,onClick:function(t){e.setState({loading:!0}),e.SignIn()}},s.a.createElement("span",null,"sign in"),s.a.createElement("span",null)),s.a.createElement("div",null,s.a.createElement(Ve.a,{to:"/signup"},"Need an account? Try it out!"))))}}]),t}(s.a.Component),rt=Object(o.b)(function(e){return{current_user:e.state.current_user}},function(e){return Object(c.b)({signInUser:C},e)})(lt),ot=["General Contractor - Commercial","Custom Home Builder","Production Builder","Remodeler - Renovation","Design Build","Specialty Contractor","Subcontractor","Construction Manager","Property Developer","Real Estate Agent","Architect - Designer","Supplier - Vendor","Other"],ct=["North America","Latin America","South America","Europe","Australia","Middle East","Africa","Asia & India","Other"],it=["Company Owner or Partner","Project Manager","Office Manager","Superintendent","Estimator","Architect","Engineer","Accountant","Other"],dt=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={setup_complete:!1,loading:!1,slider_state:0,company_name:"",phone:"",construction_type:"",region:"",role:""},a.CompleteSetup=function(){setTimeout(function(){a.props.setupUser(),a.props.setupCompany()},2e3)},a.HandleChange=function(e){var t={};t[e.target.name]=e.target.value,a.setState(t)},a.HandleCheckboxChange=function(e){var t={};t[e.target.id]=e.target.checked,a.setState(t)},a.HandleSubmit=function(e){e.preventDefault(),a.Validate()&&(a.setState({loading:!0}),a.CompleteSetup())},a.Validate=function(e){var t=[""!==a.state.company_name&&""!==a.state.phone&&""!==a.state.construction_type&&""!==a.state.region&&""!==a.state.role,!0];return e?t[e-1]:t[0]&&t[1]},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({slider_state:1})},1e3)}},{key:"render",value:function(){var e=this,t=[s.a.createElement("option",{disabled:!0,key:"default"},"construction type")],a=[s.a.createElement("option",{disabled:!0,key:"default"},"region")],n=[s.a.createElement("option",{disabled:!0,key:"default"},"your role")];for(var l in ot)t.push(s.a.createElement("option",{value:ot[l],key:ot[l]},ot[l]));for(var r in ct)a.push(s.a.createElement("option",{value:ct[r],key:ct[r]},ct[r]));for(var o in it)n.push(s.a.createElement("option",{value:it[o],key:it[o]},it[o]));return s.a.createElement("section",{id:"page-setup"},s.a.createElement("div",null,s.a.createElement("div",{className:"card f-column f-space-between"},s.a.createElement("form",{className:"slider t-center"+(this.state.loading?" loading":""),onSubmit:this.HandleSubmit},s.a.createElement("div",{className:"f-column"+(1===this.state.slider_state?" active":"")},s.a.createElement("h2",null,"Tell us a little about your construction company..."),s.a.createElement("div",{className:"f-column f-center f-a-center f-grow"},s.a.createElement("p",null,s.a.createElement("input",{name:"company_name",type:"text",placeholder:"company name",value:this.state.company_name,onChange:this.HandleChange})),s.a.createElement("p",null,s.a.createElement("input",{name:"phone",type:"text",placeholder:"phone number",value:this.state.phone,onChange:this.HandleChange})),s.a.createElement("p",{className:"select-container"},s.a.createElement("select",{className:this.state.construction_type?"":"placeholder",defaultValue:"construction type",name:"construction_type",onChange:this.HandleChange},t),s.a.createElement("i",{className:"fas fa-caret-down"})),s.a.createElement("p",{className:"select-container"},s.a.createElement("select",{className:this.state.region?"":"placeholder",defaultValue:"region",name:"region",onChange:this.HandleChange},a),s.a.createElement("i",{className:"fas fa-caret-down"})),s.a.createElement("p",{className:"select-container"},s.a.createElement("select",{className:this.state.role?"":"placeholder",defaultValue:"your role",name:"role",onChange:this.HandleChange},n),s.a.createElement("i",{className:"fas fa-caret-down"}))),s.a.createElement("footer",null,s.a.createElement("button",{className:"next-button",type:"button",disabled:this.state.loading||!this.Validate(1),onClick:function(t){e.setState({slider_state:2})}},s.a.createElement("span",null,"next")))),s.a.createElement("div",{className:"f-column"+(2===this.state.slider_state?" active":"")},s.a.createElement("h2",null,"Which Projul features interest you the most?"),s.a.createElement("div",{className:"f-column f-center f-a-center f-grow"},s.a.createElement("p",null,s.a.createElement("input",{id:"feature-1",className:"feature",name:"feature-1",type:"checkbox",onChange:this.HandleCheckboxChange}),s.a.createElement("label",{htmlFor:"feature-1"},"Project Managment!")),s.a.createElement("p",null,s.a.createElement("input",{id:"feature-2",className:"feature",name:"feature-2",type:"checkbox",onChange:this.HandleCheckboxChange}),s.a.createElement("label",{htmlFor:"feature-2"},"Customer Communication!")),s.a.createElement("p",null,s.a.createElement("input",{id:"feature-3",className:"feature",name:"feature-3",type:"checkbox",onChange:this.HandleCheckboxChange}),s.a.createElement("label",{htmlFor:"feature-3"},"Project Photo Organization!"))),s.a.createElement("footer",null,s.a.createElement("button",{className:"back-button",type:"button",disabled:this.state.loading,onClick:function(t){e.setState({slider_state:1})}},s.a.createElement("span",null,"back")),s.a.createElement("button",{className:"load-button",disabled:this.state.loading||!this.Validate(2)},s.a.createElement("span",null,"complete setup"),s.a.createElement("span",null))))))))}}]),t}(s.a.Component),pt=Object(o.b)(function(e){return{current_user:e.state.current_user}},function(e){return Object(c.b)({setupUser:y,setupCompany:k},e)})(dt),ut=a(103),mt=a.n(ut).a.create({baseURL:"https://",timeout:1e3,headers:{}});function _t(e){mt({type:"GET",url:st.webApi,headers:{Authorization:"Bearer "+e}}).then(function(e){console.log("Web APi returned:\n"+JSON.stringify(e))}).catch(function(e){console.log("Error calling the Web api:\n"+e)})}var ht=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={loaded:!1},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({loaded:!0}),window.clientApplication.acquireTokenSilent(st.b2cScopes).then(function(e){_t(e)},function(e){window.clientApplication.acquireTokenPopup(st.b2cScopes).then(function(e){_t(e)},function(e){console.log("Error acquiring the access token to call the Web api:\n"+e)})})},50)}},{key:"render",value:function(){return s.a.createElement("section",{id:"page-dashboard"},s.a.createElement("div",{className:this.state.loaded?"loaded":"loading"},s.a.createElement("div",{className:"card d1"}),s.a.createElement("div",{className:"card d2"})),s.a.createElement("div",{className:this.state.loaded?"loaded":"loading"},s.a.createElement("div",{className:"card d3"})))}}]),t}(s.a.Component),bt=a(16);function ft(e,t){return new Date(t,e+1,0).getDate()}function jt(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var Et=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).handleDayCellClick=function(e){return function(t){if(a.props.selected_job_data&&!a.props.all_jobs_data[a.props.selected_job].start_dates.length){var n=new Date(a.props.year,a.props.month,a.props.selected_day,e),s=new Date(a.props.year,a.props.month,a.props.selected_day,e+1),l=Object(i.a)(a.props.all_jobs_data[a.props.selected_job].start_dates),r=Object(i.a)(a.props.all_jobs_data[a.props.selected_job].end_dates);l[a.props.selected_job_data.index]=n,r[a.props.selected_job_data.index]=s,a.props.editJob(a.props.selected_job,{start_dates:l,end_dates:r}),a.props.assignJobToUser(a.props.all_jobs_data[a.props.selected_job].assigned_user,a.props.user_id,a.props.selected_job)}}},a.handleDayClick=function(e,t){return function(n){a.props.handleDayClick(e,t)}},a.handleJobClick=function(e,t,n){return function(s){a.props.selectJob(e,t,n)}},a.handleChangeStartTime=function(e,t){return function(n){var s=Object(i.a)(a.props.all_jobs_data[e].start_dates),l=Object(i.a)(a.props.all_jobs_data[e].end_dates);s[t]=n,l[t]=new Date(l[t].setFullYear(n.getFullYear(),n.getMonth(),n.getDate())),console.log(n,l[t]),a.props.editJob(e,{start_dates:s,end_dates:l}),e===a.props.selected_job&&a.props.gotoDate(n)}},a.handleChangeEndTime=function(e,t){return function(n){var s=Object(i.a)(a.props.all_jobs_data[e].end_dates);s[t]=n,a.props.editJob(e,{end_dates:s})}},a.isDayAssigned=function(e){var t="";return a.props.selected_job_data&&a.props.selected_job_data.assigned_user===a.props.user_id&&a.props.selected_job_data.start_dates.length&&a.props.selected_job_data.start_dates.map(function(a,n){return jt(a,e)&&(t=" assigned"),a}),t},a.startx=0,a.dist=0,a.dragged_element=null,a.event_store={},a.handleEndTouchStart=function(e,t,n){return function(s){var l=s.changedTouches[0];a.startx=parseInt(l.clientX),a.dist=0;var r=s.currentTarget.parentNode.parentNode.clientWidth;a.event_store["EndTouchMove"+e+t]=a.handleEndTouchMove(e,t,n,r),a.event_store["EndTouchEnd"+e+t]=a.handleEndTouchEnd(e,t,n,r),s.currentTarget.addEventListener("touchend",a.event_store["EndTouchEnd"+e+t],!1),s.currentTarget.addEventListener("touchmove",a.event_store["EndTouchMove"+e+t],!1),s.currentTarget.addEventListener("touchcancel",a.event_store["EndTouchEnd"+e+t],!1)}},a.handleEndMouseDown=function(e,t,n){return function(s){a.dragged_element={id:e,index:t,job_duration:n,side:"end",window_width:s.currentTarget.parentNode.parentNode.clientWidth,e:s},a.dist=0,a.startx=parseInt(s.clientX),document.addEventListener("mousemove",a.handleEndMouseMove,!1),document.addEventListener("mouseup",a.handleEndMouseUp,!1),s.preventDefault(),s.stopPropagation()}},a.handleEndMouseMove=function(e){var t=a.dragged_element,n=t.id,s=t.index,l=t.job_duration,r=t.window_width;a.dist=parseInt(e.clientX)-a.startx,document.getElementById("job-"+n+s).style.maxWidth=l+100*a.dist/r+"%",document.getElementById("job-"+n+s).style.minWidth=l+100*a.dist/r+"%";var o=Object(i.a)(a.props.all_jobs_data[n].end_dates),c=Object(i.a)(a.props.all_jobs_data[n].start_dates),d=c[s].getHours()+c[s].getMinutes()/60,p=Math.max(o[s].getHours()+o[s].getMinutes()/60+a.dist/r*24,d),u=Math.round(p%1*60),m=Math.floor(p),_="am";m>12&&(m-=12,_="pm"),document.getElementById("job-end-tooltip-"+n+s).innerHTML=m+":"+(u<10?"0"+u:u)+" "+_,e.stopPropagation(),e.preventDefault()},a.handleEndMouseUp=function(e){var t=a.dragged_element,n=t.id,s=t.index,l=t.window_width,r=Object(i.a)(a.props.all_jobs_data[n].end_dates),o=r[s].getHours()+r[s].getMinutes()/60+a.dist/l*24,c=new Date(new Date(r[s]).setHours(Math.floor(o),o%1*60));r[s]=c,a.props.editJob(n,{end_dates:r}),document.removeEventListener("mousemove",a.handleEndMouseMove,!1),document.removeEventListener("mouseup",a.handleEndMouseUp,!1)},a.handleEndTouchMove=function(e,t,n,s){return function(l){var r=l.changedTouches[0];a.dist=parseInt(r.clientX)-a.startx,document.getElementById("job-"+e+t).style.maxWidth=n+100*a.dist/s+"%",document.getElementById("job-"+e+t).style.minWidth=n+100*a.dist/s+"%";var o=Object(i.a)(a.props.all_jobs_data[e].end_dates),c=Object(i.a)(a.props.all_jobs_data[e].start_dates),d=c[t].getHours()+c[t].getMinutes()/60,p=Math.max(o[t].getHours()+o[t].getMinutes()/60+a.dist/s*24,d),u=Math.round(p%1*60),m=Math.floor(p),_="am";m>12&&(m-=12,_="pm"),document.getElementById("job-end-tooltip-"+e+t).innerHTML=m+":"+(u<10?"0"+u:u)+" "+_,l.stopPropagation(),l.preventDefault()}},a.handleEndTouchEnd=function(e,t,n,s){return function(n){var l=Object(i.a)(a.props.all_jobs_data[e].end_dates),r=l[t].getHours()+l[t].getMinutes()/60+a.dist/s*24,o=new Date(new Date(l[t]).setHours(Math.floor(r),r%1*60));l[t]=o,console.log(a.dist,r,o),a.props.editJob(e,{end_dates:l}),n.currentTarget.removeEventListener("touchend",a.event_store["EndTouchEnd"+e+t],!1),n.currentTarget.removeEventListener("touchmove",a.event_store["EndTouchMove"+e+t],!1),n.currentTarget.removeEventListener("touchcancel",a.event_store["EndTouchEnd"+e+t],!1),n.stopPropagation(),n.preventDefault()}},a.handleBodyTouchStart=function(e,t,n){return function(s){var l=s.changedTouches[0];a.dist=0,a.startx=parseInt(l.clientX),console.log("body drag");var r=s.currentTarget.parentNode.parentNode.clientWidth;a.event_store["BodyTouchMove"+e+t]=a.handleBodyTouchMove(e,t,n,r),a.event_store["BodyTouchEnd"+e+t]=a.handleBodyTouchEnd(e,t,n,r),s.currentTarget.addEventListener("touchend",a.event_store["BodyTouchEnd"+e+t],!1),s.currentTarget.addEventListener("touchmove",a.event_store["BodyTouchMove"+e+t],!1),s.currentTarget.addEventListener("touchcancel",a.event_store["BodyTouchEnd"+e+t],!1)}},a.handleBodyTouchMove=function(e,t,n,s){return function(l){var r=l.changedTouches[0];a.dist=parseInt(r.clientX)-a.startx,document.getElementById("job-"+e+t).style.left=n+100*a.dist/s+"%";var o=Object(i.a)(a.props.all_jobs_data[e].end_dates),c=Object(i.a)(a.props.all_jobs_data[e].start_dates),d=o[t].getHours()+o[t].getMinutes()/60+a.dist/s*24,p=c[t].getHours()+c[t].getMinutes()/60+a.dist/s*24,u=Math.round(d%1*60),m=Math.floor(d),_="am";m>12&&(m-=12,_="pm");var h=Math.round(p%1*60),b=Math.floor(p);m>12&&(m-=12,_="pm"),document.getElementById("job-end-tooltip-"+e+t).innerHTML=m+":"+(u<10?"0"+u:u)+" "+_,document.getElementById("job-start-tooltip-"+e+t).innerHTML=b+":"+(h<10?"0"+h:h)+" am",l.stopPropagation(),l.preventDefault()}},a.handleBodyTouchEnd=function(e,t,n,s){return function(n){var l=Object(i.a)(a.props.all_jobs_data[e].end_dates),r=Object(i.a)(a.props.all_jobs_data[e].start_dates),o=l[t].getHours()+l[t].getMinutes()/60+a.dist/s*24,c=r[t].getHours()+r[t].getMinutes()/60+a.dist/s*24,d=new Date(new Date(l[t]).setHours(Math.floor(o),o%1*60)),p=new Date(new Date(r[t]).setHours(Math.floor(c),c%1*60));l[t]=d,r[t]=p,a.props.editJob(e,{end_dates:l,start_dates:r}),n.currentTarget.removeEventListener("touchend",a.event_store["BodyTouchEnd"+e+t],!1),n.currentTarget.removeEventListener("touchmove",a.event_store["BodyTouchMove"+e+t],!1),n.currentTarget.removeEventListener("touchcancel",a.event_store["BodyTouchEnd"+e+t],!1),n.stopPropagation(),n.preventDefault()}},a.handleBodyMouseDown=function(e,t,n){return function(s){a.dragged_element={id:e,index:t,job_start:n,side:"end",window_width:s.currentTarget.parentNode.parentNode.clientWidth,e:s},a.dist=0,a.startx=parseInt(s.clientX),document.addEventListener("mousemove",a.handleBodyMouseMove,!1),document.addEventListener("mouseup",a.handleBodyMouseUp,!1),s.preventDefault(),s.stopPropagation()}},a.handleBodyMouseMove=function(e){var t=a.dragged_element,n=t.id,s=t.index,l=t.window_width,r=t.job_start;a.dist=parseInt(e.clientX)-a.startx,document.getElementById("job-"+n+s).style.left=r+100*a.dist/l+"%";var o=Object(i.a)(a.props.all_jobs_data[n].end_dates),c=Object(i.a)(a.props.all_jobs_data[n].start_dates),d=o[s].getHours()+o[s].getMinutes()/60+a.dist/l*24,p=c[s].getHours()+c[s].getMinutes()/60+a.dist/l*24,u=Math.round(d%1*60),m=Math.floor(d),_="am";m>12&&(m-=12,_="pm");var h=Math.round(p%1*60),b=Math.floor(p);m>12&&(m-=12,_="pm"),document.getElementById("job-end-tooltip-"+n+s).innerHTML=m+":"+(u<10?"0"+u:u)+" "+_,document.getElementById("job-start-tooltip-"+n+s).innerHTML=b+":"+(h<10?"0"+h:h)+" am",e.stopPropagation(),e.preventDefault()},a.handleBodyMouseUp=function(e){var t=a.dragged_element,n=t.id,s=t.index,l=t.window_width,r=Object(i.a)(a.props.all_jobs_data[n].end_dates),o=Object(i.a)(a.props.all_jobs_data[n].start_dates),c=r[s].getHours()+r[s].getMinutes()/60+a.dist/l*24,d=o[s].getHours()+o[s].getMinutes()/60+a.dist/l*24,p=new Date(new Date(r[s]).setHours(Math.floor(c),c%1*60)),u=new Date(new Date(o[s]).setHours(Math.floor(d),d%1*60));r[s]=p,o[s]=u,a.props.editJob(n,{end_dates:r,start_dates:o}),document.removeEventListener("mousemove",a.handleBodyMouseMove,!1),document.removeEventListener("mouseup",a.handleBodyMouseUp,!1),e.stopPropagation(),e.preventDefault()},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"calcJobsByDay",value:function(){for(var e=this,t=[],a=0;a<ft(this.props.month,this.props.year);a++)t.push([]);for(var n=function(){var a=e.props.all_users_data[e.props.user_id].jobs[s],n=e.props.all_jobs_data[a];if(!n)return e.props.updateJobsData(Ae),{v:t};n.start_dates.length&&n.start_dates.map(function(a,s){return a.getMonth()===e.props.month&&t[a.getDate()-1].push(Object(p.a)({},n,{index:s,start_date:a,end_date:n.end_dates[s]})),!0})},s=0;s<this.props.all_users_data[this.props.user_id].jobs.length;s++){var l=n();if("object"===typeof l)return l.v}return t}},{key:"render",value:function(){var e=[],t=[],a=["jobs-0","jobs-1","jobs-2","jobs-3","jobs-4","jobs-5","jobs-6","jobs-7","jobs-8"],n=this.calcJobsByDay();if(!this.props.selected_day&&n&&n.length===ft(this.props.month,this.props.year))for(var l=0;l<ft(this.props.month,this.props.year);l++){for(var r=new Date(this.props.year,this.props.month,l+1),o=0,c=0;c<n[l].length;c++){var i=n[l][c];o+=(i.end_date-i.start_date)/1e3/60/60}for(var d="",p=0;p<this.props.company_settings.weekend.length;p++)r.getDay()===this.props.company_settings.weekend[p]&&(d=" weekend");e.push(s.a.createElement("li",{key:this.props.user_id+"_"+l,className:"cell "+a[Math.min(Math.round(8*o/this.props.company_settings.daily_work_hours),a.length-1)]+d+(r.toDateString()===(new Date).toDateString()||this.props.month/20+this.props.year>(new Date).getMonth()/20+(new Date).getFullYear()&&0===l?" today":"")+this.isDayAssigned(r),onClick:this.handleDayClick(l+1,this.props.index)},o?Math.round(10*o)/10+" hrs":""))}if(this.props.selected_day){for(var u=0;u<24;u++)t.push(s.a.createElement("li",{key:"hour-"+u,className:"day-cell",onClick:this.handleDayCellClick(u)}));if(n[this.props.selected_day-1])for(c=0;c<n[this.props.selected_day-1].length;c++){var m=n[this.props.selected_day-1][c],_=(m.end_date-m.start_date)/1e3/60/60/24*100,h=(m.start_date-new Date(this.props.year,this.props.month,this.props.selected_day))/1e3/60/60/24*100;t.push(s.a.createElement("li",{key:"job-"+m.id+m.index,id:"job-"+m.id+m.index,className:"job"+(m.id===this.props.selected_job?" selected":"")+(m.project_id===this.props.selected_project||this.props.selected_job||!this.props.selected_project?" in-project":""),style:{left:h+"%",maxWidth:_+"%",minWidth:_+"%",top:4*c+"px",backgroundColor:m.project_color}},s.a.createElement("label",null,s.a.createElement(bt.b,{selected:new Date(m.start_date),className:"",onChange:this.handleChangeStartTime(m.id,m.index),dateFormat:"h:mm aa",dateCaption:"change start date",popperPlacement:"left",popperModifiers:{offset:{enabled:!0,offset:"0, 10px"},preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"scrollParent"}},calendarContainer:function(e){var t=e.className,a=e.children;return s.a.createElement("div",null,s.a.createElement(bt.a,{className:t},s.a.createElement("div",{className:"date-picker-header"},"change job date"),s.a.createElement("div",{style:{position:"relative"}},a)))}}),s.a.createElement("div",{id:"job-start-tooltip-"+m.id+m.index,className:"tooltips"}),s.a.createElement("i",{className:"fas fa-calendar-alt"})),s.a.createElement("div",{onClick:this.handleJobClick(m.project_id,m.id,m.index),onTouchStart:this.handleBodyTouchStart(m.id,m.index,h),onMouseDown:this.handleBodyMouseDown(m.id,m.index,h)},s.a.createElement("h4",null,s.a.createElement("i",{className:m.icon}),s.a.createElement("span",null,s.a.createElement("strong",null,m.name))),s.a.createElement("div",{className:"name"},m.project_name)),s.a.createElement("label",{onTouchStart:this.handleEndTouchStart(m.id,m.index,_),onMouseDown:this.handleEndMouseDown(m.id,m.index,_)},s.a.createElement("div",{id:"job-end-tooltip-"+m.id+m.index,className:"tooltips"}),s.a.createElement("i",{className:"fas fa-arrows-alt-h"}))))}}return s.a.createElement("div",{className:"user-schedule"+(this.props.selected_day?" show-day":"")},this.props.selected_day?s.a.createElement("ul",{className:"day-schedule",style:{}},t):s.a.createElement("ul",{className:"month-schedule"},e))}}]),t}(s.a.Component),gt=Object(o.b)(function(e){return{company_settings:e.state.company_settings,all_projects_data:e.state.all_projects_data,all_users_data:e.state.all_users_data,all_jobs_data:e.state.all_jobs_data}},function(e){return Object(c.b)({selectJob:G,selectJobSchedule:X,updateJobsData:H,editJob:K,assignJobToUser:D},e)})(Et);window.loc="en";var vt={en:{MonthNames:["January","Fabruary","March","April","May","June","July","August","September","October","November","December"],MonthNamesShort:["Jan","Fab","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WeekDaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DeleteAllTasksWarning:{message_1:"You're about to delete all of the tasks for the job: ",message_2:".",message_3:"This cannot be undone.",message_4:"Are you sure?",confirm:"delete tasks",cancel:"cancel"},MarkAllTasksCompleteWarning:{message_1:"You're about to mark all of the tasks for the job: ",message_2:" as completed.",message_3:"Are you sure?",confirm:"they're all done!",cancel:"hang on"}}},yt=vt[window.loc].WeekDaysShort,kt=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={selected_day:0},a.handleDayClick=function(e){var t=parseInt(e.currentTarget.dataset.id,10);a.props.handleDayClick(t)},a.isDayAssigned=function(e){var t="";return a.props.selected_job_data&&a.props.selected_job_data.assigned_user===a.props.user_id&&a.props.selected_job_data.start_dates.length&&a.props.selected_job_data.start_dates.map(function(a,n){return jt(a,e)&&(t=" assigned"),a}),t},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.selected_day&&this.props.selected_day!==e.selected_day&&this.setState({selected_day:this.props.selected_day})}},{key:"render",value:function(){for(var e=[],t=[],a=0;a<ft(this.props.month,this.props.year);a++){var n=new Date(this.props.year,this.props.month,a+1);e.push(s.a.createElement("li",{key:a+1,"data-id":a+1,className:"cell"+(n.toDateString()===(new Date).toDateString()?" today":"")+this.isDayAssigned(n),onClick:this.handleDayClick},s.a.createElement("span",null,a+1),s.a.createElement("small",null,yt[n.getDay()])))}if(this.state.selected_day)for(var l=0;l<24;l++){var r=new Date(this.props.year,this.props.month,this.state.selected_day,l);t.push(s.a.createElement("li",{key:l,className:"day-cell"},s.a.createElement("span",null,(r.getHours()%12||12)+" "+(r.getHours()>=12?"pm":"am"))))}return s.a.createElement("div",{className:"user-schedule heatmap-dates"+(this.props.selected_day?" show-day":"")},this.props.selected_day?s.a.createElement("ul",{className:"day-schedule",style:{}},t):s.a.createElement("ul",{className:"month-schedule"},e))}}]),t}(s.a.Component),Ot=function(e){var t=[];for(var a in e)t.push(e[a]);return t},Ct=function(e,t,a){if(a>=e.length)for(var n=a-e.length+1;n--;)e.push(void 0);e.splice(a,0,e.splice(t,1)[0])},Dt=vt[window.loc].WeekDaysShort,wt=vt[window.loc].MonthNames,Nt=vt[window.loc].MonthNamesShort,Tt=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={sort:"trade_name",trade_filter:"all",date:new Date,selected_day:0,selected_index:0,loaded:!1},a.selectSort=function(e){a.setState({sort:e.target.value})},a.selectTradeFilter=function(e){console.log(e.target.value),a.setState({trade_filter:e.target.value})},a.handleJobClick=function(e,t){},a.handleDayClick=function(e,t){a.setState({selected_day:e,selected_index:t})},a.handleClearSelectedDay=function(e){a.setState({selected_day:0})},a.handleNextDay=function(e){var t=a.state.selected_day,n=a.state.date;t===ft(n.getMonth(),n.getFullYear())?(a.handleNextMonth(),t=1):t++,a.setState({selected_day:t})},a.handlePrevDay=function(e){var t,n=a.state.selected_day;1===n?n=ft((t=a.handlePrevMonth()).getMonth(),t.getFullYear()):n--,a.setState({selected_day:n})},a.handleGotoToday=function(e){var t=new Date;a.gotoDate(t)},a.gotoDate=function(e){a.setState({date:e,selected_day:e.getDate()}),a.props.selected_job&&a.props.selected_job_data.assigned_user&&(a[a.props.selected_job_data.assigned_user]?a[a.props.selected_job_data.assigned_user].parentNode.parentNode.scrollTop=a[a.props.selected_job_data.assigned_user].offsetTop-200:setTimeout(function(){a[a.props.selected_job_data.assigned_user]&&(a[a.props.selected_job_data.assigned_user].parentNode.parentNode.scrollTop=a[a.props.selected_job_data.assigned_user].offsetTop-200)},100))},a.handleNextMonth=function(e){var t,n=a.state.date;return t=11===n.getMonth()?new Date(n.getFullYear()+1,0,1):new Date(n.getFullYear(),n.getMonth()+1,1),a.setState({date:t}),t},a.handlePrevMonth=function(e){var t,n=a.state.date;return t=0===n.getMonth()?new Date(n.getFullYear()-1,11,1):new Date(n.getFullYear(),n.getMonth()-1,1),a.setState({date:t}),t},a.createRef=function(e){return function(t){a[e]=t}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.temp_service_call=setTimeout(function(){var t={};for(var a in Le)t[tt(Le[a].trade_name,",")]=!!tt(Le[a].trade_name,",");var n=Object.keys(t);n.sort(function(e,t){var a=e.toLowerCase(),n=t.toLowerCase();return a<n?-1:a>n?1:0}),e.setState({trades:t,trade_names:n,trade_filter:"all",loaded:!0}),e.props.updateUsersData(Le),e.props.selected_job&&(e.props.selected_job_data.start_date?e.gotoDate(e.props.selected_job_data.start_date):e.props.selected_job_data.default_trade&&t[e.props.selected_job_data.default_trade]&&e.setState({trade_filter:e.props.selected_job_data.default_trade}))},1e3)}},{key:"componentDidUpdate",value:function(e){this.props.selected_job===e.selected_job&&this.props.selected_job_index===e.selected_job_index||this.props.selected_job_data&&this.state.loaded&&(this.props.selected_job_data.start_date?(this.setState({trade_filter:"all"}),this.gotoDate(this.props.selected_job_data.start_date)):(this.handleClearSelectedDay(),this.props.selected_job_data.default_trade&&this.state.trades[this.props.selected_job_data.default_trade]?this.setState({trade_filter:this.props.selected_job_data.default_trade}):this.setState({trade_filter:"all"})))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_service_call)}},{key:"render",value:function(){var e=this,t=[],a=[],n=[];if(this.state.loaded){for(var l=Ot(this.props.all_users_data),r=0;r<this.state.trade_names.length;r++)n.push(s.a.createElement("option",{key:this.state.trade_names[r],value:this.state.trade_names[r]},this.state.trade_names[r]));var o=this.state.sort,c=this.state.trade_filter;l.sort(function(e,t){var a=e[o]?0===e.trade_name.indexOf(c)?"a":e[o].toLowerCase():"zzzzzz",n=t[o]?0===t.trade_name.indexOf(c)?"a":t[o].toLowerCase():"zzzzzz";return a<n?-1:a>n?1:0});for(var i=0;i<l.length;i++)this.props.selected_project&&this.props.all_projects_data[this.props.selected_project]&&"Customer"===l[i].trade_name&&this.props.all_projects_data[this.props.selected_project].customer_id!==l[i].id||!("all"===this.state.trade_filter||l[i].trade_name.indexOf(this.state.trade_filter)+1)||(t.push(s.a.createElement("li",{key:"user-"+l[i].id},s.a.createElement("h3",null,l[i].first_name+" "+l[i].last_name),s.a.createElement("h4",null,tt(l[i].trade_name,",")))),a.push(s.a.createElement("li",{key:"user-"+l[i].id,ref:this.createRef(l[i].id)},s.a.createElement(gt,{handleDayClick:this.handleDayClick,handleJobClick:this.handleJobClick,selected_day:this.state.selected_day,selected_index:this.state.selected_index,user_id:l[i].id,month:this.state.date.getMonth(),year:this.state.date.getFullYear(),selected_project:this.props.selected_project,selected_job:this.props.selected_job,selected_job_data:this.props.selected_job_data,gotoDate:this.gotoDate,index:i}))))}return s.a.createElement("div",{className:this.props.className+" scheduler"+(this.state.loaded?" loaded":" loading")},s.a.createElement("div",{className:"menu"},s.a.createElement("input",{id:"filter-selects",type:"checkbox"}),s.a.createElement("label",{className:"filter-selects-button",htmlFor:"filter-selects"},s.a.createElement("i",{className:"fas fa-sort-amount-up"})),s.a.createElement("div",{className:"filter-selects"},s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-sort-alpha-down"}),s.a.createElement("select",{onChange:this.selectSort},s.a.createElement("option",{value:"trade_name"},"sort by trade"),s.a.createElement("option",{value:"last_name"},"sort by last name"),s.a.createElement("option",{value:"first_name"},"sort by first name")),s.a.createElement("i",{className:"fas fa-caret-down"})),s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-filter"}),s.a.createElement("select",{value:this.state.trade_filter,onChange:this.selectTradeFilter},s.a.createElement("option",{value:"all"},"all"),n),s.a.createElement("i",{className:"fas fa-caret-down"}))),this.state.selected_day?s.a.createElement("div",{className:"nav-buttons"},s.a.createElement("button",{className:"hide-text",onClick:function(t){e.handlePrevDay(t)}},s.a.createElement("i",{className:"fas fa-angle-left"}),s.a.createElement("span",null,"Previous Day")),s.a.createElement("button",{onClick:function(t){e.handleClearSelectedDay(t)}},s.a.createElement("i",{className:"fas fa-angle-up"}),s.a.createElement("span",null,wt[this.state.date.getMonth()])),s.a.createElement("button",{className:"hide-text",onClick:function(t){e.handleNextDay(t)}},s.a.createElement("span",null,"Next Day"),s.a.createElement("i",{className:"fas fa-angle-right"}))):s.a.createElement("div",{className:"nav-buttons"},s.a.createElement("button",{className:"hide-text",onClick:function(t){e.handlePrevMonth(t)}},s.a.createElement("i",{className:"fas fa-angle-left"}),s.a.createElement("span",null,"Previous Month")),s.a.createElement("button",{onClick:function(t){e.handleGotoToday(t)}},s.a.createElement("span",null,"Today")),s.a.createElement("button",{className:"hide-text",onClick:function(t){e.handleNextMonth(t)}},s.a.createElement("span",null,"Next Month"),s.a.createElement("i",{className:"fas fa-angle-right"})))),s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"schedule-grid schedule-grid-header"},s.a.createElement("ul",{className:"user-names"},s.a.createElement("li",{className:"month-name"},s.a.createElement("h3",null,this.state.selected_day?Dt[new Date(this.state.date.getFullYear(),this.state.date.getMonth(),this.state.selected_day).getDay()]+" "+Nt[this.state.date.getMonth()]+" "+this.state.selected_day:wt[this.state.date.getMonth()]),s.a.createElement("h4",null,this.state.date.getFullYear()))),s.a.createElement("ul",{className:"heat-maps"},s.a.createElement("li",null,s.a.createElement(kt,{handleDayClick:this.handleDayClick,selected_day:this.state.selected_day,month:this.state.date.getMonth(),year:this.state.date.getFullYear(),selected_job:this.props.selected_job,selected_job_data:this.props.selected_job_data})))),s.a.createElement("div",{id:"schedule-grid",className:"schedule-grid"},s.a.createElement("div",{className:"load-background"}),s.a.createElement("ul",{className:"user-names"},t),s.a.createElement("ul",{className:"heat-maps"},a))))}}]),t}(s.a.Component),St=Object(o.b)(function(e){return{all_users_data:e.state.all_users_data,all_projects_data:e.state.all_projects_data,selected_job_index:e.state.selected_job_index,selected_project:e.state.selected_project}},function(e){return Object(c.b)({updateUsersData:w},e)})(Tt),Pt=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={loaded:!1},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({loaded:!0})},1)}},{key:"render",value:function(){return s.a.createElement("section",{id:"page-schedule",className:this.state.loaded?"loaded":"loading"},s.a.createElement(St,{className:"card"}))}}]),t}(s.a.Component),Mt=Object(o.b)(function(e){return{all_users_data:e.state.all_users_data,all_projects_data:e.state.all_projects_data}})(Pt),xt=["white","#fff3e9","#ffe5cf","#ffd7b6","#ffc99c","#ffbb83","#ffad69","#ff9f50","#ff9136"],At={new:3,scheduled:7,pending:10,estimate:10,approved:10,rejected:10},It=function(e,t,a){var n=Math.min(Math.round((new Date-e[e.status+"_date"])/1e3/60/60/24*8/At[e.status]),xt.length-1);return Object(p.a)({color:n>=8?"white":"black",background:xt[n]},a)},Lt=function(e){return{background:e?"#e4e4e4":"white",padding:".5rem",width:"100%",flex:"1 1 auto"}},Jt=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={sort:"heat"},a.selectSort=function(e){console.log(e.target.value),a.setState({sort:e.target.value})},a.handleEstimateClick=function(e){return function(t){a.props.selectLead(e)}},a.handleLeadClick=function(e){return function(t){a.props.selectLead(e)}},a.createLead=function(e,t){return s.a.createElement(pe.b,{key:e.id,draggableId:e.id,index:t},function(t,n){return s.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{onClick:a.handleEstimateClick(e.id),style:It(e,n.isDragging,t.draggableProps.style)}),s.a.createElement("div",null,e.first_name+" "+e.last_name))})},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t={new_leads:[],pending_leads:[],scheduled_leads:[],estimate_leads:[],approved_leads:[],rejected_leads:[],other_leads:[]};for(var a in this.props.all_leads_data)switch(this.props.all_leads_data[a].status){case"new":t.new_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"pending":t.pending_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"scheduled":t.scheduled_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"estimate":t.estimate_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"approved":t.approved_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"rejected":t.rejected_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;default:t.other_leads.push(Object(p.a)({},this.props.all_leads_data[a]))}var n=this.state.sort;for(var l in t)t[l].sort(function(e,t){var a="heat"===n?Math.round(e[e.status+"_date"]/1e3/60/60/24*8/At[e.status]-new Date):e[n].toLowerCase(),s="heat"===n?Math.round(t[t.status+"_date"]/1e3/60/60/24*8/At[t.status]-new Date):t[n].toLowerCase();return a<s?-1:a>s?1:0});return s.a.createElement("div",{className:"lead-kanban"},s.a.createElement("div",{className:"menu"},s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.props.selectLead("NEWLEAD")},className:""},s.a.createElement("i",{className:"fas fa-plus"}),s.a.createElement("span",null,"add a new lead")),s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-sort-alpha-down"}),s.a.createElement("select",{onChange:this.selectSort},s.a.createElement("option",{value:"heat"},"sort by time in column"),s.a.createElement("option",{value:"last_name"},"sort by last name"),s.a.createElement("option",{value:"first_name"},"sort by first name")),s.a.createElement("i",{className:"fas fa-caret-down"})))),s.a.createElement("div",{className:"columns"},this.props.all_leads_data&&[s.a.createElement("div",{className:"droppable-column",key:"new"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-star-of-life"}),s.a.createElement("span",null,"new leads")),s.a.createElement("div",null,s.a.createElement(pe.c,{className:"droppable-column",droppableId:"new_leads",type:"LEAD"},function(a,n){return s.a.createElement("div",{ref:a.innerRef,style:Lt(n.isDraggingOver)},t.new_leads.map(function(t,a){return e.createLead(t,a)}),a.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"scheduled"},s.a.createElement("h3",null,s.a.createElement("i",{className:"far fa-calendar-alt"}),s.a.createElement("span",null,"estimate scheduled")),s.a.createElement("div",null,s.a.createElement(pe.c,{className:"droppable-column",droppableId:"scheduled_leads",type:"LEAD"},function(a,n){return s.a.createElement("div",{ref:a.innerRef,style:Lt(n.isDraggingOver)},t.scheduled_leads.map(function(t,a){return e.createLead(t,a)}),a.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"pending"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-clock"}),s.a.createElement("span",null,"estimate pending")),s.a.createElement("div",null,s.a.createElement(pe.c,{className:"droppable-column",droppableId:"pending_leads",type:"LEAD"},function(a,n){return s.a.createElement("div",{ref:a.innerRef,style:Lt(n.isDraggingOver)},t.pending_leads.map(function(t,a){return e.createLead(t,a)}),a.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"estimate"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-clipboard"}),s.a.createElement("span",null,"estimate sent")),s.a.createElement("div",null,s.a.createElement(pe.c,{className:"droppable-column",droppableId:"estimate_leads",type:"LEAD"},function(a,n){return s.a.createElement("div",{ref:a.innerRef,style:Lt(n.isDraggingOver)},t.estimate_leads.map(function(t,a){return e.createLead(t,a)}),a.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"approved"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-user-check"}),s.a.createElement("span",null,"estimate approved")),s.a.createElement("div",null,s.a.createElement(pe.c,{className:"droppable-column",droppableId:"approved_leads",type:"LEAD"},function(a,n){return s.a.createElement("div",{ref:a.innerRef,style:Lt(n.isDraggingOver)},t.approved_leads.map(function(t,a){return e.createLead(t,a)}),a.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"rejected"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-user-times"}),s.a.createElement("span",null,"estimate rejected")),s.a.createElement("div",null,s.a.createElement(pe.c,{className:"droppable-column",droppableId:"rejected_leads",type:"LEAD"},function(a,n){return s.a.createElement("div",{ref:a.innerRef,style:Lt(n.isDraggingOver)},t.rejected_leads.map(function(t,a){return e.createLead(t,a)}),a.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"results"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-arrow-right"}),"continue"),s.a.createElement("div",{className:"continue-slots"},s.a.createElement(pe.c,{className:"droppable-column",droppableId:"project_leads",type:"LEAD"},function(e,t){return s.a.createElement("div",{ref:e.innerRef,style:Lt(t.isDraggingOver)},s.a.createElement("div",{className:"drag-placeholder"},s.a.createElement("i",{className:"fas fa-toolbox"}),s.a.createElement("div",null,"start project from lead"),s.a.createElement("div",{style:{display:"none"}},e.placeholder)))}),s.a.createElement(pe.c,{className:"droppable-column",droppableId:"archive_leads",type:"LEAD"},function(e,t){return s.a.createElement("div",{ref:e.innerRef,style:Lt(t.isDraggingOver)},s.a.createElement("div",{className:"drag-placeholder"},s.a.createElement("i",{className:"fas fa-archive"}),s.a.createElement("div",null,"archive lead"),s.a.createElement("div",{style:{display:"none"}},e.placeholder)))})))]))}}]),t}(s.a.Component),Ut=Object(o.b)(function(e){return{all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({updateLeadsData:T,selectLead:S,openProjectEditor:B,updateProjectsData:M,updateUsersData:w,selectJob:G},e)})(Jt),Bt=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e={new_leads:[],pending_leads:[],scheduled_leads:[],estimate_leads:[],approved_leads:[],rejected_leads:[]},t=0;for(var a in this.props.all_leads_data){switch(this.props.all_leads_data[a].status){case"new":e.new_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"pending":e.pending_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"scheduled":e.scheduled_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"estimate":e.estimate_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"approved":e.approved_leads.push(Object(p.a)({},this.props.all_leads_data[a]));break;case"rejected":e.rejected_leads.push(Object(p.a)({},this.props.all_leads_data[a]))}t++}var n={new_leads:{range:20},scheduled_leads:{range:30},pending_leads:{range:4,flip:!0},estimate_leads:{range:5},approved_leads:{range:15},rejected_leads:{range:4,flip:!0}},l={};for(var r in e)l[r]=s.a.createElement("div",{className:"chart-node",key:r},s.a.createElement("div",{className:n[r].flip&&e[r].length>n[r].range?"l-0":"l-10",style:{transform:"scaleY("+e[r].length/t*5+")"}}),n[r].flip&&e[r].length>n[r].range&&s.a.createElement("i",{className:"fas fa-exclamation-triangle"}));return s.a.createElement("div",{className:"lead-chart"},s.a.createElement("div",{className:"bar"}),s.a.createElement("i",{className:"fas fa-arrow-right continue"}),s.a.createElement("div",{className:"chart"},l.new_leads,l.scheduled_leads,l.pending_leads,l.estimate_leads,l.approved_leads,l.rejected_leads,s.a.createElement("div",{className:"chart-node"})))}}]),t}(s.a.Component),Rt=Object(o.b)(function(e){return{all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({updateLeadsData:T},e)})(Bt),Ft=a(38),Ht=a.n(Ft),Wt=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={value:a.props.defaultValue?Ht.a.createValueFromString(a.props.defaultValue,"html"):Ht.a.createEmptyValue()},a.onChange=function(e){a.setState({value:e}),a.props.onChange&&a.props.onChange(e.toString("html"))},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.defaultValue===e.defaultValue&&this.props.refresh===e.refresh||this.setState({value:this.props.defaultValue?Ht.a.createValueFromString(this.props.defaultValue,"html"):Ht.a.createEmptyValue()})}},{key:"render",value:function(){return s.a.createElement(Ht.a,{className:"editor",value:this.state.value,onChange:this.onChange})}}]),t}(s.a.Component),qt=function(e){this.hex=e},zt=function(e){var t=e.hex.substring(1),a=parseInt(t.substring(0,2),16)/255,n=parseInt(t.substring(2,4),16)/255,s=parseInt(t.substring(4,6),16)/255,l=Math.max.apply(Math,[a,n,s]),r=Math.min.apply(Math,[a,n,s]),o=l-r,c=0,i=l,d=0;return i>0&&(d=o/i)>0&&(a===l?(c=(n-r-(s-r))/o*60)<0&&(c+=360):n===l?c=120+(s-r-(a-r))/o*60:s===l&&(c=240+(a-r-(n-r))/o*60)),e.chroma=o,e.hue=c,e.sat=d,e.val=i,e.luma=.3*a+.59*n+.11*s,e.red=parseInt(t.substring(0,2),16),e.green=parseInt(t.substring(2,4),16),e.blue=parseInt(t.substring(4,6),16),e},Yt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.openProjectEditor(null)},a.handleChange=function(e){a.setState({project_data:Object(p.a)({},a.state.project_data,Object(d.a)({},e.target.name,e.target.value))})},a.handleColorChange=function(e){a.setState({project_data:Object(p.a)({},a.state.project_data,{color:e.target.value})})},a.handleDescriptionChange=function(e){a.setState({project_data:Object(p.a)({},a.state.project_data,{description:e})})},a.handleIconChange=function(e){a.setState({icon:e.target.value}),setTimeout(function(){a.setState({project_data:{}})},500)},a.handleSaveChanges=function(e){"NEWPROJECT"===a.props.open_project_editor?a.props.updateProjectsData(Object(d.a)({},a.state.project_data.id,a.state.project_data)):(a.props.editProject(a.state.project_data.id,a.state.project_data),a.state.project_data.color!==a.props.all_projects_data[a.state.project_data.id].color&&a.props.updateProjectColor(a.state.project_data.id,a.state.project_data.color)),setTimeout(function(){a.setState({project_data:{}})},500)},a.state={project_data:a.props.all_projects_data[a.props.open_project_editor]||{id:Math.random()}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.open_project_editor&&this.props.open_project_editor!==e.open_project_editor)if("NEWPROJECT"===this.props.open_project_editor){var t={};if(this.props.new_project_data){var a=Math.random(),n=Math.random(),s=Object(p.a)({},this.props.new_project_data,{id:n,trade_name:"Customer",jobs:[],tasks:[]});t={address:this.props.new_project_data.address,customer_id:n,id:a,jobs:[],tasks:[],photos:[],completed:!1},this.props.updateUsersData(Object(d.a)({},n,s))}this.setState({project_data:Object(p.a)({},t)})}else this.setState({project_data:this.props.all_projects_data[this.props.open_project_editor]||{}})}},{key:"render",value:function(){for(var e=this,t=Object(i.a)(Ee),a=[],n=0;n<t.length;n++){var l=new qt(t[n]);zt(l),a.push(l)}!function(e){e.sort(function(e,t){return e.hue-t.hue})}(a);for(var r=[],o=0;o<a.length;o++)r.push(s.a.createElement("div",{key:"color "+o,className:"radio"},s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:a[o].hex,checked:this.state.project_data.color===a[o].hex,onChange:this.handleColorChange}),s.a.createElement("i",{style:{backgroundColor:a[o].hex}}))));return s.a.createElement("div",{className:"project-editor form"+(this.props.open_project_editor&&this.props.all_projects_data?" show":"")},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("span",null,this.state.project_data.name||"")),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.handleSaveChanges(),e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-check"}),s.a.createElement("span",null,"save")),s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,"cancel")))),s.a.createElement("main",null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"project name"),s.a.createElement("input",{name:"name",type:"text",placeholder:"project name",value:this.state.project_data.name||"",onChange:this.handleChange}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"color"),s.a.createElement("div",{className:"color-picker"},r))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"project address"),s.a.createElement("textarea",{name:"address",placeholder:"project address",value:this.state.project_data.address||"",onChange:this.handleChange}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"notes"),s.a.createElement(Wt,{defaultValue:this.props.all_projects_data[this.props.open_project_editor]&&this.props.all_projects_data[this.props.open_project_editor].description||"",onChange:this.handleDescriptionChange,refresh:this.props.open_project_editor||this.state.project_data.id}))))))}}]),t}(s.a.Component),Kt=Object(o.b)(function(e){return{selected_job:e.state.selected_job,open_project_editor:e.state.open_project_editor,new_project_data:e.state.new_project_data,all_projects_data:e.state.all_projects_data,all_jobs_data:e.state.all_jobs_data,all_tasks_data:e.state.all_tasks_data,all_users_data:e.state.all_users_data}},function(e){return Object(c.b)({openProjectEditor:B,editProject:F,updateProjectsData:M,updateProjectColor:x,updateUsersData:w},e)})(Yt),Vt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.openLeadEditor(null),setTimeout(function(){a.setState({lead_data:{id:Math.random()}})},500)},a.handleChange=function(e){a.setState({lead_data:Object(p.a)({},a.state.lead_data,Object(d.a)({},e.target.name,e.target.value))})},a.handleDescriptionChange=function(e){a.setState({task_data:Object(p.a)({},a.state.task_data,{description:e})})},a.handleSaveChanges=function(e){if("NEWLEAD"===a.props.open_lead_editor){var t=Math.random(),n=Object(p.a)({},a.state.lead_data,{id:t,new_date:new Date,status:"new"});a.props.updateLeadsData(Object(d.a)({},t,n))}else a.props.updateLeadsData(Object(d.a)({},a.props.open_lead_editor,a.state.lead_data));setTimeout(function(){a.setState({lead_data:{id:Math.random()}})},500)},a.state={lead_data:a.props.all_leads_data[a.props.open_lead_editor]||{id:Math.random()}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.open_lead_editor&&this.props.open_lead_editor!==e.open_lead_editor&&this.setState({lead_data:this.props.all_leads_data[this.props.open_lead_editor]||{id:Math.random()}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"lead-editor form"+(this.props.open_lead_editor&&this.props.all_leads_data?" show":"")},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("i",{className:"fas fa-phone"}),s.a.createElement("span",null,(this.state.lead_data.first_name||"")+" "+(this.state.lead_data.last_name||""))),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.handleSaveChanges(),e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-check"}),s.a.createElement("span",null,"save")),s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,"cancel")))),s.a.createElement("main",null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"first name"),s.a.createElement("input",{name:"first_name",type:"text",placeholder:"first name",value:this.state.lead_data.first_name||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"last name"),s.a.createElement("input",{name:"last_name",type:"text",placeholder:"last name",value:this.state.lead_data.last_name||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"email"),s.a.createElement("input",{name:"email",type:"email",placeholder:"email",value:this.state.lead_data.email||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"phone"),s.a.createElement("input",{name:"phone",type:"text",placeholder:"phone",value:this.state.lead_data.phone||"",onChange:this.handleChange}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"notes"),s.a.createElement(Wt,{defaultValue:this.state.lead_data.description||"",onChange:this.handleDescriptionChange,refresh:this.props.open_lead_editor||this.state.lead_data.id}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"address"),s.a.createElement("textarea",{name:"address",placeholder:"address",value:this.state.lead_data.address||"",onChange:this.handleChange}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"company name"),s.a.createElement("input",{name:"company_name",type:"text",placeholder:"company name",value:this.state.lead_data.company_name||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"website"),s.a.createElement("input",{name:"website",type:"text",placeholder:"website",value:this.state.lead_data.website||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"birthday"),s.a.createElement("input",{name:"birthday",type:"text",placeholder:"birthday",value:this.state.lead_data.birthday||"",onChange:this.handleChange}))))))}}]),t}(s.a.Component),Gt=Object(o.b)(function(e){return{open_lead_editor:e.state.open_lead_editor,all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({openLeadEditor:$,updateLeadsData:T},e)})(Vt),Xt=function(e){return s.a.createElement("section",{id:"modal-warning"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("i",{className:"fas fa-exclamation-triangle"}),s.a.createElement("span",null,e.title||"Warning")),s.a.createElement("button",{onClick:function(){window.closeModal()},className:"icon-button"},s.a.createElement("i",{className:"fas fa-times"}))),s.a.createElement("div",{className:"message"},e.message),s.a.createElement("footer",null,s.a.createElement("button",{onClick:function(){e.handleConfirm(),window.closeModal()}},s.a.createElement("i",{className:"fas fa-check"}),s.a.createElement("span",null,e.confirm)),s.a.createElement("button",{onClick:function(){e.handleCancel(),window.closeModal()}},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,e.cancel))))},Zt=vt[window.loc].DeleteAllTasksWarning,Qt=vt[window.loc].MarkAllTasksCompleteWarning,$t=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={loaded:!1,add_task_text:"",temp_edit_text:"",currently_editing:0,all_complete:!1,selected_lead:null},a.handleTaskClick=function(e){return function(t){if(a.state.currently_editing!==e){var n=Object(p.a)({},a.props.all_tasks_data[e]);n.completed=!n.completed,a.props.editTask(e,Object(p.a)({},n));for(var s=a.props.all_leads_data[a.state.selected_lead].tasks,l={},r=0;r<s.length;r++){var o=a.props.all_tasks_data[s[r]];o.id===e&&(o.completed=n.completed),l[o.id]=o}a.updateJob(l)}}},a.handleCompleteAll=function(){var e=a.props.all_leads_data[a.state.selected_lead].tasks;window.openModal(s.a.createElement(Xt,{message:s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("span",null,Qt.message_1),s.a.createElement("strong",null,a.props.all_leads_data[a.state.selected_lead].name),s.a.createElement("span",null,Qt.message_2)),s.a.createElement("p",null,Qt.message_3)),cancel:Qt.cancel,confirm:Qt.confirm,handleConfirm:function(){for(var t={},n=0;n<e.length;n++){var s=a.props.all_tasks_data[e[n]];s.completed=!0,t[s.id]=s}a.props.updateTasksData(t),a.updateJob(t)},handleCancel:function(){}}))},a.handleIncompleteAll=function(){for(var e={},t=a.props.all_leads_data[a.state.selected_lead].tasks,n=0;n<t.length;n++){var s=a.props.all_tasks_data[t[n]];s.completed=!1,e[s.id]=s}a.props.updateTasksData(e),a.updateJob(e)},a.handleDeleteAll=function(){var e=a.props.all_leads_data[a.state.selected_lead].tasks;window.openModal(s.a.createElement(Xt,{message:s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("span",null,Zt.message_1),s.a.createElement("strong",null,a.props.all_leads_data[a.state.selected_lead].name),s.a.createElement("span",null,Zt.message_2)),s.a.createElement("p",null,Zt.message_3),s.a.createElement("p",null,Zt.message_4)),cancel:Zt.cancel,confirm:Zt.confirm,handleConfirm:function(){var t=Object(i.a)(e);a.props.deleteTasks(t)},handleCancel:function(){}}))},a.handleDelete=function(e){return function(t){t.preventDefault(),t.stopPropagation(),a.props.deleteTasks([e])}},a.handleAddKeyPress=function(e){"Enter"===e.key&&a.handleAddTask()},a.handleAddChange=function(e){a.setState({add_task_text:e.currentTarget.value})},a.handleAddTask=function(e){if(a.state.add_task_text){var t="task_"+Math.random(),n={id:t,name:a.state.add_task_text,completed:!1};a.props.addTask(t,n,a.state.selected_lead),a.setState({add_task_text:""})}},a.handleEdit=function(e,t){return function(t){t.preventDefault(),t.stopPropagation(),a.props.selectTask(e)}},a.handleEditKeyPress=function(e){"Enter"===e.key&&a.handleConfirmEdit(e)},a.handleEditChange=function(e){a.setState({temp_edit_text:e.currentTarget.value})},a.handleCancelEdit=function(){return function(e){e.preventDefault(),e.stopPropagation(),a.setState({currently_editing:null})}},a.handleConfirmEdit=function(){return function(e){e.preventDefault(),e.stopPropagation();var t=a.state.currently_editing;a.props.editTask(t,{name:a.state.temp_edit_text}),a.setState({currently_editing:null})}},a.handleTaskDragStart=function(e){a.dragged_id=e.target.dataset.id,a.dragged_index=e.target.dataset.index},a.handleTaskDragEnd=function(e){window.setStyle(""),a.drop_id&&a.handleTaskDrop(e)},a.handleTaskDragOver=function(e){e.preventDefault(),e.currentTarget.dataset.id!==a.drop_id&&(parseInt(e.currentTarget.dataset.index,10)>=parseInt(a.dragged_index,10)?window.setStyle('\n          [data-id="'+e.currentTarget.dataset.id+'"]:after {\n            bottom: 0 !important;\n            opacity: 1 !important;\n          }\n        '):window.setStyle('\n          [data-id="'+e.currentTarget.dataset.id+'"]:after {\n            top: 0 !important;\n            opacity: 1 !important;\n          }\n        '),a.drop_id=e.currentTarget.dataset.id,a.drop_index=e.currentTarget.dataset.index)},a.handleTaskDragLeave=function(e){e.preventDefault()},a.handleTaskDrop=function(e){e.preventDefault();var t=Object(i.a)(a.props.all_leads_data[a.state.selected_lead].tasks),n=a.dragged_index,s=a.drop_index;a.drop_id=null,window.setStyle(""),Ct(t,parseInt(n,10),parseInt(s,10)),a.props.editLead(a.state.selected_lead,{tasks:t})},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"callAPI",value:function(){var e=this;this.temp_api_call=setTimeout(function(){var t={};for(var a in Ie)for(var n=0;n<e.props.all_leads_data[e.props.selected_lead].tasks.length;n++)e.props.all_leads_data[e.props.selected_lead].tasks[n]===Ie[a].id&&(e.props.all_tasks_data[Ie[a].id]||(t[Ie[a].id]=Object(p.a)({},Ie[a])));e.props.updateTasksData(t),e.setState({loaded:!0,selected_lead:e.props.selected_lead})},50)}},{key:"componentDidMount",value:function(){this.props.all_leads_data[this.props.selected_lead]&&this.callAPI()}},{key:"componentDidUpdate",value:function(e){this.props.selected_lead&&this.props.selected_lead!==e.selected_lead&&(this.callAPI(),this.setState({loaded:!1}))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_api_call)}},{key:"checkIfAllComplete",value:function(e){for(var t=!0,a=0;a<e.length;a++){if(!this.props.all_tasks_data[e[a]].completed){t=!1;break}}return t&&!!e.length}},{key:"updateJob",value:function(e){var t,a=0,n=0;for(var s in e)e[s].completed&&a++,n++;t=Math.round(a/n*100)||0,console.log(t),this.props.editLead(this.props.selected_lead,{progress:t})}},{key:"changeMode",value:function(e){this.setState({mode:e})}},{key:"getMenu",value:function(){var e=this,t=this.state.selected_lead&&this.state.loaded?this.props.all_leads_data[this.state.selected_lead].tasks:[];return s.a.createElement("div",{className:"menu"},s.a.createElement("div",null,s.a.createElement("div",{className:"button-group"},s.a.createElement("input",{type:"text",placeholder:"task name",value:this.state.add_task_text,onChange:this.handleAddChange,onKeyPress:this.handleAddKeyPress}),s.a.createElement("button",{onClick:function(t){e.handleAddTask(t)}},s.a.createElement("i",{className:"fas fa-plus"}),s.a.createElement("span",null,"add task")))),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(t){e.handleDeleteAll()},disabled:!t.length},s.a.createElement("i",{className:"fas fa-trash"}),s.a.createElement("span",null,"delete all"))))}},{key:"render",value:function(){var e=[];if(this.state.selected_lead){var t=this.props.all_leads_data[this.state.selected_lead].tasks;if(t&&this.state.loaded)for(var a=Object(i.a)(t),n=0;n<a.length;n++){var l=this.props.all_tasks_data[a[n]];l&&e.push(s.a.createElement("li",{key:this.state.selected_lead+"_"+l.id,className:"task"+(l.completed?" completed":"")+(l.id===this.state.currently_editing?" currently-editing":"")+(this.state.drop_id===l.id?" drop-"+this.state.drop_location:""),"data-id":l.id,"data-index":n,onClick:this.handleTaskClick(l.id),draggable:!0,onDrag:this.handleTaskDragStart,onDragEnd:this.handleTaskDragEnd,onDragOver:this.handleTaskDragOver,onDragLeave:this.handleTaskDragLeave,onDrop:this.handleTaskDrop},s.a.createElement("h3",null,s.a.createElement("span",{className:"icon-holder"},s.a.createElement("i",{className:"fas fa-check-circle check"}),s.a.createElement("i",{className:"far fa-circle"})),this.state.currently_editing===l.id?s.a.createElement("input",{className:"",defaultValue:l.name,onChange:this.handleEditChange,onKeyPress:this.handleEditKeyPress}):s.a.createElement("span",{className:"task-name"},l.name)),l.start_date&&s.a.createElement("span",{className:"date"},s.a.createElement("span",{className:"date-value"},l.start_date.toLocaleDateString()),s.a.createElement("span",{className:"time-value"},l.start_date.toLocaleTimeString()+(l.end_date?" - "+l.end_date.toLocaleTimeString():""))),s.a.createElement("div",null,this.state.currently_editing===l.id?s.a.createElement("div",null,s.a.createElement("button",{className:"icon-button",onClick:this.handleConfirmEdit(l.id),title:"Apply"},s.a.createElement("i",{className:"fas fa-check"})),s.a.createElement("button",{className:"icon-button",onClick:this.handleCancelEdit(l.id),title:"Cancel"},s.a.createElement("i",{className:"fas fa-times"}))):s.a.createElement("div",null,s.a.createElement("button",{className:"icon-button",onClick:this.handleEdit(l.id,l.name),title:"Edit Task"},s.a.createElement("i",{className:"fas fa-edit"})),s.a.createElement("button",{className:"icon-button",onClick:this.handleDelete(l.id),title:"Delete Task"},s.a.createElement("i",{className:"fas fa-trash"}))))))}}return s.a.createElement("div",{className:"job-tasks"+(this.state.loaded?"":" loading")},this.getMenu(),s.a.createElement("div",{className:"task-list"},s.a.createElement("ul",null,e)))}}]),t}(s.a.Component),ea=(Object(o.b)(function(e){return{all_tasks_data:e.state.all_tasks_data,all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({updateTasksData:Z,editLead:P,completeTask:se,deleteTasks:ne,editTask:ae,addTask:Q,selectTask:le},e)})($t),function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.openJobEditor(null)},a.handleChange=function(e){a.setState({job_data:Object(p.a)({},a.state.job_data,Object(d.a)({},e.target.name,e.target.value))})},a.handleDescriptionChange=function(e){a.setState({job_data:Object(p.a)({},a.state.job_data,{description:e})})},a.handleSaveChanges=function(e){if(a.props.open_job_editor.lead_id){var t=Object(i.a)(a.props.all_leads_data[a.props.open_job_editor.lead_id].jobs);a.props.editJob(t[a.props.open_job_editor.job_index],a.state.job_data)}else"NEWJOB"===a.props.open_job_editor?a.props.updateJobData(Object(d.a)({},a.state.job_data.id,a.state.job_data)):a.props.editJob(a.state.job_data.id,a.state.job_data);setTimeout(function(){a.setState({job_data:{}})},500)},a.state={job_data:{id:Math.random()}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.open_job_editor&&this.props.open_job_editor.lead_id?e.open_job_editor&&this.props.open_job_editor.lead_id===e.open_job_editor.lead_id||this.setState({job_data:Object(p.a)({},this.props.open_job_editor.job_data)}):this.props.open_job_editor&&this.props.open_job_editor!==e.open_job_editor&&("NEWJOB"===this.props.open_job_editor||this.setState({job_data:this.props.all_jobs_data[this.props.open_job_editor]||{}}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"job-editor form"+(this.props.open_job_editor&&this.props.all_jobs_data?" show":"")},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("span",null,this.state.job_data.name||"")),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.handleSaveChanges(),e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-check"}),s.a.createElement("span",null,"save")),s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,"cancel")))),s.a.createElement("main",null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"job name"),s.a.createElement("input",{name:"name",type:"text",placeholder:"job name",value:this.state.job_data.name||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"notes"),s.a.createElement(Wt,{defaultValue:(this.props.open_job_editor&&this.props.open_job_editor.lead_id?this.props.open_job_editor.job_data.description:this.props.all_jobs_data[this.props.open_job_editor]&&this.props.all_jobs_data[this.props.open_job_editor].description)||"",onChange:this.handleDescriptionChange,refresh:this.state.job_data.id})))))))}}]),t}(s.a.Component)),ta=Object(o.b)(function(e){return{selected_job:e.state.selected_job,open_job_editor:e.state.open_job_editor,new_job_data:e.state.new_job_data,all_jobs_data:e.state.all_jobs_data,all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({openJobEditor:Y,editJob:K,editLead:P},e)})(ea),aa=function(e,t,a){return Object(p.a)({color:"black",background:"#c1c1c1",padding:"1rem",margin:"0 .5rem .5rem 0",borderRadius:"5px",width:"auto"},a)},na=function(e,t,a){return Object(p.a)({color:"black",background:"#c1c1c1",padding:"1rem",margin:"0 .5rem .5rem 0",borderRadius:"5px",width:"auto"},a)},sa=function(e,t,a){return Object(p.a)({padding:".5rem",margin:"0 .5rem 0 0",borderRadius:"5px",width:"auto",flex:"0 0 auto",backgroundColor:"#3a3a3a"},a)},la=function(e){return{background:e?"#e4e4e4":"transparent",display:"flex",padding:".5rem 0",width:"100%",minHeight:"5rem",flex:"1 1 auto",position:"relative",zIndex:"1",flexFlow:"row wrap"}},ra=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={loaded:!1,tab:"project-templates"},a.handleTimelineValueChange=function(e,t,n){return function(e){var s=Object(i.a)(a.props.all_leads_data[a.props.selected_lead].jobs);s[t].data[n].value=e.target.value,a.props.editLead(a.props.selected_lead,{jobs:s})}},a.handleDeleteJobTemplate=function(e){return function(t){t.stopPropagation();var n=Object(i.a)(a.props.all_leads_data[a.props.selected_lead].jobs);n.splice(e,1),console.log(e),a.props.editLead(a.props.selected_lead,{jobs:n})}},a.handleTimelineJobClick=function(e,t){return function(n){a.props.openJobEditor({lead_id:a.props.selected_lead,job_data:e,job_index:t})}},a.handleLabelClick=function(e){e.stopPropagation()},a.createTimelineJob=function(e,t){var n=[],l=a.props.all_jobs_data[e];if(l.data)for(var r=0;r<l.data.length;r++)n.push(s.a.createElement("div",{key:l.id+r},s.a.createElement("label",{onClick:a.handleLabelClick},s.a.createElement("span",null,l.data[r].name),s.a.createElement("input",{type:l.data[r].type,value:l.data[r].value,onChange:a.handleTimelineValueChange(l,t,r)}))));return s.a.createElement(pe.b,{key:"timeline_"+l.id+t,draggableId:"timeline_"+l.id+t,index:t},function(e,r){return s.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{onClick:a.handleTimelineJobClick(l,t),style:sa(l,r.isDragging,e.draggableProps.style)}),s.a.createElement("header",null,s.a.createElement("i",{className:l.icon}),s.a.createElement("span",{className:"title"},l.name),s.a.createElement("button",{title:"close",onClick:a.handleDeleteJobTemplate(t),className:"icon-button"},s.a.createElement("i",{className:"fas fa-times"}))),n)})},a.createJob=function(e,t){return s.a.createElement(pe.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({className:"job",ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:na(e,a.isDragging,t.draggableProps.style)}),s.a.createElement("i",{className:e.icon}),s.a.createElement("span",null,e.name))})},a.createProject=function(e,t){return s.a.createElement("div",{className:"drag-project",key:e.id},s.a.createElement(pe.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:aa(e,a.isDragging,t.draggableProps.style)}),s.a.createElement("div",null,e.name))}),a.props.all_job_templates_data&&s.a.createElement("div",{className:"jobs"},e.jobs.map(function(e,t){return s.a.createElement("div",{key:e},s.a.createElement("i",{className:a.props.all_job_templates_data[e].icon}),a.props.all_job_templates_data[e].name)})))},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"getTemplateData",value:function(){this.props.all_job_templates_data&&this.props.all_project_templates_data||(this.props.updateJobTemplatesData(ye),this.props.updateProjectTemplatesData(ke))}},{key:"componentDidMount",value:function(){this.getTemplateData()}},{key:"changeMode",value:function(e){this.setState({tab:e})}},{key:"render",value:function(){var e=this,t=this.props.selected_lead?this.props.all_leads_data[this.props.selected_lead].jobs:[],a=[],n=[];if(this.props.all_job_templates_data){for(var l in this.props.all_job_templates_data)a.push(this.props.all_job_templates_data[l]);a.sort(function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})}if(this.props.all_project_templates_data){for(var r in this.props.all_project_templates_data)n.push(this.props.all_project_templates_data[r]);n.sort(function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})}return s.a.createElement("article",{className:"estimate-project"},s.a.createElement("header",null,s.a.createElement("h2",null,this.props.selected_lead_data.name)),s.a.createElement("div",{className:"timeline"},s.a.createElement(pe.c,{className:"droppable-column",droppableId:"timeline",type:"TEMPLATE",direction:"horizontal"},function(a,n){return s.a.createElement("div",{ref:a.innerRef,style:(l=n.isDraggingOver,{background:l?"#e4e4e4":"transparent",display:"flex",padding:"1.5rem",width:"100%",minHeight:"10rem",flex:"1 1 auto",position:"relative",zIndex:"1"})},!t.length&&s.a.createElement("span",{className:"icon"},s.a.createElement("span",null,"drag templates "),s.a.createElement("i",{className:"fas fa-hand-rock"}),s.a.createElement("span",null," on to timeline")),t.map(function(t,a){return e.createTimelineJob(t,a)}),a.placeholder,s.a.createElement("div",{style:{width:"1rem",opacity:"0",display:"inline-block",height:"2rem",flex:"0 0 auto"}}));var l})),s.a.createElement("div",{className:"job-templates"},s.a.createElement("header",null,s.a.createElement("button",{className:"tab-button "+("project-templates"===this.state.tab?"selected":""),onClick:function(){e.changeMode("project-templates")}},"project templates"),s.a.createElement("button",{className:"tab-button "+("job-templates"===this.state.tab?"selected":""),onClick:function(){e.changeMode("job-templates")}},"job templates")),s.a.createElement("div",{className:"tab-panel"},s.a.createElement("div",{className:"project-templates"===this.state.tab?"show":""},"project-templates"===this.state.tab&&s.a.createElement(pe.c,{className:"droppable-column",droppableId:"template_jobs",type:"TEMPLATE",isDropDisabled:!0},function(t,a){return s.a.createElement("div",{ref:t.innerRef,style:la(a.isDraggingOver)},n.map(function(t,a){return e.createProject(t,a)}))})),s.a.createElement("div",{className:"job-templates"===this.state.tab?"show":""},"job-templates"===this.state.tab&&s.a.createElement(pe.c,{className:"droppable-column",droppableId:"template_jobs",type:"TEMPLATE",direction:"horizontal",isDropDisabled:!0},function(t,n){return s.a.createElement("div",{ref:t.innerRef,style:la(n.isDraggingOver)},a.map(function(t,a){return e.createJob(t,a)}))})))))}}]),t}(s.a.Component),oa=Object(o.b)(function(e){return{selected_lead:e.state.selected_lead,all_leads_data:e.state.all_leads_data,all_jobs_data:e.state.all_jobs_data,all_project_templates_data:e.state.all_project_templates_data,all_job_templates_data:e.state.all_job_templates_data}},function(e){return Object(c.b)({updateProjectTemplatesData:q,updateJobTemplatesData:W,editLead:P,openJobEditor:Y},e)})(ra),ca=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.selectLead(null),setTimeout(function(){a.setState({selected_lead_data:{jobs:[]}})},500)},a.handleChange=function(e){a.setState({selected_lead_data:Object(p.a)({},a.state.selected_lead_data,Object(d.a)({},e.target.name,e.target.value))})},a.handleDescriptionChange=function(e){a.setState({task_data:Object(p.a)({},a.state.task_data,{description:e})})},a.handleSaveChanges=function(e){if("NEWLEAD"===a.props.selected_lead){var t=Math.random(),n=Object(p.a)({},a.state.selected_lead_data,{id:t,new_date:new Date,status:"new"});a.props.updateLeadsData(Object(d.a)({},t,n))}else a.props.updateLeadsData(Object(d.a)({},a.props.selected_lead,Object(p.a)({},a.state.selected_lead_data,{jobs:a.props.all_leads_data[a.props.selected_lead].jobs})));setTimeout(function(){a.setState({selected_lead_data:{jobs:[]}})},500)},a.state={selected_lead_data:a.props.all_leads_data[a.props.selected_lead]||{jobs:[]}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.selected_lead&&this.props.selected_lead!==e.selected_lead&&this.setState({selected_lead_data:this.props.all_leads_data[this.props.selected_lead]||{jobs:[]}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"lead-estimator form"+(this.props.selected_lead&&this.props.all_leads_data?" show":"")},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("i",{className:"fas fa-phone"}),s.a.createElement("span",null,(this.state.selected_lead_data.first_name||"")+" "+(this.state.selected_lead_data.last_name||""))),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.props.openLeadEditor(e.props.selected_lead)},className:"icon-button"},s.a.createElement("i",{className:"fas fa-edit"})),s.a.createElement("button",{onClick:function(){e.handleSaveChanges(),e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-check"}),s.a.createElement("span",null,"save")),s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,"cancel")))),s.a.createElement("main",null,s.a.createElement(oa,{selected_lead_data:this.state.selected_lead_data})),s.a.createElement(Gt,null),s.a.createElement(ta,null)))}}]),t}(s.a.Component),ia=Object(o.b)(function(e){return{selected_lead:e.state.selected_lead,all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({selectLead:S,updateLeadsData:T,openLeadEditor:$},e)})(ca),da=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={loaded:!1},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.temp_load_data=setTimeout(function(){Object.keys(e.props.all_leads_data).length||e.props.updateLeadsData(Fe),e.setState({loaded:!0})},1e3)}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_load_data)}},{key:"render",value:function(){return s.a.createElement("section",{id:"page-leads",className:this.state.loaded?"loaded":"loading"},s.a.createElement("div",{className:"load-background"}),s.a.createElement("div",{className:"card f-nogrow"},s.a.createElement(Rt,null)),s.a.createElement("div",{className:"card d1 f-grow kanban-card"},s.a.createElement(Ut,null)),s.a.createElement(ia,null))}}]),t}(s.a.Component),pa=Object(o.b)(function(e){return{all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({updateLeadsData:T},e)})(da),ua=vt[window.loc].MonthNames,ma=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={loaded:!1,selected_job:"none"},a.selectJob=function(e,t){return function(n){n.stopPropagation(),a.props.selectJob(a.props.id,e,t),a.props.closeJobCreator()}},a.handleCloseButton=function(e){a.props.selectJob(null,null)},a.handleInvoiceButton=function(e){e.preventDefault(),e.stopPropagation();var t=a.props.all_projects_data[a.props.project_data.id].invoice_id||"NEWINVOICE";console.log(a.props.all_projects_data[a.props.project_data.id]),a.props.openInvoiceEditor({invoice_id:t,project_id:a.props.project_data.id})},a.handleEditButton=function(e){e.preventDefault(),e.stopPropagation(),a.props.openProjectEditor(a.props.project_data.id)},a.handleSummaryButton=function(e){e.preventDefault(),e.stopPropagation(),a.props.openProjectSummary(a.props.project_data.id)},a.handlePhotoButton=function(e){e.preventDefault(),e.stopPropagation(),a.props.openPhotoGallery(a.props.project_data.id)},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"getJobData",value:function(){var e,t={};this.props.project_data.jobs.map(function(a,n){e=a;var s=Object(p.a)({},Ae[a]);return t[s.id]=s,!0}),this.props.all_jobs_data[e]||this.props.updateJobsData(t),this.props.all_users_data[this.props.project_data.customer_id]||this.props.updateUsersData(Object(d.a)({},this.props.project_data.customer_id,Le[this.props.project_data.customer_id])),this.props.project_data.jobs.length||this.props.openJobCreator(this.props.project_data.id)}},{key:"componentDidMount",value:function(){this.getJobData()}},{key:"componentDidUpdate",value:function(e){this.props.project_data.id!==e.project_data.id&&this.getJobData()}},{key:"handleAddButton",value:function(){this.props.openJobCreator(this.props.project_data.id)}},{key:"render",value:function(){var e=this,t={Unscheduled:[]},a=[],n=new Date;if(this.props.all_jobs_data&&this.props.project_data.jobs){this.props.project_data.jobs.map(function(a,n){var s=Object(p.a)({},e.props.all_jobs_data[a]);return!s.id||(s.start_dates.length?(s.start_dates.map(function(e,a){var n=e.getMonth();return t[n]||(t[n]=[]),t[n].push(Object(p.a)({},s,{start_date:e,end_date:s.end_dates[a],index:a})),!0}),!0):(t.Unscheduled.push(s),!0))});var l=Object.keys(t),r=!1;l.sort(function(e,a){return(t[e][0]?t[e][0].start_date:0)-(t[a][0]?t[a][0].start_date:0)});for(var o=0;o<l.length;o++){var c=t[l[o]];c.sort(function(e,t){return e.start_date-t.start_date});for(var i=0;i<c.length;i++){var d=c[i],u="";!r&&d.start_date&&d.start_date>=new Date(n.getFullYear(),n.getMonth(),n.getDate())&&(r=!0,u=" after-today"),d.id||console.log("no id",d),a.push(s.a.createElement("li",{key:d.id+(d.index||""),"data-id":d.id,className:(100===d.progress?"complete":d.progress>0?"progress":"")+" "+l[o]+(d.start_date&&d.start_date.toDateString()===(new Date).toDateString()?" today":"")+u+(i===c.length-1?" last-of-month":"")+(d.id===this.props.selected_job?" selected":" not-selected")+(d.id===this.props.selected_job&&d.index===this.props.selected_job_index?" indicated":"")+(i<c.length-1&&c[i+1].id===this.props.selected_job?" job-before-selected":""),onClick:this.selectJob(d.id,d.index)},0===i?s.a.createElement("h3",null,ua[l[o]]||l[o]):[],s.a.createElement("span",{className:"h-line"}),s.a.createElement("span",{className:"selected-arrow"}),s.a.createElement("span",{className:"date"},d.start_date?d.start_date.getDate():""),s.a.createElement("div",{className:"job-box"},s.a.createElement("h4",null,s.a.createElement("i",{className:d.icon}),s.a.createElement("span",{className:"job-name"},d.name))),s.a.createElement("span",{className:"status"},s.a.createElement("span",{className:"progress-bar",style:{transform:"scaleX("+(d.progress||0)/100+")"}}),s.a.createElement("span",{className:"status-text"},100===d.progress?s.a.createElement("i",{className:"fas fa-check"}):d.progress?d.progress+"%":""))))}}}return s.a.createElement("article",{className:"project"+(this.props.last_selected?" last_selected":"")},s.a.createElement("header",null,s.a.createElement("h2",null,this.props.project_data.name),s.a.createElement("div",{className:"button-menu"},s.a.createElement("button",{title:"create invoice",onClick:this.handleInvoiceButton,className:"icon-button"},s.a.createElement("i",{className:"fas fa-file-invoice-dollar"})),s.a.createElement("button",{title:"edit details",onClick:this.handleEditButton,className:"icon-button"},s.a.createElement("i",{className:"fas fa-edit"})),s.a.createElement("button",{title:"photo gallery",onClick:this.handlePhotoButton,className:"icon-button"},s.a.createElement("i",{className:"fas fa-images"})),s.a.createElement("button",{title:"project summary",onClick:this.handleSummaryButton,className:"icon-button"},s.a.createElement("i",{className:"fas fa-info"})),this.props.selected_project===this.props.project_data.id&&s.a.createElement("button",{title:"close",onClick:this.handleCloseButton,className:"icon-button"},s.a.createElement("i",{className:"fas fa-times"})))),s.a.createElement("div",{className:"header-color",style:{backgroundColor:this.props.project_data.color||"black"}}),s.a.createElement("div",{className:"timeline"},a,s.a.createElement("div",{className:"add-job-button"},s.a.createElement("button",{onClick:function(){e.handleAddButton()},className:"icon-button"},s.a.createElement("i",{className:"fas fa-plus"})))))}}]),t}(s.a.Component),_a=Object(o.b)(function(e){return{all_projects_data:e.state.all_projects_data,all_users_data:e.state.all_users_data,all_jobs_data:e.state.all_jobs_data,selected_job:e.state.selected_job,selected_job_index:e.state.selected_job_index,selected_project:e.state.selected_project}},function(e){return Object(c.b)({selectJob:G,updateJobsData:H,updateUsersData:w,editJob:K,openJobCreator:ee,closeJobCreator:te,openProjectEditor:B,openProjectSummary:R,openPhotoGallery:A,openInvoiceEditor:J},e)})(ma),ha=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).selectProject=function(e){return function(t){a.props.selectJob(e,null)}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=[];if(this.props.all_projects_data){var t=0;for(var a in this.props.all_projects_data)e.push(s.a.createElement("div",{key:"project-"+this.props.all_projects_data[a].id,className:"card"+(t<5?" d"+(t+1):" d5"),onClick:this.selectProject(this.props.all_projects_data[a].id)},s.a.createElement(_a,{id:this.props.all_projects_data[a].id,project_data:this.props.all_projects_data[a]}))),t++}return s.a.createElement("div",null,e)}}]),t}(s.a.Component),ba=Object(o.b)(function(e){return{all_projects_data:e.state.all_projects_data}},function(e){return Object(c.b)({selectJob:G},e)})(ha),fa=vt[window.loc].DeleteAllTasksWarning,ja=vt[window.loc].MarkAllTasksCompleteWarning,Ea=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={loaded:!1,add_task_text:"",temp_edit_text:"",currently_editing:0,all_complete:!1,selected_job:null},a.handleTaskClick=function(e){return function(t){if(a.state.currently_editing!==e){var n=Object(p.a)({},a.props.all_tasks_data[e]);n.completed=!n.completed,a.props.editTask(e,Object(p.a)({},n));for(var s=a.props.all_jobs_data[a.state.selected_job].tasks,l={},r=0;r<s.length;r++){var o=a.props.all_tasks_data[s[r]];o.id===e&&(o.completed=n.completed),l[o.id]=o}a.updateJob(l)}}},a.handleCompleteAll=function(){var e=a.props.all_jobs_data[a.state.selected_job].tasks;window.openModal(s.a.createElement(Xt,{message:s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("span",null,ja.message_1),s.a.createElement("strong",null,a.props.all_jobs_data[a.state.selected_job].name),s.a.createElement("span",null,ja.message_2)),s.a.createElement("p",null,ja.message_3)),cancel:ja.cancel,confirm:ja.confirm,handleConfirm:function(){for(var t={},n=0;n<e.length;n++){var s=a.props.all_tasks_data[e[n]];s.completed=!0,t[s.id]=s}a.props.updateTasksData(t),a.updateJob(t)},handleCancel:function(){}}))},a.handleIncompleteAll=function(){for(var e={},t=a.props.all_jobs_data[a.state.selected_job].tasks,n=0;n<t.length;n++){var s=a.props.all_tasks_data[t[n]];s.completed=!1,e[s.id]=s}a.props.updateTasksData(e),a.updateJob(e)},a.handleDeleteAll=function(){var e=a.props.all_jobs_data[a.state.selected_job].tasks;window.openModal(s.a.createElement(Xt,{message:s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("span",null,fa.message_1),s.a.createElement("strong",null,a.props.all_jobs_data[a.state.selected_job].name),s.a.createElement("span",null,fa.message_2)),s.a.createElement("p",null,fa.message_3),s.a.createElement("p",null,fa.message_4)),cancel:fa.cancel,confirm:fa.confirm,handleConfirm:function(){var t=Object(i.a)(e);a.props.deleteTasks(t)},handleCancel:function(){}}))},a.handleDelete=function(e){return function(t){t.preventDefault(),t.stopPropagation(),a.props.deleteTasks([e])}},a.handleAddKeyPress=function(e){"Enter"===e.key&&a.handleAddTask()},a.handleAddChange=function(e){a.setState({add_task_text:e.currentTarget.value})},a.handleAddTask=function(e){if(a.state.add_task_text){var t="task_"+Math.random(),n={id:t,name:a.state.add_task_text,completed:!1};a.props.addTask(t,n,a.state.selected_job),a.setState({add_task_text:""})}},a.handleEdit=function(e,t){return function(t){t.preventDefault(),t.stopPropagation(),a.props.selectTask(e)}},a.handleEditKeyPress=function(e){"Enter"===e.key&&a.handleConfirmEdit(e)},a.handleEditChange=function(e){a.setState({temp_edit_text:e.currentTarget.value})},a.handleCancelEdit=function(){return function(e){e.preventDefault(),e.stopPropagation(),a.setState({currently_editing:null})}},a.handleConfirmEdit=function(){return function(e){e.preventDefault(),e.stopPropagation();var t=a.state.currently_editing;a.props.editTask(t,{name:a.state.temp_edit_text}),a.setState({currently_editing:null})}},a.handleTaskDragStart=function(e){a.dragged_id=e.target.dataset.id,a.dragged_index=e.target.dataset.index},a.handleTaskDragEnd=function(e){window.setStyle(""),a.drop_id&&a.handleTaskDrop(e)},a.handleTaskDragOver=function(e){e.preventDefault(),e.currentTarget.dataset.id!==a.drop_id&&(parseInt(e.currentTarget.dataset.index,10)>=parseInt(a.dragged_index,10)?window.setStyle('\n          [data-id="'+e.currentTarget.dataset.id+'"]:after {\n            bottom: 0 !important;\n            opacity: 1 !important;\n          }\n        '):window.setStyle('\n          [data-id="'+e.currentTarget.dataset.id+'"]:after {\n            top: 0 !important;\n            opacity: 1 !important;\n          }\n        '),a.drop_id=e.currentTarget.dataset.id,a.drop_index=e.currentTarget.dataset.index)},a.handleTaskDragLeave=function(e){e.preventDefault()},a.handleTaskDrop=function(e){e.preventDefault();var t=Object(i.a)(a.props.all_jobs_data[a.state.selected_job].tasks),n=a.dragged_index,s=a.drop_index;a.drop_id=null,window.setStyle(""),Ct(t,parseInt(n,10),parseInt(s,10)),a.props.editJob(a.state.selected_job,{tasks:t})},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"callAPI",value:function(){var e=this;this.temp_api_call=setTimeout(function(){var t={};for(var a in Ie)for(var n=0;n<e.props.all_jobs_data[e.props.selected_job].tasks.length;n++)e.props.all_jobs_data[e.props.selected_job].tasks[n]===Ie[a].id&&(e.props.all_tasks_data[Ie[a].id]||(t[Ie[a].id]=Object(p.a)({},Ie[a])));e.props.updateTasksData(t),e.setState({loaded:!0,selected_job:e.props.selected_job})},50)}},{key:"componentDidMount",value:function(){this.props.all_jobs_data[this.props.selected_job]&&this.callAPI()}},{key:"componentDidUpdate",value:function(e){this.props.selected_job&&this.props.selected_job!==e.selected_job&&(this.callAPI(),this.setState({loaded:!1}))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_api_call)}},{key:"checkIfAllComplete",value:function(e){for(var t=!0,a=0;a<e.length;a++){if(!this.props.all_tasks_data[e[a]].completed){t=!1;break}}return t&&!!e.length}},{key:"updateJob",value:function(e){var t,a=0,n=0;for(var s in e)e[s].completed&&a++,n++;t=Math.round(a/n*100)||0,console.log(t),this.props.editJob(this.props.selected_job,{progress:t})}},{key:"changeMode",value:function(e){this.setState({mode:e})}},{key:"getMenu",value:function(){var e=this,t=this.state.selected_job&&this.state.loaded?this.props.all_jobs_data[this.state.selected_job].tasks:[];return s.a.createElement("div",{className:"menu"},s.a.createElement("div",null,s.a.createElement("div",{className:"button-group"},s.a.createElement("input",{type:"text",placeholder:"task name",value:this.state.add_task_text,onChange:this.handleAddChange,onKeyPress:this.handleAddKeyPress}),s.a.createElement("button",{onClick:function(t){e.handleAddTask(t)}},s.a.createElement("i",{className:"fas fa-plus"}),s.a.createElement("span",null,"add task")))),s.a.createElement("div",null,this.checkIfAllComplete(t)&&t.length?s.a.createElement("button",{onClick:function(t){e.handleIncompleteAll(t)}},s.a.createElement("i",{className:"far fa-circle"}),s.a.createElement("span",null,"mark all as incomplete")):s.a.createElement("button",{onClick:function(t){e.handleCompleteAll(t)},disabled:!t.length},s.a.createElement("i",{className:"fas fa-check-circle"}),s.a.createElement("span",null,"mark all as complete")),s.a.createElement("button",{onClick:function(t){e.handleDeleteAll()},disabled:!t.length},s.a.createElement("i",{className:"fas fa-trash"}),s.a.createElement("span",null,"delete all"))))}},{key:"render",value:function(){var e=[];if(this.state.selected_job){var t=this.props.all_jobs_data[this.state.selected_job].tasks;if(t&&this.state.loaded)for(var a=Object(i.a)(t),n=0;n<a.length;n++){var l=this.props.all_tasks_data[a[n]];l&&e.push(s.a.createElement("li",{key:this.state.selected_job+"_"+l.id,className:"task"+(l.completed?" completed":"")+(l.id===this.state.currently_editing?" currently-editing":"")+(this.state.drop_id===l.id?" drop-"+this.state.drop_location:""),"data-id":l.id,"data-index":n,onClick:this.handleTaskClick(l.id),draggable:!0,onDrag:this.handleTaskDragStart,onDragEnd:this.handleTaskDragEnd,onDragOver:this.handleTaskDragOver,onDragLeave:this.handleTaskDragLeave,onDrop:this.handleTaskDrop},s.a.createElement("h3",null,s.a.createElement("span",{className:"icon-holder"},s.a.createElement("i",{className:"fas fa-check-circle check"}),s.a.createElement("i",{className:"far fa-circle"})),this.state.currently_editing===l.id?s.a.createElement("input",{className:"",defaultValue:l.name,onChange:this.handleEditChange,onKeyPress:this.handleEditKeyPress}):s.a.createElement("span",{className:"task-name"},l.name)),l.start_date&&s.a.createElement("span",{className:"date"},s.a.createElement("span",{className:"date-value"},l.start_date.toLocaleDateString()),s.a.createElement("span",{className:"time-value"},l.start_date.toLocaleTimeString()+(l.end_date?" - "+l.end_date.toLocaleTimeString():""))),s.a.createElement("div",null,this.state.currently_editing===l.id?s.a.createElement("div",null,s.a.createElement("button",{className:"icon-button",onClick:this.handleConfirmEdit(l.id),title:"Apply"},s.a.createElement("i",{className:"fas fa-check"})),s.a.createElement("button",{className:"icon-button",onClick:this.handleCancelEdit(l.id),title:"Cancel"},s.a.createElement("i",{className:"fas fa-times"}))):s.a.createElement("div",null,s.a.createElement("button",{className:"icon-button",onClick:this.handleEdit(l.id,l.name),title:"Edit Task"},s.a.createElement("i",{className:"fas fa-edit"})),s.a.createElement("button",{className:"icon-button",onClick:this.handleDelete(l.id),title:"Delete Task"},s.a.createElement("i",{className:"fas fa-trash"}))))))}}return s.a.createElement("div",{className:"job-tasks"+(this.state.loaded?"":" loading")},this.getMenu(),s.a.createElement("div",{className:"task-list"},s.a.createElement("div",{className:"load-background"}),s.a.createElement("ul",null,e)))}}]),t}(s.a.Component),ga=Object(o.b)(function(e){return{all_tasks_data:e.state.all_tasks_data,all_jobs_data:e.state.all_jobs_data}},function(e){return Object(c.b)({updateTasksData:Z,editJob:K,completeTask:se,deleteTasks:ne,editTask:ae,addTask:Q,selectTask:le},e)})(Ea),va=["fas fa-toolbox","fas fa-paint-roller","fas fa-wrench","fas fa-screwdriver","fas fa-hammer","fas fa-tint","fas fa-bolt","fas fa-clipboard-list","fas fa-tape","fas fa-file-signature","fas fa-dollar-sign"],ya=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.selectTask(null)},a.handleChange=function(e){a.setState({task_data:Object(p.a)({},a.state.task_data,Object(d.a)({},e.target.name,e.target.value))})},a.handleDescriptionChange=function(e){a.setState({task_data:Object(p.a)({},a.state.task_data,{description:e})})},a.handleScheduleCheckChange=function(e){console.log(),e.target.checked?a.setState({enable_schedule:!0,task_data:Object(p.a)({},a.state.task_data,{start_date:a.props.all_jobs_data[a.state.task_data.job_id].start_dates[a.props.selected_job_index],end_date:a.props.all_jobs_data[a.state.task_data.job_id].end_dates[a.props.selected_job_index]})}):a.setState({enable_schedule:!1,task_data:Object(p.a)({},a.state.task_data,{start_date:null,end_date:null})})},a.handleIconChange=function(e){a.setState({icon:e.target.value}),setTimeout(function(){a.setState({icon:va[0],task_data:{}})},500)},a.handleSaveChanges=function(e){if("NEWTASK"===a.props.selected_task){var t=Math.random(),n=Object(p.a)({},a.state.task_data,{id:t,icon:a.state.icon,completed:!1});a.props.addTask(t,n,a.props.selected_job,null)}else a.props.updateTasksData(Object(d.a)({},a.props.selected_task,a.state.task_data));setTimeout(function(){a.setState({icon:va[0],task_data:{}})},500)},a.handleChangeStartTime=function(e){a.setState({task_data:Object(p.a)({},a.state.task_data,{start_date:e})})},a.handleChangeEndTime=function(e){a.setState({task_data:Object(p.a)({},a.state.task_data,{end_date:e})})},a.handleChangeDate=function(e){var t=new Date(a.state.task_data.start_date.setFullYear(e.getFullYear(),e.getMonth(),e.getDate())),n=new Date(a.state.task_data.end_date.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()));a.setState({task_data:Object(p.a)({},a.state.task_data,{start_date:t,end_date:n})})},a.state={icon:va[0],task_data:a.props.all_tasks_data[a.props.selected_task]||{id:Math.random()}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.selected_task&&this.props.selected_task!==e.selected_task&&this.setState({task_data:this.props.all_tasks_data[this.props.selected_task]||{id:Math.random()}})}},{key:"render",value:function(){for(var e=this,t=[],a=0;a<va.length;a++)t.push(s.a.createElement("div",{key:"icon "+a,className:"radio"},s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:va[a],checked:this.state.icon===va[a],onChange:this.handleIconChange}),s.a.createElement("i",{className:va[a]}))));return s.a.createElement("div",{className:"task-editor form"+(this.props.selected_task&&this.props.all_tasks_data?" show":"")},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,!this.props.selected_job&&s.a.createElement("i",{className:"fas fa-phone"}),s.a.createElement("span",null,(this.state.task_data.first_name||"")+" "+(this.state.task_data.last_name||""))),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.handleSaveChanges(),e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-check"}),s.a.createElement("span",null,"save")),s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,"cancel")))),s.a.createElement("main",null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"name"),s.a.createElement("input",{name:"name",type:"text",placeholder:"task name",value:this.state.task_data.name||"",onChange:this.handleChange}))),!this.props.selected_job&&s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"icon"),s.a.createElement("div",{className:"icon-picker"},t))),!this.props.selected_job&&s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"address"),s.a.createElement("textarea",{name:"address",placeholder:"address",value:this.state.task_data.address||"",onChange:this.handleChange}))),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",checked:!!this.state.task_data.start_date,onChange:this.handleScheduleCheckChange}),s.a.createElement("span",null,"Schedule separately from parent job"))),this.state.task_data.start_date&&this.state.task_data.end_date&&s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"on"),s.a.createElement(bt.b,{selected:this.state.task_data.start_date,onChange:this.handleChangeDate,inline:!0})),s.a.createElement("div",null,s.a.createElement("label",null,"from"),s.a.createElement(bt.b,{selected:new Date(this.state.task_data.start_date),className:"",inline:!0,onChange:this.handleChangeStartTime,showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,minTime:new Date(new Date(this.state.task_data.start_date).setHours(0,0)),maxTime:new Date(this.state.task_data.end_date),dateFormat:"h:mm aa",timeCaption:"start time"})),s.a.createElement("div",null,s.a.createElement("label",null,"to"),s.a.createElement(bt.b,{selected:new Date(this.state.task_data.end_date),className:"",inline:!0,onChange:this.handleChangeEndTime,showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,minTime:new Date(this.state.task_data.start_date),maxTime:new Date(new Date(this.state.task_data.end_date).setHours(23,55)),dateFormat:"h:mm aa",timeCaption:"end time"}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"notes"),s.a.createElement(Wt,{defaultValue:this.props.all_tasks_data[this.props.selected_task]&&this.props.all_tasks_data[this.props.selected_task].description||"",onChange:this.handleDescriptionChange,refresh:this.props.selected_task||this.state.task_data.id}))))))}}]),t}(s.a.Component),ka=Object(o.b)(function(e){return{selected_job:e.state.selected_job,selected_job_index:e.state.selected_job_index,selected_task:e.state.selected_task,all_jobs_data:e.state.all_jobs_data,all_tasks_data:e.state.all_tasks_data}},function(e){return Object(c.b)({selectTask:le,updateTasksData:Z,addTask:Q},e)})(ya),Oa=["fas fa-toolbox","fas fa-paint-roller","fas fa-wrench","fas fa-screwdriver","fas fa-hammer","fas fa-tint","fas fa-bolt","fas fa-clipboard-list","fas fa-tape","fas fa-file-signature","fas fa-dollar-sign"],Ca=function(e,t,a){return Object(p.a)({color:"black",background:"#c1c1c1",padding:"1rem",margin:"0 .5rem .5rem 0",borderRadius:"5px",width:"auto"},a)},Da=function(e,t,a){return Object(p.a)({color:"black",background:"#c1c1c1",padding:"1rem",margin:"0 .5rem .5rem 0",borderRadius:"5px",width:"auto"},a)},wa=function(e){return{background:e?"#e4e4e4":"transparent",display:"flex",padding:".5rem 0",width:"100%",minHeight:"5rem",flex:"1 1 auto",position:"relative",zIndex:"1",flexFlow:"row wrap"}},Na=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.closeJobCreator(),setTimeout(function(){a.setState({icon:Oa[0],jobOrTask:"job",job_data:{}})},500)},a.handleChange=function(e){a.setState({job_data:Object(p.a)({},a.state.job_data,Object(d.a)({},e.target.name,e.target.value))})},a.validate=function(){var e=!0;return a.state.job_data.name||(e=!1),e},a.addJob=function(e){return function(e){var t=_e();a.props.addJob(t,Object(p.a)({},a.state.job_data,{id:t,tasks:[],start_dates:[],end_dates:[],icon:a.state.icon,project_id:a.props.open_job_creator.project_id,project_name:a.props.all_projects_data[a.props.open_job_creator.project_id].name,project_color:a.props.all_projects_data[a.props.open_job_creator.project_id].color}),a.props.open_job_creator.project_id)}},a.handleTypeChange=function(e){a.setState({jobOrTask:e.target.value})},a.handleIconChange=function(e){a.setState({icon:e.target.value})},a.createJob=function(e,t){return s.a.createElement(pe.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({className:"job",ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Da(e,a.isDragging,t.draggableProps.style)}),s.a.createElement("i",{className:e.icon}),s.a.createElement("span",null,e.name))})},a.createProject=function(e,t){return s.a.createElement("div",{className:"drag-project",key:e.id},s.a.createElement(pe.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Ca(e,a.isDragging,t.draggableProps.style)}),s.a.createElement("div",null,e.name))}),a.props.all_job_templates_data&&s.a.createElement("div",{className:"jobs"},e.jobs.map(function(e,t){return s.a.createElement("div",{key:e},s.a.createElement("i",{className:a.props.all_job_templates_data[e].icon}),a.props.all_job_templates_data[e].name)})))},a.state={icon:Oa[0],jobOrTask:"job",job_data:{},tab:"project-templates"},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.all_job_templates_data||(this.props.updateProjectTemplatesData(ke),this.props.updateJobTemplatesData(ye))}},{key:"componentDidUpdate",value:function(e){this.props.open_job_creator&&(e.open_job_creator&&this.props.open_job_creator.job_id===e.open_job_creator.job_id||this.setState({job_data:this.props.all_jobs_data[this.props.open_job_creator.job_id]||{},icon:this.props.open_job_creator.job_id?this.props.all_jobs_data[this.props.open_job_creator.job_id].icon:Oa[0]}))}},{key:"changeMode",value:function(e){this.setState({tab:e})}},{key:"render",value:function(){for(var e=this,t=[],a=0;a<Oa.length;a++)t.push(s.a.createElement("div",{key:"icon "+a,className:"radio"},s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:Oa[a],checked:this.state.icon===Oa[a],onChange:this.handleIconChange}),s.a.createElement("i",{className:Oa[a]}))));var n=[],l=[];if(this.props.all_job_templates_data){for(var r in this.props.all_job_templates_data)n.push(this.props.all_job_templates_data[r]);n.sort(function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})}if(this.props.all_project_templates_data){for(var o in this.props.all_project_templates_data)l.push(this.props.all_project_templates_data[o]);l.sort(function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})}return s.a.createElement("div",{className:"job-creator form"+(this.props.open_job_creator&&this.props.open_job_creator&&this.props.all_tasks_data?" show":"")},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("span",null,"Add Jobs")),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:"icon-button"},s.a.createElement("i",{className:"fas fa-times"})))),s.a.createElement("main",null,s.a.createElement("div",null,l.length&&n.length&&s.a.createElement("div",{className:"job-templates"},s.a.createElement(pe.c,{className:"droppable-column",droppableId:"project-timeline-"+this.props.selected_project,type:"JOB",direction:"horizontal"},function(e,t){return s.a.createElement("div",{ref:e.innerRef,style:(a=t.isDraggingOver,{background:a?"rgba(250, 250, 250, 0.20)":"transparent",width:"100%",height:"8rem",bottom:"100%",left:0,position:"absolute",zIndex:"-1"})},e.placeholder);var a}),s.a.createElement("header",null,s.a.createElement("button",{className:"tab-button "+("project-templates"===this.state.tab?"selected":""),onClick:function(){e.changeMode("project-templates")}},"project templates"),s.a.createElement("button",{className:"tab-button "+("job-templates"===this.state.tab?"selected":""),onClick:function(){e.changeMode("job-templates")}},"job templates")),s.a.createElement("div",{className:"tab-panel"},s.a.createElement("div",{className:"project-templates"===this.state.tab?"show":""},"project-templates"===this.state.tab&&s.a.createElement(pe.c,{className:"droppable-column",droppableId:"template_projects_project",type:"JOB",isDropDisabled:!0},function(t,a){return s.a.createElement("div",{ref:t.innerRef,style:wa(a.isDraggingOver)},l.map(function(t,a){return e.createProject(t,a)}))})),s.a.createElement("div",{className:"job-templates"===this.state.tab?"show":""},"job-templates"===this.state.tab&&s.a.createElement(pe.c,{className:"droppable-column",droppableId:"template_jobs",type:"JOB",direction:"horizontal",isDropDisabled:!0},function(t,a){return s.a.createElement("div",{ref:t.innerRef,style:wa(a.isDraggingOver)},n.map(function(t,a){return e.createJob(t,a)}))}))))))))}}]),t}(s.a.Component),Ta=Object(o.b)(function(e){return{selected_task:e.state.selected_task,open_job_creator:e.state.open_job_creator,all_jobs_data:e.state.all_jobs_data,all_tasks_data:e.state.all_tasks_data,all_projects_data:e.state.all_projects_data,all_job_templates_data:e.state.all_job_templates_data,all_project_templates_data:e.state.all_project_templates_data}},function(e){return Object(c.b)({selectTask:le,addJob:z,editJob:K,addTask:Q,closeJobCreator:te,updateJobTemplatesData:W,updateProjectTemplatesData:q},e)})(Na),Sa=(a(189),function(e){function t(e){var a;Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.selectJobSchedule(null,null)},a.handleChangeStartTime=function(e){var t=Object(i.a)(a.props.all_jobs_data[a.props.selected_job].start_dates);t[a.props.selected_job_index]=e,a.props.editJob(a.props.selected_job,{start_dates:t}),a.props.assignJobToUser(a.props.all_jobs_data[a.props.selected_job].assigned_user,a.state.assigned_user,a.props.selected_job)},a.handleChangeEndTime=function(e){var t=Object(i.a)(a.props.all_jobs_data[a.props.selected_job].end_dates);t[a.props.selected_job_index]=e,a.props.editJob(a.props.selected_job,{end_dates:t}),a.props.assignJobToUser(a.props.all_jobs_data[a.props.selected_job].assigned_user,a.state.assigned_user,a.props.selected_job)},a.handleSaveChanges=function(e){if("NEWLEAD"===a.props.selected_job){var t=Math.random(),n=Object(p.a)({},a.state.selected_job_data,{id:t,new_date:new Date,status:"new"});a.props.updateLeadsData(Object(d.a)({},t,n))}else a.props.updateLeadsData(Object(d.a)({},a.props.selected_job,a.state.selected_job_data))};var n="",s="",l="";return a.props.selected_job&&a.props.all_jobs_data[a.props.selected_job].start_date?(a.default_start_time=a.props.all_jobs_data[a.props.selected_job].start_date,a.default_end_time=a.props.all_jobs_data[a.props.selected_job].end_date,n=a.props.all_jobs_data[a.props.selected_job].name,s=a.props.all_jobs_data[a.props.selected_job].icon,l=a.props.all_jobs_data[a.props.selected_job].assigned_user||a.props.selected_job_schedule.user_id):(a.default_start_time=new Date,a.default_end_time=new Date),a.state={start_date:a.default_start_time,end_date:a.default_end_time,name:n,assigned_user:l,icon:s},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e="",t="",a="";this.props.selected_job&&this.props.all_jobs_data[this.props.selected_job].start_date?(this.default_start_time=this.props.all_jobs_data[this.props.selected_job].start_date,this.default_end_time=this.props.all_jobs_data[this.props.selected_job].end_date,e=this.props.all_jobs_data[this.props.selected_job].name,t=this.props.all_jobs_data[this.props.selected_job].icon,a=this.props.all_jobs_data[this.props.selected_job].assigned_user||this.props.selected_job_schedule.user_id):(this.default_start_time=new Date,this.default_end_time=new Date),this.setState({start_date:this.default_start_time,end_date:this.default_end_time,name:e,assigned_user:a,icon:t})}},{key:"componentDidUpdate",value:function(e){this.props.selected_job&&(this.props.selected_job!==e.selected_job&&this.props.all_jobs_data[this.props.selected_job]||this.props.selected_job_schedule.user_id!==e.selected_job_schedule.user_id)&&(this.props.all_jobs_data[this.props.selected_job].start_date&&(this.default_start_time=this.props.all_jobs_data[this.props.selected_job].start_date,this.default_end_time=this.props.all_jobs_data[this.props.selected_job].end_date),this.setState({start_date:this.default_start_time,end_date:this.default_end_time,name:this.props.all_jobs_data[this.props.selected_job].name,assigned_user:this.props.all_jobs_data[this.props.selected_job].assigned_user||this.props.selected_job_schedule.user_id,icon:this.props.all_jobs_data[this.props.selected_job].icon}))}},{key:"render",value:function(){var e=this,t={};return this.props.all_users_data&&(t=this.props.all_users_data[this.state.assigned_user]||{}),s.a.createElement("div",{className:"job-time-picker form"+(this.props.selected_job&&this.props.all_jobs_data&&this.props.selected_job_schedule&&this.props.selected_job_schedule.user_id?" show":"")},this.props.selected_job&&this.props.all_jobs_data&&s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("i",{className:this.state.icon}),s.a.createElement("span",null,this.state.name)),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:"icon-button"},s.a.createElement("i",{className:"fas fa-check"})))),s.a.createElement("main",null,s.a.createElement("p",null,s.a.createElement("span",null,"assigned to: "),s.a.createElement("span",null,t.first_name+" "+t.last_name+" ")),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"from"),s.a.createElement(bt.b,{selected:new Date(this.state.start_date),className:"",inline:!0,onChange:this.handleChangeStartTime,showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,minTime:new Date(new Date(this.state.start_date).setHours(0,0)),maxTime:new Date(this.state.end_date),dateFormat:"h:mm aa",timeCaption:"start time"})),s.a.createElement("div",null,s.a.createElement("label",null,"to"),s.a.createElement(bt.b,{selected:new Date(this.state.end_date),className:"",inline:!0,onChange:this.handleChangeEndTime,showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,minTime:new Date(this.state.start_date),maxTime:new Date(new Date(this.state.end_date).setHours(23,55)),dateFormat:"h:mm aa",timeCaption:"end time"}))))))}}]),t}(s.a.Component)),Pa=Object(o.b)(function(e){return{selected_job_schedule:e.state.selected_job_schedule,selected_job:e.state.selected_job,selected_job_index:e.state.selected_job_index,all_jobs_data:e.state.all_jobs_data,all_users_data:e.state.all_users_data}},function(e){return Object(c.b)({selectJobSchedule:X,updateJobsData:H,editJob:K,assignJobToUser:D},e)})(Sa),Ma=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleDescriptionChange=function(e){a.setState({job_data:Object(p.a)({},a.state.job_data,{description:e})}),a.props.editJob(a.props.selected_job,Object(p.a)({},a.state.job_data,{description:e}))},a.handleEditButton=function(e){a.props.openJobCreator(a.props.selected_project,a.props.selected_job)},a.handleTrashButton=function(e){a.props.deleteJob(a.props.selected_job,a.props.selected_project)},a.updateJobProgress=function(e,t,a){},a.handleCloseButton=function(e){a.props.selectJob(a.props.selected_project)},a.state={loaded:!1,show_content:!0,detail_mode:"schedule",job_data:null},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"callAPI",value:function(e){var t=this;this.props.selected_job&&(this.temp_api_call=setTimeout(function(){t.setState({loaded:!0});var a=t.props.all_jobs_data[t.props.selected_job]||Ae[t.props.selected_job];e&&t.setState({detail_mode:a.start_dates[0]?"task":"schedule"}),t.state.show_content?t.setState({start_description:a.description,job_data:a}):t.setState({start_description:a.description,temp_job_data:a})},30))}},{key:"componentDidMount",value:function(){this.callAPI(!0)}},{key:"componentDidUpdate",value:function(e){(this.props.selected_job!==e.selected_job||!this.props.open_job_editor&&e.open_job_editor&&this.props.selected_job===e.open_job_editor.job_id)&&this.callAPI()}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_api_call),window.clearTimeout(this.show_content_animation)}},{key:"changeMode",value:function(e){this.setState({detail_mode:e,start_description:this.state.job_data.description})}},{key:"handleCheck",value:function(e){this.setState({job_data:Object(p.a)({},this.state.job_data,{progress:100})}),this.props.editJob(this.props.selected_job,Object(p.a)({},this.state.job_data,{progress:100}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"job-detail-panel"+(this.state.loaded&&this.state.show_content?" loaded":"")},this.props.selected_job?this.state.job_data&&s.a.createElement("div",null,s.a.createElement("div",{className:"job-details"},s.a.createElement("header",null,s.a.createElement("div",null,s.a.createElement("h2",null,this.state.job_data.icon?s.a.createElement("i",{className:this.state.job_data.icon}):[],this.state.job_data.name),s.a.createElement("button",{className:"tab-button "+("schedule"===this.state.detail_mode?"selected":""),onClick:function(){e.changeMode("schedule")}},"schedule job"),s.a.createElement("button",{className:"tab-button "+("task"===this.state.detail_mode?"selected":""),onClick:function(){e.changeMode("task")}},"manage tasks"),s.a.createElement("button",{className:"tab-button "+("note"===this.state.detail_mode?"selected":""),onClick:function(){e.changeMode("note")}},"take notes"),s.a.createElement("button",{disabled:!this.props.all_jobs_data[this.props.selected_job].start_dates[0],className:"icon-button check-button"+(100===this.props.all_jobs_data[this.props.selected_job].progress?" completed":""),onClick:function(){e.handleCheck()}},s.a.createElement("i",{className:"fas fa-check-circle check"}),s.a.createElement("i",{className:"far fa-circle"}))),s.a.createElement("div",null,s.a.createElement("button",{title:"remove",className:"icon-button ",onClick:this.handleTrashButton},s.a.createElement("i",{className:"fas fa-trash"})),s.a.createElement("button",{title:"edit",className:"icon-button ",onClick:this.handleEditButton},s.a.createElement("i",{className:"fas fa-edit"})),s.a.createElement("button",{title:"close",onClick:this.handleCloseButton,className:"icon-button"},s.a.createElement("i",{className:"fas fa-times"})))),s.a.createElement("div",{className:"tab-panel"},s.a.createElement("div",{className:"note"===this.state.detail_mode?"show":""},"note"===this.state.detail_mode&&s.a.createElement(Wt,{defaultValue:this.state.start_description||"",onChange:this.handleDescriptionChange,refresh:this.state.job_data.id})),s.a.createElement("div",{className:"task"===this.state.detail_mode?"show":""},"task"===this.state.detail_mode?s.a.createElement(ga,{selected_job:this.state.job_data.id,default_trade:this.state.job_data.default_trade}):[]),s.a.createElement("div",{className:"schedule"===this.state.detail_mode?"show":""},"schedule"===this.state.detail_mode&&s.a.createElement(St,{selected_job:this.state.job_data.id,selected_job_data:Object(p.a)({},this.state.job_data,{index:this.props.selected_job_index,start_date:this.state.job_data.start_dates[this.props.selected_job_index],end_date:this.state.job_data.end_dates[this.props.selected_job_index]}),default_trade:this.state.job_data.default_trade})))),s.a.createElement("span",{className:"no-task-selected load-screen"},s.a.createElement("h3",null,"loading..."))):s.a.createElement("div",{className:"no-task-selected"},s.a.createElement("i",{className:"fas fa-hand-point-up"}),s.a.createElement("h3",null,"select a job")),s.a.createElement(Ta,null),s.a.createElement(ka,null),s.a.createElement(Pa,null))}}]),t}(s.a.Component),xa=Object(o.b)(function(e){return{selected_project:e.state.selected_project,selected_job:e.state.selected_job,selected_job_index:e.state.selected_job_index,open_job_editor:e.state.open_job_editor,all_jobs_data:e.state.all_jobs_data}},function(e){return Object(c.b)({editJob:K,deleteJob:V,selectJob:G,openJobCreator:ee},e)})(Ma),Aa=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).state={loaded:!1,last_selected_project:a.props.selected_project},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.props.selected_project!==e.selected_project&&this.selectProject(this.props.selected_project,this.props.selected_job)}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.transition_finish),window.clearTimeout(this.transition)}},{key:"selectProject",value:function(e,t){var a=this;this.transition=setTimeout(function(){a.setState({transition_last_selected_project:!1})},50),this.transition_finish=setTimeout(function(){a.setState({last_selected_project:a.props.selected_project})},1500),this.setState({transition_last_selected_project:!0})}},{key:"render",value:function(){var e;return this.props.all_projects_data&&this.props.all_projects_data[this.props.selected_project]&&(e=this.props.all_projects_data[this.props.selected_project].color||"black"),s.a.createElement("div",{id:"project-details",className:this.props.selected_project&&this.props.all_projects_data?" show":""},!(this.props.all_projects_data&&this.props.all_projects_data[this.props.selected_project])&&s.a.createElement(ie.a,{to:"/projects"}),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"header-color",style:{backgroundColor:e}}),s.a.createElement("div",{className:"selected_project"+(this.state.transition_last_selected_project?" transition_last_selected":"")},this.state.last_selected_project&&s.a.createElement(_a,{id:this.state.last_selected_project,last_selected:!0,project_data:this.props.all_projects_data[this.state.last_selected_project]}),this.props.selected_project&&s.a.createElement(_a,{id:this.props.selected_project,project_data:this.props.all_projects_data[this.props.selected_project]})),s.a.createElement(xa,null)))}}]),t}(s.a.Component),Ia=Object(o.b)(function(e){return{selected_job:e.state.selected_job,selected_project:e.state.selected_project,all_projects_data:e.state.all_projects_data}},function(e){return Object(c.b)({selectJob:G},e)})(Aa),La=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.openInvoiceEditor(null)},a.handleChange=function(e){a.setState({invoice_data:Object(p.a)({},a.state.invoice_data,Object(d.a)({},e.target.name,e.target.value))})},a.handleDescriptionChange=function(e){a.setState({invoice_data:Object(p.a)({},a.state.invoice_data,{description:e})})},a.handleIconChange=function(e){a.setState({icon:e.target.value}),setTimeout(function(){a.setState({invoice_data:{}})},500)},a.handleSaveChanges=function(e){a.props.editInvoice(a.state.invoice_data.id,a.state.invoice_data),a.props.editProject(a.props.open_invoice_editor.project_id,{invoice_id:a.state.invoice_data.id}),console.log(a.props.open_invoice_editor.project_id),setTimeout(function(){a.setState({invoice_data:{}})},500)},a.handleItemProductChange=function(e,t){return function(n){var s=Object(i.a)(a.state.invoice_data.items);s[e]?s[e][t]=n.target.value:s.push(Object(d.a)({},t,n.target.value)),a.setState({invoice_data:Object(p.a)({},a.state.invoice_data,{items:s})})}},a.selectTerms=function(e){a.setState({invoice_data:Object(p.a)({},a.state.invoice_data,{terms:e.target.value})})},a.handleKeyPress=function(e,t){return function(a){if("Enter"===a.key){var n=document.getElementById("invoice"+(e+1)+t);console.log(n),n&&n.focus()}}},a.handleDelete=function(e){return function(t){var n=Object(i.a)(a.state.invoice_data.items);n.splice(e,1),a.setState({invoice_data:Object(p.a)({},a.state.invoice_data,{items:n})})}},a.input_refs={},a.state={invoice_data:{},project_data:{}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.open_invoice_editor&&this.props.open_invoice_editor!==e.open_invoice_editor&&this.setState({invoice_data:this.props.all_invoices_data[this.props.open_invoice_editor.invoice_id]||{id:"invoice"+Math.random(),terms:"receipt",project_id:this.props.open_invoice_editor.project_id,project_address:this.props.all_projects_data[this.props.open_invoice_editor.project_id].address,billing_address:this.props.all_users_data[this.props.all_projects_data[this.props.open_invoice_editor.project_id].customer_id].billing_address,items:[]},project_data:this.props.all_projects_data[this.props.open_invoice_editor.project_id]||{id:Math.random()}})}},{key:"render",value:function(){var e=this;if(this.props.all_projects_data){var t="no manager",a=this.state.project_data,n=this.props.all_users_data[this.state.project_data.customer_id]||{};this.props.open_invoice_editor&&this.props.open_invoice_editor.project_id&&this.props.all_users_data[a.project_manager]&&(t=this.props.all_users_data[a.project_manager].first_name+" "+this.props.all_users_data[a.project_manager].last_name);var l=[];for(var r in this.props.terms)l.push(s.a.createElement("option",{key:this.props.terms[r].id,value:this.props.terms[r].id},this.props.terms[r].name));var o=[],c=0;if(this.state.invoice_data.items)for(var i=0;i<this.state.invoice_data.items.length+1;i++){var d=this.state.invoice_data.items[i]||{},p=parseInt(d.quantity,10)*parseInt(d.rate,10);o.push(s.a.createElement("tr",{key:i,className:i<this.state.invoice_data.items.length?"":"new"},s.a.createElement("td",null,i<this.state.invoice_data.items.length&&s.a.createElement("button",{className:"icon-button",onClick:this.handleDelete(i),title:"Delete Task"},s.a.createElement("i",{className:"fas fa-trash"}))),s.a.createElement("td",null,i+1),s.a.createElement("td",null,s.a.createElement("input",{type:"text",onKeyPress:this.handleKeyPress(i,"product"),id:"invoice"+i+"product",value:d.product||"",onChange:this.handleItemProductChange(i,"product")})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",onKeyPress:this.handleKeyPress(i,"description"),id:"invoice"+i+"description",value:d.description||"",onChange:this.handleItemProductChange(i,"description")})),s.a.createElement("td",null,s.a.createElement("input",{onKeyPress:this.handleKeyPress(i,"quantity"),id:"invoice"+i+"quantity",type:"number",min:"1",value:d.quantity||"",onChange:this.handleItemProductChange(i,"quantity")})),s.a.createElement("td",null,s.a.createElement("input",{onKeyPress:this.handleKeyPress(i,"rate"),id:"invoice"+i+"rate",type:"number",min:"0",value:d.rate||"",onChange:this.handleItemProductChange(i,"rate")})),s.a.createElement("td",{className:"value"},i<this.state.invoice_data.items.length&&(p||"0")))),c+=p||0}return s.a.createElement("div",{className:"invoice-editor form"+(this.props.open_invoice_editor&&this.props.all_projects_data?" show":"")},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("span",null,a.name||"")),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.handleSaveChanges(),e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-check"}),s.a.createElement("span",null,"save")),s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,"cancel")))),s.a.createElement("main",null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"project manager"),s.a.createElement("p",null,t)),s.a.createElement("div",null,s.a.createElement("label",null,"invoice number"),s.a.createElement("p",null,this.state.invoice_data.invoice_number))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"project address"),s.a.createElement("textarea",{name:"project_address",placeholder:"project address",value:this.state.invoice_data.project_address||"",onChange:this.handleChange}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"bill to"),s.a.createElement("p",null,n.first_name+" "+n.last_name))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"billing address"),s.a.createElement("textarea",{name:"billing_address",placeholder:"billing address",value:this.state.invoice_data.billing_address||"",onChange:this.handleChange}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"terms"),s.a.createElement("div",{className:"select-container"},s.a.createElement("select",{value:this.state.invoice_data.terms,onChange:this.selectTerms},l),s.a.createElement("i",{className:"fas fa-caret-down"})))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"invoice date"),s.a.createElement(bt.b,{selected:this.state.invoice_data.invoice_date?new Date(this.state.invoice_data.invoice_date):new Date,className:"",onChange:this.handleChangeInvoieDate})),s.a.createElement("div",null,s.a.createElement("label",null,"invoice expiration date"),s.a.createElement(bt.b,{selected:this.state.invoice_data.invoice_date?new Date(this.state.invoice_data.expiration_date):new Date,className:"",onChange:this.handleChangeInvoieDate})),s.a.createElement("div",null,s.a.createElement("label",null,"payment due date"),s.a.createElement(bt.b,{selected:this.state.invoice_data.invoice_date?new Date(this.state.invoice_data.expiration_date):new Date,className:"",onChange:this.handleChangeInvoieDate}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",null,"#"),s.a.createElement("th",null,"product/service"),s.a.createElement("th",null,"description"),s.a.createElement("th",null,"quantity"),s.a.createElement("th",null,"rate"),s.a.createElement("th",null,"amount")),o)))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"message displayed on estimate"),s.a.createElement("textarea",{name:"message",placeholder:"message",value:this.state.invoice_data.message||"",onChange:this.handleChange})),s.a.createElement("div",{className:"f"},s.a.createElement("label",null,"total"),s.a.createElement("div",{className:"value"},c))))))}return[]}}]),t}(s.a.Component),Ja=Object(o.b)(function(e){return{selected_job:e.state.selected_job,open_invoice_editor:e.state.open_invoice_editor,all_invoices_data:e.state.all_invoices_data,all_projects_data:e.state.all_projects_data,terms:e.state.terms,all_users_data:e.state.all_users_data}},function(e){return Object(c.b)({openInvoiceEditor:J,editInvoice:U,editProject:F},e)})(La),Ua=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={project:null},a.handleCloseButton=function(e){a.props.openProjectSummary(null)},a.handlePrintButton=function(e){window.printDiv("print-project-notes")},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"callAPI",value:function(){var e={};this.props.all_users_data[this.props.all_projects_data[this.props.open_project_summary].customer_id]||(e[this.props.all_projects_data[this.props.open_project_summary].customer_id]=Object(p.a)({},Le[this.props.all_projects_data[this.props.open_project_summary].customer_id]));for(var t={},a=0;a<this.props.all_projects_data[this.props.open_project_summary].tasks.length;a++){var n=this.props.all_projects_data[this.props.open_project_summary].tasks[a];this.props.all_tasks_data[n]||(t[n]=Object(p.a)({},Ie[n]),Ie[n].assigned_user&&!this.props.all_users_data[Ie[n].assigned_user]&&(e[Ie[n].assigned_user]=Object(p.a)({},Le[Ie[n].assigned_user])))}for(var s=0;s<this.props.all_projects_data[this.props.open_project_summary].jobs.length;s++){var l=this.props.all_jobs_data[this.props.all_projects_data[this.props.open_project_summary].jobs[s]];for(this.props.all_jobs_data[l.id].assigned_user&&!this.props.all_users_data[this.props.all_jobs_data[l.id].assigned_user]&&(e[this.props.all_jobs_data[l.id].assigned_user]=Object(p.a)({},Le[this.props.all_jobs_data[l.id].assigned_user])),a=0;a<l.tasks.length;a++){var r=l.tasks[a];this.props.all_tasks_data[r]||(t[r]=Object(p.a)({},Ie[r]),Ie[r].assigned_user&&!this.props.all_users_data[Ie[r].assigned_user]&&(e[Ie[r].assigned_user]=Object(p.a)({},Le[Ie[r].assigned_user])))}}this.props.updateUsersData(e),this.props.updateTasksData(t)}},{key:"componentDidUpdate",value:function(e){this.props.open_project_summary&&this.props.all_projects_data&&this.props.open_project_summary!==e.open_project_summary&&(this.callAPI(),this.setState({project:this.props.all_projects_data[this.props.open_project_summary]}))}},{key:"render",value:function(){var e=this;if(this.props.all_projects_data&&this.state.project){var t=this.state.project,a=t.customer_id&&this.props.all_users_data[t.customer_id]||{},n=[],l=[];if(t.jobs&&t.tasks)for(var r=0;r<t.jobs.length;r++){var o=this.props.all_jobs_data[t.jobs[r]],c={icon:o.icon,name:o.name,assigned:o.assigned_user?this.props.all_users_data[o.assigned_user]:"",start_date:o.start_dates[0],end_date:o.end_dates[0],description:o.description};if(o.tasks.length){c.tasks=[];for(var i=0;i<o.tasks.length;i++){var d=this.props.all_tasks_data[o.tasks[i]],p=d.assigned_user?this.props.all_users_data[d.assigned_user]:"";c.tasks.push(s.a.createElement("li",{key:r+""+i+"task"},s.a.createElement("h5",null,d.name,s.a.createElement("span",{className:"user"},p&&p.first_name+" "+p.last_name)),d.description&&s.a.createElement("p",{key:r+""+i+"descripiton",dangerouslySetInnerHTML:{__html:d.description}})))}}n.push(c)}n.sort(function(e,t){var a=-e.start_date||-t.start_date-10,n=-t.start_date||-e.start_date-10;return a<n?1:a>n?-1:0});for(var u=0;u<n.length;u++){var m=n[u],_=[];_=m.start_date?s.a.createElement("span",{className:"date",key:"dates"+u},s.a.createElement("span",{className:"date-value"},m.start_date.toLocaleDateString()),s.a.createElement("span",{className:"time-value"},m.start_date.toLocaleTimeString()+(m.end_date?" - "+m.end_date.toLocaleTimeString():""))):m.deadline?s.a.createElement("span",{className:"date",key:"deadline"+u},"due by "+m.deadline.toLocaleDateString()):s.a.createElement("span",{className:"date tbd",key:"dates"+u},"to be scheduled");var h=void 0;m.description&&(h=s.a.createElement("p",{key:"description"+u,dangerouslySetInnerHTML:{__html:m.description}}));var b=s.a.createElement("span",{className:"user",key:"assigned"+u},"[",m.assigned?m.assigned.first_name+" "+m.assigned.last_name:s.a.createElement("span",{className:"tbd"},"to be assigned"),"]"),f=void 0;m.name&&(f=s.a.createElement("h3",{key:"name"+u},s.a.createElement("span",null,m.icon&&s.a.createElement("i",{className:m.icon}),m.name,b),_),l.push(s.a.createElement("li",{key:"job"+u},f,h,m.tasks&&s.a.createElement("div",null,s.a.createElement("h4",{key:"tasklabel"+u},"job tasks"),s.a.createElement("ul",{key:"tasks"+u},m.tasks)))))}var j=window.unescape(t.description);return s.a.createElement("div",{className:"project-notes form"+(this.props.open_project_summary&&this.props.all_projects_data?" show":"")},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.handlePrintButton()},className:""},s.a.createElement("i",{className:"fas fa-print"}),s.a.createElement("span",null,"print")),s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,"close")))),s.a.createElement("main",null,s.a.createElement("div",{id:"print-project-notes",className:"document"},s.a.createElement("h1",null,s.a.createElement("span",null,t.name||"")),s.a.createElement("h2",null,"customer"),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("h3",null,"name"),s.a.createElement("p",null,a.last_name?a.first_name+" "+a.last_name:"")),s.a.createElement("div",null,s.a.createElement("h3",null,"address"),s.a.createElement("p",null,t.address))),t.description?[s.a.createElement("h2",{key:"pnotes"},"project notes"),s.a.createElement("p",{key:"pdescription",dangerouslySetInnerHTML:{__html:j}})]:[],s.a.createElement("h2",null,"project timeline"),s.a.createElement("ul",null,l)))))}return[]}}]),t}(s.a.Component),Ba=Object(o.b)(function(e){return{open_project_summary:e.state.open_project_summary,all_jobs_data:e.state.all_jobs_data,all_tasks_data:e.state.all_tasks_data,all_users_data:e.state.all_users_data,all_projects_data:e.state.all_projects_data}},function(e){return Object(c.b)({openProjectSummary:R,updateUsersData:w,updateTasksData:Z},e)})(Ua),Ra=a(106),Fa=function(e){var t=e.selected;return s.a.createElement("div",{style:t?{left:"4px",top:"4px",position:"absolute",zIndex:"1"}:{display:"none"}},s.a.createElement("svg",{style:{fill:"white",position:"absolute"},width:"24px",height:"24px"},s.a.createElement("circle",{cx:"12.5",cy:"12.2",r:"8.292"})),s.a.createElement("svg",{style:{fill:"#06befa",position:"absolute"},width:"24px",height:"24px"},s.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})))},Ha={transition:"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s"},Wa={transform:"translateZ(0px) scale3d(0.9, 0.9, 1)",transition:"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s"},qa={backgroundColor:"#eee",cursor:"pointer",overflow:"hidden",position:"relative"},za=function(e){var t=e.index,a=e.onClick,n=e.photo,l=e.margin,r=e.direction,o=e.top,c=e.left,i=(100-30/n.width*100)/100,d=(100-30/n.height*100)/100;return Wa.transform="translateZ(0px) scale3d(".concat(i,", ").concat(d,", 1)"),"column"===r&&(qa.position="absolute",qa.left=c,qa.top=o),s.a.createElement("div",{style:Object(p.a)({margin:l,height:n.height,width:n.width},qa),className:n.selected?"":"not-selected"},s.a.createElement(Fa,{selected:!!n.selected}),s.a.createElement("img",Object.assign({alt:n.name,style:n.selected?Object(p.a)({},Ha,Wa):Object(p.a)({},Ha)},n,{onClick:function(e){return a(e,{index:t,photo:n})}})),s.a.createElement("style",null,".not-selected:hover{outline:2px solid #06befa}"))},Ya=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.openPhotoGallery(null)},a.handleZoomOutButton=function(e){a.state.columns<15&&a.state.photos&&a.state.columns<a.state.photos.length-1&&a.setState({columns:a.state.columns+1})},a.handleZoomInButton=function(e){a.state.columns>1&&a.setState({columns:a.state.columns-1})},a.selectPhoto=function(e,t){var n=a.state.photos,s=n[t.index];a.setState({photos:n,selected:a.props.all_photos_data[s.id],show_selected:a.state.selected&&a.state.selected.id===s.id&&a.state.show_selected?null:a.props.all_photos_data[s.id]})},a.toggleSelect=function(){var e=a.state.photos.map(function(e,t){return Object(p.a)({},e,{selected:!a.state.selectAll})});a.setState({photos:e,selectAll:!a.state.selectAll})},a.handleChange=function(e){a.setState({selected:Object(p.a)({},a.state.selected,Object(d.a)({},e.target.name,e.target.value))}),a.props.editPhoto(a.state.selected.id,Object(p.a)({},a.state.selected,Object(d.a)({},e.target.name,e.target.value)))},a.handleDescriptionChange=function(e){a.props.editPhoto(a.state.selected.id,Object(p.a)({},a.state.selected,{description:e}))},a.state={project_data:{},photos:[],columns:6},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"callAPI",value:function(){var e=this;this.temp_api_timeout=setTimeout(function(){var t=[],a={},n={};a=e.props.all_photos_data[e.props.all_projects_data[e.props.open_photos].photos[0]]?Object(p.a)({},e.props.all_photos_data):Object(p.a)({},xe);for(var s=0;s<e.props.all_projects_data[e.props.open_photos].photos.length;s++){var l=e.props.all_projects_data[e.props.open_photos].photos[s];t.push(a[l]),n[l]=a[l]}e.props.updatePhotosData(n),e.setState({photos:t})},500)}},{key:"componentDidUpdate",value:function(e){this.props.open_photos&&(this.props.open_photos!==e.open_photos&&this.props.all_projects_data[this.props.open_photos]&&(this.props.all_projects_data[this.props.open_photos].photos.length&&this.callAPI(),this.setState({project_data:this.props.all_projects_data[this.props.open_photos],photos_ids:this.props.all_projects_data[this.props.open_photos].photos})))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"photo-gallery form"+(this.props.open_photos&&this.props.all_projects_data?" show":"")},this.state.photos&&s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,this.state.project_data.name),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.toggleSelect()},className:"icon-button"},s.a.createElement("i",{className:"fas fa-check-double"})),s.a.createElement("button",{onClick:function(){e.handleZoomOutButton()},className:"icon-button"},s.a.createElement("i",{className:"fas fa-search-minus"})),s.a.createElement("button",{onClick:function(){e.handleZoomInButton()},className:"icon-button"},s.a.createElement("i",{className:"fas fa-search-plus"})),s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:"icon-button"},s.a.createElement("i",{className:"fas fa-times"})))),s.a.createElement("main",null,s.a.createElement("div",{className:"gallery-container"},s.a.createElement(Ra.a,{photos:this.state.photos,columns:this.state.columns,onClick:this.selectPhoto,ImageComponent:za})),s.a.createElement("div",{className:"selected-panel"+(this.state.show_selected?" show":"")},this.state.selected&&s.a.createElement("div",null,s.a.createElement("div",{className:"selected-photo"},s.a.createElement("img",Object.assign({alt:this.state.selected.name},this.state.selected))),s.a.createElement("div",{className:"photo-details"},s.a.createElement("label",null,"caption"),s.a.createElement("input",{name:"name",type:"text",placeholder:"photo caption",value:this.state.selected.name||"",onChange:this.handleChange}),s.a.createElement("label",null,"notes"),s.a.createElement(Wt,{defaultValue:this.state.selected.description||"",onChange:this.handleDescriptionChange,refresh:this.state.selected.id})))))))}}]),t}(s.a.Component),Ka=Object(o.b)(function(e){return{open_photos:e.state.open_photos,all_projects_data:e.state.all_projects_data,all_photos_data:e.state.all_photos_data}},function(e){return Object(c.b)({openPhotoGallery:A,updatePhotosData:I,editPhoto:L},e)})(Ya),Va=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).state={loaded:!1},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={},a=Object.keys(this.props.all_projects_data),n=this.props.location.pathname.split("/");if(a.length){for(var s in this.props.all_projects_data)at(this.props.all_projects_data[s].id),n[2];t=Object(p.a)({},this.props.all_projects_data),setTimeout(function(){e.setState({loaded:!0})},1)}else this.temp_load_data=setTimeout(function(){for(var a=0;a<Be.length;a++)t[Be[a].id]=Be[a],at(Be[a].id),n[2];e.props.updateProjectsData(t),setTimeout(function(){e.setState({loaded:!0})},1)},2e3);this.props.selectJobSchedule(null)}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_load_data)}},{key:"render",value:function(){return s.a.createElement("section",{id:"page-projects",className:"projects "+(this.state.loaded?"loaded":"loading")},s.a.createElement("div",{className:"load-background"}),s.a.createElement(b.a,{path:"/projects/:p",component:Ia}),s.a.createElement(b.a,{path:"/projects",component:ba}),s.a.createElement(Kt,null),s.a.createElement(Ba,null),s.a.createElement(Ka,null),s.a.createElement(Ja,null))}}]),t}(s.a.Component),Ga=Object(o.b)(function(e){return{selected_project:e.state.selected_project,all_projects_data:e.state.all_projects_data}},function(e){return Object(c.b)({updateProjectsData:M,selectJob:G,selectJobSchedule:X},e)})(Va),Xa=vt[window.loc].WeekDaysShort,Za=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).handleChangeSetting=function(e,t){a.props.updateCompanySettings(Object(p.a)({},a.props.company_settings,Object(d.a)({},e,t)))},a.onRoleChange=function(e){return function(t){var n=Object(i.a)(a.props.company_settings.weekend||[]);t.target.checked?n.splice(n.indexOf(e),1):n.push(e),a.handleChangeSetting("weekend",n)}},a.handleWorkHours=function(e){var t=parseInt(e.target.value,10);t>24?t=24:t<1&&(t=1),a.handleChangeSetting("daily_work_hours",t)},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){for(var e=[],t=0;t<Xa.length;t++){var a=Xa[t];e.push(s.a.createElement("label",{className:"checkbox-container",key:a},s.a.createElement("input",{type:"checkbox",onChange:this.onRoleChange(t),checked:!(this.props.company_settings.weekend.indexOf(t)+1)}),s.a.createElement("i",{className:"fas fa-check-square"}),s.a.createElement("i",{className:"far fa-square"}),s.a.createElement("span",null,a)))}return s.a.createElement("div",{className:"advanced-settings"},s.a.createElement("div",{className:"week-days"},s.a.createElement("h3",null,"work days"),e),s.a.createElement("div",{className:"daily-hours"},s.a.createElement("h3",null,"daily work hours"),s.a.createElement("input",{value:this.props.company_settings.daily_work_hours,onChange:this.handleWorkHours,type:"number",max:"24",min:"1"})))}}]),t}(s.a.Component),Qa=Object(o.b)(function(e){return{company_settings:e.state.company_settings}},function(e){return Object(c.b)({updateCompanySettings:oe},e)})(Za),$a=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={trade_filter:"all",trade_names:[],sort:"last_name"},a.selectSort=function(e){a.setState({sort:e.target.value})},a.selectTradeFilter=function(e){a.setState({trade_filter:e.target.value})},a.handleUserClick=function(e){return function(t){a.props.selectUser(e)}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"callAPI",value:function(){var e={};for(var t in Le)e[tt(Le[t].trade_name,",")]=!!tt(Le[t].trade_name,",");var a=Object.keys(e);a.sort(function(e,t){var a=e.toLowerCase(),n=t.toLowerCase();return a<n?-1:a>n?1:0}),this.setState({trades:e,trade_names:a,trade_filter:"all",loaded:!0}),this.props.updateUsersData(Le)}},{key:"componentDidMount",value:function(){this.props.all_users_data&&!this.props.all_users_data[0]&&this.callAPI()}},{key:"render",value:function(){for(var e=this,t=[],a=Ot(this.props.all_users_data),n=[],l=0;l<this.state.trade_names.length;l++)n.push(s.a.createElement("option",{key:this.state.trade_names[l],value:this.state.trade_names[l]},this.state.trade_names[l]));var r=this.state.sort,o=this.state.trade_filter;for(var c in a.sort(function(e,t){var a=e[r]?0===e.trade_name.indexOf(o)?"a":e[r].toLowerCase():"zzzzzz",n=t[r]?0===t.trade_name.indexOf(o)?"a":t[r].toLowerCase():"zzzzzz";return a<n?-1:a>n?1:0}),a){var i=a[c];if("Customer"!==i.trade_name&&!(i.trade_name.indexOf("Contractor")+1)&&("all"===this.state.trade_filter||i.trade_name.indexOf(this.state.trade_filter)+1)){for(var d=[],p=0;p<i.roles.length;p++)d.push(s.a.createElement("span",{key:this.props.roles[i.roles[p]].name},this.props.roles[i.roles[p]].name));t.push(s.a.createElement("li",{key:i.id,onClick:this.handleUserClick(i.id)},i.photo_uri?s.a.createElement("img",{src:i.photo_uri,alt:i.first_name+" "+i.last_name}):s.a.createElement("i",{className:"fas fa-user"}),s.a.createElement("div",{className:"info"},s.a.createElement("h3",null,i.first_name+" "+i.last_name),s.a.createElement("p",null,i.email)),s.a.createElement("div",{className:"roles"},d)))}}return s.a.createElement("div",{className:"user-list"},s.a.createElement("header",null,s.a.createElement("div",null,s.a.createElement("h2",null,"Users"),s.a.createElement("input",{id:"filter-selects",type:"checkbox"}),s.a.createElement("label",{className:"filter-selects-button",htmlFor:"filter-selects"},s.a.createElement("i",{className:"fas fa-sort-amount-up"})),s.a.createElement("div",{className:"filter-selects"},s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-sort-alpha-down"}),s.a.createElement("select",{onChange:this.selectSort},s.a.createElement("option",{value:"last_name"},"sort by last name"),s.a.createElement("option",{value:"first_name"},"sort by first name"),s.a.createElement("option",{value:"trade_name"},"sort by trade")),s.a.createElement("i",{className:"fas fa-caret-down"})),s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-filter"}),s.a.createElement("select",{value:this.state.trade_filter,onChange:this.selectTradeFilter},s.a.createElement("option",{value:"all"},"all"),n),s.a.createElement("i",{className:"fas fa-caret-down"})))),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.props.selectUser("NEWUSER")},className:""},s.a.createElement("i",{className:"fas fa-plus"}),s.a.createElement("span",null,"add a new user")))),s.a.createElement("ul",null,t))}}]),t}(s.a.Component),en=Object(o.b)(function(e){return{all_users_data:e.state.all_users_data,roles:e.state.roles}},function(e){return Object(c.b)({updateUsersData:w,selectUser:N},e)})($a),tn=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={trade_filter:"all",trade_names:[],sort:"last_name"},a.selectSort=function(e){a.setState({sort:e.target.value})},a.selectTradeFilter=function(e){a.setState({trade_filter:e.target.value})},a.handleUserClick=function(e){return function(t){a.props.selectUser(e)}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"callAPI",value:function(){var e={};for(var t in Le)e[tt(Le[t].trade_name,",")]=!!tt(Le[t].trade_name,",");var a=Object.keys(e);a.sort(function(e,t){var a=e.toLowerCase(),n=t.toLowerCase();return a<n?-1:a>n?1:0}),this.setState({trades:e,trade_names:a,trade_filter:"all",loaded:!0}),this.props.updateUsersData(Le)}},{key:"componentDidMount",value:function(){this.props.all_users_data&&!this.props.all_users_data[0]&&this.callAPI()}},{key:"render",value:function(){for(var e=this,t=[],a=Ot(this.props.all_users_data),n=[],l=0;l<this.state.trade_names.length;l++)n.push(s.a.createElement("option",{key:this.state.trade_names[l],value:this.state.trade_names[l]},this.state.trade_names[l]));var r=this.state.sort,o=this.state.trade_filter;for(var c in a.sort(function(e,t){var a=e[r]?0===e.trade_name.indexOf(o)?"a":e[r].toLowerCase():"zzzzzz",n=t[r]?0===t.trade_name.indexOf(o)?"a":t[r].toLowerCase():"zzzzzz";return a<n?-1:a>n?1:0}),a){var i=a[c];if(i.trade_name.indexOf("Contractor")+1&&("all"===this.state.trade_filter||i.trade_name.indexOf(this.state.trade_filter)+1)){var d=[];if(i.roles)for(var p=0;p<i.roles.length;p++)d.push(s.a.createElement("span",{key:this.props.roles[i.roles[p]].name},this.props.roles[i.roles[p]].name));t.push(s.a.createElement("li",{key:i.id,onClick:this.handleUserClick(i.id)},i.photo_uri?s.a.createElement("img",{src:i.photo_uri,alt:i.first_name+" "+i.last_name}):s.a.createElement("i",{className:"fas fa-user"}),s.a.createElement("div",{className:"info"},s.a.createElement("h3",null,i.first_name+" "+i.last_name),s.a.createElement("p",null,i.email)),s.a.createElement("div",{className:"roles"},d)))}}return s.a.createElement("div",{className:"user-list"},s.a.createElement("header",null,s.a.createElement("div",null,s.a.createElement("h2",null,"Contractors"),s.a.createElement("input",{id:"filter-selects",type:"checkbox"}),s.a.createElement("label",{className:"filter-selects-button",htmlFor:"filter-selects"},s.a.createElement("i",{className:"fas fa-sort-amount-up"})),s.a.createElement("div",{className:"filter-selects"},s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-sort-alpha-down"}),s.a.createElement("select",{onChange:this.selectSort},s.a.createElement("option",{value:"last_name"},"sort by last name"),s.a.createElement("option",{value:"first_name"},"sort by first name"),s.a.createElement("option",{value:"trade_name"},"sort by trade")),s.a.createElement("i",{className:"fas fa-caret-down"})),s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-filter"}),s.a.createElement("select",{value:this.state.trade_filter,onChange:this.selectTradeFilter},s.a.createElement("option",{value:"all"},"all"),n),s.a.createElement("i",{className:"fas fa-caret-down"})))),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.props.selectUser("NEWUSER")},className:""},s.a.createElement("i",{className:"fas fa-plus"}),s.a.createElement("span",null,"add a new user")))),s.a.createElement("ul",null,t))}}]),t}(s.a.Component),an=Object(o.b)(function(e){return{all_users_data:e.state.all_users_data,roles:e.state.roles}},function(e){return Object(c.b)({updateUsersData:w,selectUser:N},e)})(tn),nn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleCloseButton=function(e){a.props.selectUser(null),setTimeout(function(){a.setState({selected_user:{id:Math.random()}})},500)},a.handleChange=function(e){a.setState({selected_user:Object(p.a)({},a.state.selected_user,Object(d.a)({},e.target.name,e.target.value))})},a.handleDescriptionChange=function(e){a.setState({task_data:Object(p.a)({},a.state.task_data,{description:e})})},a.handleSaveChanges=function(e){if("NEWUSER"===a.props.selected_user){var t=Math.random(),n=Object(p.a)({},a.state.selected_user,{trade_name:"",id:t,jobs:[],tasks:[],new_date:new Date,status:"new"});a.props.updateUsersData(Object(d.a)({},t,n))}else a.props.updateUsersData(Object(d.a)({},a.props.selected_user,a.state.selected_user));setTimeout(function(){a.setState({selected_user:{id:Math.random()}})},500)},a.onRoleChange=function(e){return function(t){var n=Object(i.a)(a.state.selected_user.roles||[]);t.target.checked?n.push(e):n.splice(n.indexOf(e),1),a.setState({selected_user:Object(p.a)({},a.state.selected_user,{roles:n})})}},a.state={selected_user:a.props.all_users_data[a.props.selected_user]||{id:Math.random()}},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.selected_user&&this.props.selected_user!==e.selected_user&&this.setState({selected_user:this.props.all_users_data[this.props.selected_user]||{id:Math.random()}})}},{key:"render",value:function(){var e=this,t=[];for(var a in this.props.roles){var n=this.props.roles[a];t.push(s.a.createElement("label",{className:"checkbox-container",key:n.id},s.a.createElement("input",{type:"checkbox",onChange:this.onRoleChange(n.id),checked:this.state.selected_user.roles&&this.state.selected_user.roles.indexOf(n.id)+1}),s.a.createElement("i",{className:"fas fa-check-square"}),s.a.createElement("i",{className:"far fa-square"}),s.a.createElement("span",null,n.name)))}return s.a.createElement("div",{className:"user-editor form"+(this.props.selected_user&&this.props.all_users_data?" show":"")},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("i",{className:"fas fa-phone"}),s.a.createElement("span",null,(this.state.selected_user.first_name||"")+" "+(this.state.selected_user.last_name||""))),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.handleSaveChanges(),e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-check"}),s.a.createElement("span",null,"save")),s.a.createElement("button",{onClick:function(){e.handleCloseButton()},className:""},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,"cancel")))),s.a.createElement("main",null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"first name"),s.a.createElement("input",{name:"first_name",type:"text",placeholder:"first name",value:this.state.selected_user.first_name||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"last name"),s.a.createElement("input",{name:"last_name",type:"text",placeholder:"last name",value:this.state.selected_user.last_name||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"email"),s.a.createElement("input",{name:"email",type:"email",placeholder:"email",value:this.state.selected_user.email||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"phone"),s.a.createElement("input",{name:"phone",type:"text",placeholder:"phone",value:this.state.selected_user.phone||"",onChange:this.handleChange}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"company name"),s.a.createElement("input",{name:"company_name",type:"text",placeholder:"company name",value:this.state.selected_user.company_name||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"website"),s.a.createElement("input",{name:"website",type:"text",placeholder:"website",value:this.state.selected_user.website||"",onChange:this.handleChange})),s.a.createElement("div",null,s.a.createElement("label",null,"birthday"),s.a.createElement("input",{name:"birthday",type:"text",placeholder:"birthday",value:this.state.selected_user.birthday||"",onChange:this.handleChange}))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"address"),s.a.createElement("textarea",{name:"address",placeholder:"address",value:this.state.selected_user.address||"",onChange:this.handleChange}))),s.a.createElement("div",{className:"roles-list"},t),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("label",null,"notes"),s.a.createElement(Wt,{defaultValue:this.state.selected_user.description||"",onChange:this.handleDescriptionChange,refresh:this.props.selected_user||this.state.selected_user.id}))))))}}]),t}(s.a.Component),sn=Object(o.b)(function(e){return{selected_user:e.state.selected_user,all_users_data:e.state.all_users_data,roles:e.state.roles}},function(e){return Object(c.b)({selectUser:N,updateUsersData:w},e)})(nn),ln=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={loaded:!1,tab:"user"},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.temp_load_data=setTimeout(function(){e.setState({loaded:!0})},1e3)}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_load_data)}},{key:"changeMode",value:function(e){this.setState({tab:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("section",{id:"page-admin",className:this.state.loaded?"loaded":"loading"},s.a.createElement("div",{className:"load-background"}),s.a.createElement("div",{className:"card f-nogrow"},s.a.createElement("div",{className:"admin-panel"},s.a.createElement("header",null,s.a.createElement("div",null,s.a.createElement("h1",null,"Admin Panel"),s.a.createElement("button",{className:"tab-button "+("user"===this.state.tab?"selected":""),onClick:function(){e.changeMode("user")}},"add/edit users"),s.a.createElement("button",{className:"tab-button "+("contractor"===this.state.tab?"selected":""),onClick:function(){e.changeMode("contractor")}},"add/edit contractors"),s.a.createElement("button",{className:"tab-button "+("advanced"===this.state.tab?"selected":""),onClick:function(){e.changeMode("advanced")}},"advanced settings"))),s.a.createElement("div",{className:"tab-panel"},s.a.createElement("div",{className:"user"===this.state.tab?"show":""},"user"===this.state.tab&&s.a.createElement(en,null)),s.a.createElement("div",{className:"contractor"===this.state.tab?"show":""},"contractor"===this.state.tab&&s.a.createElement(an,null)),s.a.createElement("div",{className:"advanced"===this.state.tab?"show":""},"advanced"===this.state.tab&&s.a.createElement(Qa,null))))),s.a.createElement(sn,null))}}]),t}(s.a.Component),rn=Object(o.b)(function(e){return{all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({updateLeadsData:T},e)})(ln),on=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return s.a.createElement("section",{id:"page-404"},s.a.createElement("div",null,s.a.createElement("h1",null,"404"),s.a.createElement("h2",null,"Your request could not be found.")))}}]),t}(s.a.Component),cn=a(108),dn=function(e){function t(e){var a;Object(f.a)(this,t);return window.clientApplication=new cn.UserAgentApplication(st.clientID,st.authority,function(e,t,n,s){t?(a.props.signInUser(he),console.log(t)):console.log(n+":"+e)},{redirectUri:"http://localhost:3000/",cacheLocation:"localStorage",validateAuthority:!1}),e.updateRoles(be),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(v.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.openModal=function(t){e.setState({modal:t}),setTimeout(function(){e.setState({modal_state:"show"})},50)},window.closeModal=function(){e.setState({modal_state:""}),setTimeout(function(){e.setState({modal:null})},750)};var t=document.createElement("style");t.type="text/css",document.querySelector("head").appendChild(t),window.setStyle=function(e){t.innerHTML=e},window.printDiv=function(e){window.frames.print_frame.document.body.innerHTML='<link href="./printstyle.css" rel="stylesheet" type="text/css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous"><div class="document">'+document.getElementById(e).innerHTML+"</div>",window.frames.print_frame.window.focus(),setTimeout(function(){window.frames.print_frame.window.print()},1e3)}}},{key:"componentDidUpdate",value:function(e){this.props.selected_project!==e.selected_project&&this.props.history.push("/projects"+(this.props.selected_project?"/"+at(this.props.selected_project):""))}},{key:"render",value:function(){var e,t=this.props.current_user,a=t&&(t.config.homepage||t.company_config.homepage)||"/dashboard";return localStorage.getItem("redirect")&&(e=localStorage.getItem("redirect")),"/"!==window.location.pathname&&localStorage.setItem("redirect",window.location.pathname),s.a.createElement("div",{id:"app"},this.state.modal&&s.a.createElement("div",{id:"modal-container",className:this.state.modal_state},this.state.modal),s.a.createElement("input",{id:"nav-menu-checkbox",type:"checkbox"}),s.a.createElement(b.a,{component:$e}),s.a.createElement("main",null,s.a.createElement(Ke,null,s.a.createElement(ce.a,null,s.a.createElement(b.a,{exact:!0,path:"/ah-geez-404",component:on,key:"404"}),t?t.company_setup&&t.user_setup?[s.a.createElement(ie.a,{exact:!0,from:"/signin",to:a,key:"to-home-from-signin"}),s.a.createElement(ie.a,{exact:!0,from:"/",to:e||a,key:"to-home"}),s.a.createElement(b.a,{exact:!0,path:"/dashboard",component:ht,key:"dashboard"}),s.a.createElement(b.a,{path:"/projects",component:Ga,key:"projects"}),s.a.createElement(b.a,{exact:!0,path:"/schedule",component:Mt,key:"schedule"}),s.a.createElement(b.a,{path:"/leads",component:pa,key:"leads"}),t.roles.indexOf("admin")+1&&s.a.createElement(b.a,{path:"/admin",component:rn,key:"admin"})]:[s.a.createElement(b.a,{exact:!0,path:"/setup",component:pt,key:"setup"}),s.a.createElement(ie.a,{to:"/setup",key:"to-setup"})]:[s.a.createElement(b.a,{exact:!0,path:"/",component:rt,key:"sign-in"}),s.a.createElement(ie.a,{to:"/",key:"to-home"})],s.a.createElement(b.a,{component:on}),s.a.createElement(ie.a,{to:"/ah-geez-404",key:"to-404"})))),s.a.createElement(et,null))}}]),t}(n.Component),pn=Object(o.b)(function(e){return{current_user:e.state.current_user,selected_project:e.state.selected_project}},function(e){return Object(c.b)({signOutUser:O,signInUser:C,updateRoles:re},e)})(dn);r.a.render(s.a.createElement(o.a,{store:_},s.a.createElement(h.a,null,s.a.createElement(b.a,{component:pn}))),document.getElementById("root"))}},[[109,2,1]]]);
//# sourceMappingURL=main.c4523212.chunk.js.map