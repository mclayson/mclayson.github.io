{"version":3,"sources":["assets/images/logo.png","store/default-state.js","reducers/reducers.js","store/store.js","actions/actions.js","config/account-settings.js","utilities/data.js","components/drag-drop-container.js","components/header.js","components/footer.js","utilities/string.js","config/config.js","components/page-signin.js","components/page-setup.js","utilities/api.js","components/page-dashboard.js","utilities/date.js","components/user-heatmap.js","utilities/content.js","components/user-heatmap-dates.js","utilities/array.js","components/scheduler.js","components/page-schedule.js","components/lead-kanban.js","components/lead-chart.js","components/editor.js","components/project-editor.js","components/lead-editor.js","components/modal-warning.js","components/lead-task-list.js","components/job-editor.js","components/estimate-project.js","components/lead-estimator.js","components/page-leads.js","components/project.js","components/project-list.js","components/task-list.js","components/task-editor.js","components/job-creator.js","components/job-time-picker.js","components/job-details.js","components/project-opener.js","components/invoice-editor.js","components/project-notes.js","components/selected-image.js","components/project-photo-gallery.js","components/page-projects.js","components/advanced-settings.js","components/user-list.js","components/user-contractor-list.js","components/user-editor.js","components/page-admin.js","components/page-404.js","components/app.js","index.js"],"names":["module","exports","__webpack_require__","p","DefaultState","current_user","all_users_data","all_jobs_data","all_tasks_data","all_leads_data","all_projects_data","all_photos_data","all_invoices_data","terms","receipt","id","name","net15","net30","net60","roles","company_settings","weekend","daily_work_hours","reducers","user","state","arguments","length","undefined","action","type","Object","objectSpread","examplePropOne","examplePropTwo","sampleData","moreData","company_setup","user_setup","user_data","selected_project","project_id","selected_job","job_id","selected_job_index","index","users_data","defineProperty","user_id","user_object","old_user","old_user_id","jobs","indexOf","splice","_objectSpread2","needs_job","i","push","assignJobToUser","tasks","selected_user","leads_data","selected_lead","lead_id","open_lead_editor","lead_object","projects_data","project_data","j","job","project_color","color","updateProjectColor","open_photos","photos_data","photo_id","photo_object","open_invoice_editor","invoice_id","invoice_object","open_project_editor","new_project_data","open_project_summary","project_object","selected_job_schedule","date","job_data","job_object","toConsumableArray","deleteJob","lead_data","addJob","all_job_templates_data","template_data","all_project_templates_data","open_job_editor","open_job_creator","openJobCreator","closeJobCreator","task_data","task_id","task_object","task_ids","task","t","completed_task","completed","selected_task","settings","store","createStore","combineReducers","window","__REDUX_DEVTOOLS_EXTENSION__","setupUser","setupCompany","signOutUser","signInUser","updateUsersData","selectUser","updateLeadsData","selectLead","editLead","updateProjectsData","openPhotoGallery","updatePhotosData","editPhoto","openInvoiceEditor","editInvoice","openProjectEditor","openProjectSummary","editProject","updateJobsData","updateJobTemplatesData","updateProjectTemplatesData","openJobEditor","editJob","selectJob","selectJobSchedule","updateTasksData","addTask","openLeadEditor","editTask","deleteTasks","completeTask","selectTask","updateRoles","updateCompanySettings","WEEKEND","DAILY_WORK_HOURS","GenerateCode","stringArray","rndString","Math","ceil","random","toLowerCase","DefaultUser","company_config","homepage","config","first_name","last_name","email","company_id","trades","Roles","owner","admin","scheduler","project-manager","random_names","PickedColors","RandomColors","GenerateRandomColor","round","photos","w","h","JobTemplates","Estimation","default_trade","icon","Sign Contract","Pre Deposit","Demolition-tile-floor","data","units","value","Demolition-tile-shower","Demolition-vanity","Demolition-cabinet","Demolition-toilet","Protection","Plumbing-shower-valve","Drywall-prep","Tile-cement-board","Tile-water-proofing","Drywall-texture","Drywall-paint","Tile-flooring","Tile-shower-pan","Tile-shower-walls","Carpentry-vanity-install","Carpentry-cabinet-install","Countertop-quartz-install","Plumbing-shower-trim","Plumbing-toilet-install","Plumbing-sink-hook-up","Plumbing-faucet-install","Clean Up","Inspection","Final Payment","ProjectTemplates","bathroom-remodel","kitchen-remodel","TradeDistributor","Trades","JobDefaultTrades","Demolition","Tile Installation","Hardwood Installation","Plumbing","JobDefaultTasks","JobIcons","Tile Instalation","DefaultJobIcon","job_iterator","GenerateJob","double","project","scheduled","progress","start_time","end_time","max","UsersByTrade","u","visible_projects","floor","TasksById","description","GenerateTasks","start_dates","Date","getFullYear","getMonth","getDate","end_dates","assigned_user","project_name","JobsByMonth","PhotosById","JobsById","UsersById","Customer","CreateCustomerUser","split","substr","trade_name","address","billing_address","ProjectData","temp_progress","temp_jobs","Users","names","photo_uri","today","weekend_ref","start_date","weekend_adjuster","customer","customer_id","blob_uri","ph","photo","src","width","height","min","getDay","GenerateProjectJobs","LeadList","lead_status","max_heat","new","pending","estimate","approved","rejected","number_of_leads","0","1","2","3","4","5","name_counter","l","name_list","status_value","dates","last_date","new_date","scheduled_date","pending_date","estimate_date","approved_date","rejected_date","status","GenerateLeadsData","reorder","list","startIndex","endIndex","result","Array","from","_result$splice","removed","slicedToArray","DragDropContainer","onBeforeDragStart","onDragStart","onDragUpdate","onDragEnd","lead_groups","source","destination","console","log","droppableId","_this","props","template_job","draggableId","template_jobs","status_key","new_leads","scheduled_leads","pending_leads","estimate_leads","approved_leads","rejected_leads","other_leads","leads","items","reduce","obj","item","lead","new_project","jobs_by_id","lead_jobs","react_default","a","createElement","react_beautiful_dnd_esm","this","children","Component","connect","dispatch","bindActionCreators","Header","signOut","e","preventDefault","clientApplication","logout","Link","to","Logo","alt","htmlFor","className","NavLink","exact","href","onClick","React","Footer","SplitString","string","to_character","URLString","str","replace","applicationConfig","clientID","authority","b2cScopes","webApi","PageSignin","_this2","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","SignIn","loginRedirect","signed_in","loading","assertThisInitialized","setTimeout","acquireTokenSilent","then","accessToken","getUser","error","_this3","disabled","setState","construction_types","regions","PageSetup","setup_complete","slider_state","company_name","phone","construction_type","region","role","CompleteSetup","HandleChange","event","target","HandleCheckboxChange","checked","HandleSubmit","Validate","slide","slides","construction_type_options","key","region_options","role_options","onSubmit","placeholder","onChange","defaultValue","_e","axios","create","baseURL","timeout","headers","callApiWithAccessToken","Axios","url","Authorization","JSON","stringify","catch","PageDashboard","loaded","acquireTokenPopup","DaysInMonth","month","year","SameDay","d1","d2","UserHeatmap","handleDayCellClick","hour","selected_job_data","selected_day","end_date","handleDayClick","handleJobClick","handleChangeStartTime","setFullYear","gotoDate","handleChangeEndTime","isDayAssigned","current_date","assigned","map","startx","dist","dragged_element","event_store","handleEndTouchStart","job_duration","touchobj","changedTouches","parseInt","clientX","window_width","currentTarget","parentNode","clientWidth","handleEndTouchMove","handleEndTouchEnd","addEventListener","handleEndMouseDown","side","document","handleEndMouseMove","handleEndMouseUp","stopPropagation","_this$dragged_element","getElementById","style","maxWidth","minWidth","start_hour","getHours","getMinutes","hr","ampm","innerHTML","_this$dragged_element2","setHours","removeEventListener","handleBodyTouchStart","job_start","handleBodyTouchMove","handleBodyTouchEnd","left","s_min","s_hr","start_value","handleBodyMouseDown","handleBodyMouseMove","handleBodyMouseUp","_this$dragged_element3","_this$dragged_element4","jobs_by_day","d","_loop","v","_ret","cells","day_cells","classes","calcJobsByDay","toDateString","top","backgroundColor","react_datepicker_es","selected","dateFormat","dateCaption","popperPlacement","popperModifiers","offset","enabled","preventOverflow","escapeWithReference","boundariesElement","calendarContainer","_ref","position","onTouchStart","onMouseDown","loc","Content","en","MonthNames","MonthNamesShort","WeekDaysShort","DeleteAllTasksWarning","message_1","message_2","message_3","message_4","confirm","cancel","MarkAllTasksCompleteWarning","UserHeatmapDates","dataset","prevProps","data-id","current_time","ObjectToArray","object","array","o","ArrayMove","arr","old_index","new_index","k","Scheduler","sort","trade_filter","selected_index","selectSort","selectTradeFilter","day","handleClearSelectedDay","handleNextDay","current_month","handleNextMonth","handlePrevDay","new_month","handlePrevMonth","handleGotoToday","scrollTop","offsetTop","current","now","createRef","section","temp_service_call","trade_names","keys","b","x","y","clearTimeout","user_nodes","user_dates","users","sort_value","trade_value","ref","user_heatmap","user_heatmap_dates","PageSchedule","heat_map","getItemStyle","isDragging","draggableStyle","heat","background","getListStyle","isDraggingOver","padding","flex","LeadKanban","handleEstimateClick","handleLeadClick","createLead","provided","snapshot","assign","innerRef","draggableProps","dragHandleProps","display","LeadChart","total_leads","heat_map_ranges","range","flip","nodes","transform","Editor","RichTextEditor","createValueFromString","createEmptyValue","toString","refresh","react_rte_default","Color","hexVal","hex","constructColor","colorObj","substring","r","g","apply","chr","hue","val","sat","chroma","luma","red","green","blue","ProjectEditor","handleCloseButton","handleChange","handleColorChange","handleDescriptionChange","handleIconChange","changeEvent","handleSaveChanges","hexArray","colors","sortColorsByHue","color_nodes","editor","LeadEditor","new_lead","website","birthday","ModalWarning","title","closeModal","message","handleConfirm","handleCancel","LeadTaskList","add_task_text","temp_edit_text","currently_editing","all_complete","handleTaskClick","job_tasks","temptask","updateJob","handleCompleteAll","openModal","modal_warning","handleIncompleteAll","handleDeleteAll","handleDelete","handleAddKeyPress","handleAddTask","handleAddChange","handleEdit","handleEditKeyPress","handleConfirmEdit","handleEditChange","handleCancelEdit","handleTaskDragStart","dragged_id","dragged_index","handleTaskDragEnd","setStyle","drop_id","handleTaskDrop","handleTaskDragOver","drop_index","handleTaskDragLeave","temp_api_call","tasks_by_id","callAPI","total_progress","total_tasks","mode","onKeyPress","task_nodes","drop_location","data-index","draggable","onDrag","onDragOver","onDragLeave","onDrop","toLocaleDateString","toLocaleTimeString","getMenu","JobEditor","job_index","updateJobData","new_job_data","getProjectItemStyle","margin","borderRadius","getTimelineItemStyle","minHeight","zIndex","flexFlow","EstimateProject","tab","handleTimelineValueChange","input","handleDeleteJobTemplate","handleTimelineJobClick","handleLabelClick","createTimelineJob","inputs","createJob","createProject","getTemplateData","timeline","job_templates","project_templates","selected_lead_data","direction","opacity","changeMode","isDropDisabled","LeadEstimator","estimate_project","lead_editor","job_editor","PageLeads","temp_load_data","lead_chart","lead_kanban","lead_estimator","Project","handleInvoiceButton","handleEditButton","handleSummaryButton","handlePhotoButton","the_job_id","job_insert","getJobData","months","Unscheduled","display_months","job_month","month_keys","after_today","mark_today","last_selected","handleAddButton","ProjectList","selectProject","projects","counter","components_project","TaskList","checkIfAllComplete","icons","TaskEditor","handleScheduleCheckChange","enable_schedule","new_task","handleChangeDate","icon_radios","inline","showTimeSelect","showTimeSelectOnly","timeIntervals","minTime","maxTime","timeCaption","JobCreator","jobOrTask","validate","valid","handleTypeChange","bottom","JobTimePicker","new_job","default_start_time","default_end_time","JobDetails","handleTrashButton","updateJobProgress","show_content","detail_mode","detail","start_description","temp_job_data","show_content_animation","handleCheck","task_list","job_creator","task_editor","job_time_picker","last_selected_project","transition_finish","transition","transition_last_selected_project","Redirect","job_details","InvoiceEditor","invoice_data","handleItemProductChange","prop","selectTerms","handleKeyPress","focus","input_refs","project_address","project_manager","terms_nodes","table_rows","total","amount","quantity","rate","product","invoice_number","invoice_date","handleChangeInvoieDate","expiration_date","ProjectNotes","handlePrintButton","printDiv","updateUsers","updateTasks","note_objects","note_nodes","task_user","dangerouslySetInnerHTML","__html","n","note","deadline","unescape","Checkmark","fill","cx","cy","imgStyle","selectedImgStyle","cont","cursor","overflow","SelectedImage","_ref2","sx","sy","concat","selected_image_Checkmark","ProjectPhotoGallery","handleZoomOutButton","columns","handleZoomInButton","selectPhoto","show_selected","toggleSelect","selectAll","temp_api_timeout","photos_by_id","photos_to_update","photos_ids","react_photo_gallery_es","ImageComponent","PageProjects","projects_by_id","location_array","location","pathname","pr","Route","path","component","ProjectOpener","project_editor","project_notes","project_photo_gallery","invoice_editor","UserEditor","handleChangeSetting","setting","onRoleChange","days","handleWorkHours","weekend_nodes","UserList","handleUserClick","users_sorted","role_nodes","UserContractorList","new_user","PageAdmin","user_list","user_contractor_list","advanced_settings","user_editor","App","Msal","errorDesc","token","tokenType","redirectUri","cacheLocation","validateAuthority","modal_object","modal","modal_state","el","querySelector","appendChild","newStyles","divId","frames","body","print","history","redirect","localStorage","getItem","setItem","drag_drop_container","Switch","Page404","PageSignIn","footer","ReactDOM","render","es","BrowserRouter"],"mappings":"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","file":"static/js/main.c4523212.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.694152e3.png\";","// import {DefaultUser} from '../utilities/content';\n\nlet DefaultState = {\n  current_user: null,//DefaultUser,//null,\n  all_users_data: {},\n  all_jobs_data: {},\n  all_tasks_data: {},\n  all_leads_data: {},\n  all_projects_data: {},\n  all_photos_data: {},\n  all_invoices_data: {},\n  terms: {\n    \"receipt\": {\n      id:\"receipt\",\n      name: \"due on receipt\",\n    },\n    \"net15\": {\n      id:\"net15\",\n      name: \"net 15\",\n    },\n    \"net30\": {\n      id:\"net30\",\n      name: \"net 30\",\n    },\n    \"net60\": {\n      id:\"net60\",\n      name: \"net 60\",\n    }\n  },\n  roles: {},\n  company_settings: {\n    weekend: [0,6],\n    daily_work_hours: 8\n  }\n};\n\nexport default DefaultState;\n","import DefaultState from '../store/default-state'\n\nfunction assignJobToUser (state, action) {\n  let old_user = {};\n\n  if (action.old_user_id) {\n    old_user = {...state.all_users_data[action.old_user_id]};\n    var index = old_user.jobs.indexOf(action.job_id);\n    if (index > -1) {\n      old_user.jobs.splice(index, 1);\n    }\n  }\n\n  let user = {...state.all_users_data[action.user_id]};\n  let needs_job = true;\n  for (let i=0; i<user.jobs.length; i++) {\n    if (user.jobs[i] === action.job_id) {\n      needs_job = false;\n      break;\n    }\n  }\n  if (needs_job) {\n    user.jobs.push(action.job_id);\n  }\n  if (action.old_user_id) {\n    return {\n      ...state,\n      all_users_data: {\n        ...state.all_users_data,\n        [action.user_id]:user,\n        [action.old_user_id||\"no-old-user\"]:old_user\n      }\n    }\n  }\n  return {\n    ...state,\n    all_users_data: {\n      ...state.all_users_data,\n      [action.user_id]:user\n    }\n  }\n}\n\nfunction openJobCreator (state, action) {\n  return {\n    ...state,\n    open_job_creator: {project_id: action.project_id, job_id: action.job_id}\n  }\n}\n\nfunction closeJobCreator (state, action) {\n  return {\n    ...state,\n    open_job_creator: null\n  }\n}\n\nfunction addJob (state, action) {\n  let project_data = {...state.all_projects_data};\n  let lead_data = {...state.all_leads_data};\n\n  if (project_data[action.project_id]) {\n    // add to project\n    if (action.project_id) {\n      project_data[action.project_id].jobs.push(action.job_id);\n    }\n  }\n  else {\n    // add to lead\n    if (action.lead_id) {\n      lead_data[action.lead_id].jobs.push(action.job_id);\n    }\n  }\n\n  return {\n    ...state,\n    all_projects_data: project_data,\n    all_leads_data: lead_data,\n    all_jobs_data: {\n      ...state.all_jobs_data,\n      [action.job_id]:action.job_object\n    }\n  }\n}\n\nfunction deleteJob (state, action) {\n  let all_jobs_data = {...state.all_jobs_data};\n  delete all_jobs_data[action.job_id];\n\n  let jobs = [...state.all_projects_data[action.project_id].jobs];\n  for (var j=0; j<jobs.length; j++) {\n    if (jobs[j] === action.job_id) {\n      jobs.splice(j, 1);\n      break;\n    }\n  }\n\n  return {\n    ...state,\n    all_jobs_data: {\n      ...all_jobs_data\n    },\n    all_projects_data: {\n      ...state.all_projects_data,\n      [action.project_id]: {\n        ...state.all_projects_data[action.project_id],\n        jobs: jobs\n      }\n    },\n    selected_job: null\n  }\n}\n\nfunction updateProjectColor (state, action) {\n  let project_data = {...state.all_projects_data[action.project_id]};\n  let jobs = {};\n  for (var j=0; j<project_data.jobs.length; j++) {\n    let job = {...state.all_jobs_data[project_data.jobs[j]]};\n\n    job.project_color = action.color;\n\n    jobs[job.id] = job;\n  }\n\n  return {\n    ...state,\n    all_projects_data: {\n      ...state.all_projects_data,\n      [action.project_id]: {...state.all_projects_data[action.project_id], color: action.color}\n    },\n    all_jobs_data: {\n      ...state.all_jobs_data,\n      ...jobs\n    }\n  }\n}\n\n\n\n\n\n\n\n\n\nconst reducers = (state = DefaultState, action) => {\n  let user;\n  switch (action.type) {\n    case 'EXAMPLE':\n      return {\n        ...state,\n        examplePropOne: 'newPropOne'\n      }\n    case 'EXAMPLE-TWO':\n      return {\n        ...state,\n        examplePropTwo: action.sampleData + action.moreData\n      }\n    case 'SETUP-COMPANY':\n      return {\n        ...state,\n        current_user: {...(state.current_user||{}), company_setup:true}\n      }\n    case 'SETUP-USER':\n      return {\n        ...state,\n        current_user: {...(state.current_user||{}), user_setup:true}\n      }\n    case 'SIGNIN-USER':\n      return {\n        ...state,\n        current_user: action.user_data\n      }\n    case 'SIGNOUT-USER':\n      return {\n        ...state,\n        current_user: null\n      }\n    case 'SELECT-JOB':\n      return {\n        ...state,\n        selected_project: action.project_id,\n        selected_job: action.job_id,\n        selected_job_index: action.index || 0\n      }\n\n\n\n\n    case 'UPDATE-ALL-USERS-DATA':\n      return {\n        ...state,\n        all_users_data: action.all_users_data\n      }\n    case 'UPDATE-USERS-DATA':\n      return {\n        ...state,\n        all_users_data: {\n          ...state.all_users_data,\n          ...action.users_data\n        }\n      }\n    case 'EDIT-USER':\n      return {\n        ...state,\n        all_users_data: {\n          ...state.all_users_data,\n          [action.user_id]:{\n            ...state.all_users_data[action.user_id],\n            ...action.user_object\n          }\n        }\n      }\n    case 'ASSIGN-JOB-TO-USER':\n      return assignJobToUser(state, action);\n    case 'ASSIGN-TASK-TO-USER':\n      user = {...state.all_users_data[action.user_id]};\n      user.tasks.push(action.job_id);\n      return {\n        ...state,\n        all_users_data: {\n          ...state.all_users_data,\n          [action.user_id]:user\n        }\n      }\n    case 'SELECT-USER':\n      return {\n        ...state,\n        selected_user: action.user_id\n      }\n\n\n\n\n    case 'UPDATE-ALL-LEADS-DATA':\n      return {\n        ...state,\n        all_leads_data: action.all_leads_data\n      }\n    case 'UPDATE-LEADS-DATA':\n      return {\n        ...state,\n        all_leads_data: {\n          ...state.all_leads_data,\n          ...action.leads_data\n        }\n      }\n    case 'SELECT-LEAD':\n      return {\n        ...state,\n        selected_lead: action.lead_id\n      }\n    case 'OPEN-LEAD-EDITOR':\n      return {\n        ...state,\n        open_lead_editor: action.lead_id\n      }\n\n    case 'EDIT-LEAD':\n      return {\n        ...state,\n        all_leads_data: {\n          ...state.all_leads_data,\n          [action.lead_id]:{\n            ...state.all_leads_data[action.lead_id],\n            ...action.lead_object\n          }\n        }\n      }\n\n\n\n    case 'UPDATE-ALL-PROJECT-DATA':\n      return {\n        ...state,\n        all_projects_data: action.all_projects_data\n      }\n    case 'UPDATE-PROJECTS-DATA':\n      return {\n        ...state,\n        all_projects_data: {\n          ...state.all_projects_data,\n          ...action.projects_data\n        }\n      }\n    case 'UPDATE-PROJECT-COLOR':\n      return updateProjectColor(state, action);\n    case 'OPEN-PHOTO-GALLERY':\n      return {\n        ...state,\n        open_photos: action.project_id\n      }\n    case 'UPDATE-PHOTOS-DATA':\n      return {\n        ...state,\n        all_photos_data: {\n          ...state.all_photos_data,\n          ...action.photos_data\n        }\n      }\n    case 'EDIT-PHOTO':\n      return {\n        ...state,\n        all_photos_data: {\n          ...state.all_photos_data,\n          [action.photo_id]:{\n            ...state.all_photos_data[action.photo_id],\n            ...action.photo_object\n          }\n        }\n      }\n\n\n\n    case 'OPEN-INVOICE-EDITOR':\n      return {\n        ...state,\n        open_invoice_editor: action.invoice_id\n      }\n\n    case 'EDIT-INVOICE':\n      return {\n        ...state,\n        all_invoices_data: {\n          ...state.all_invoices_data,\n          [action.invoice_id]:{\n            ...state.all_invoices_data[action.invoice_id],\n            ...action.invoice_object\n          }\n        }\n      }\n\n    case 'OPEN-PROJECT-EDITOR':\n      return {\n        ...state,\n        open_project_editor: action.project_id,\n        new_project_data: action.project_data\n      }\n    case 'OPEN-PROJECT-SUMMARY':\n      return {\n        ...state,\n        open_project_summary: action.project_id\n      }\n    case 'EDIT-PROJECT':\n      return {\n        ...state,\n        all_projects_data: {\n          ...state.all_projects_data,\n          [action.project_id]:{\n            ...state.all_projects_data[action.project_id],\n            ...action.project_object\n          }\n        }\n      }\n\n\n    case 'SELECT-JOB-SCHEDULE':\n      return {\n        ...state,\n        selected_job_schedule: {\n          date: action.date,\n          user_id: action.user_id\n        }\n      }\n    case 'UPDATE-ALL-JOB-DATA':\n      return {\n        ...state,\n        all_jobs_data: action.all_jobs_data\n      }\n    case 'UPDATE-JOB-DATA':\n      return {\n        ...state,\n        all_jobs_data: {\n          ...state.all_jobs_data,\n          ...action.job_data\n        }\n      }\n    case 'EDIT-JOB':\n      return {\n        ...state,\n        all_jobs_data: {\n          ...state.all_jobs_data,\n          [action.job_id]:{\n            ...state.all_jobs_data[action.job_id],\n            ...action.job_object\n          }\n        }\n      }\n    case 'DELETE-JOB':\n      return deleteJob(state, action);\n\n    case 'ADD-JOB':\n      return addJob(state, action);\n\n\n    case 'UPDATE-JOB-TEMPLATE-DATA':\n      return {\n        ...state,\n        all_job_templates_data: {\n          ...state.all_job_templates_data,\n          ...action.template_data\n        }\n      }\n\n    case 'UPDATE-PROJECT-TEMPLATE-DATA':\n      return {\n        ...state,\n        all_project_templates_data: {\n          ...state.all_project_templates_data,\n          ...action.template_data\n        }\n      }\n\n    case 'OPEN-JOB-EDITOR':\n      return {\n        ...state,\n        open_job_editor: action.job_id\n      }\n\n    case 'OPEN-JOB-CREATOR':\n      return openJobCreator(state, action);\n\n    case 'CLOSE-JOB-CREATOR':\n      return closeJobCreator(state, action);\n\n    case 'UPDATE-ALL-TASK-DATA':\n      return {\n        ...state,\n        all_tasks_data: action.all_tasks_data\n      }\n    case 'UPDATE-TASK-DATA':\n      return {\n        ...state,\n        all_tasks_data: {\n          ...state.all_tasks_data,\n          ...action.task_data\n        }\n      }\n    case 'ADD-TASK':\n      let job_data = {...state.all_jobs_data};\n      let project_data = {...state.all_projects_data};\n      // add to job\n      if (action.job_id) {\n        job_data[action.job_id].tasks.push(action.task_id);\n      }\n      // add to project\n      if (action.project_id) {\n        project_data[action.project_id].tasks.push(action.task_id);\n      }\n      return {\n        ...state,\n        all_projects_data: project_data,\n        all_jobs_data: job_data,\n        all_tasks_data: {\n          ...state.all_tasks_data,\n          [action.task_id]:action.task_object\n        }\n      }\n    case 'EDIT-TASK':\n      return {\n        ...state,\n        all_tasks_data: {\n          ...state.all_tasks_data,\n          [action.task_id]:{\n            ...state.all_tasks_data[action.task_id],\n            ...action.task_object\n          }\n        }\n      }\n    case 'DELETE-TASKS':\n      job_data = {...state.all_jobs_data};\n      project_data = {...state.all_projects_data};\n      let all_tasks_data = {...state.all_tasks_data};\n\n      for (let i=0; i<action.task_ids.length; i++) {\n        let task = all_tasks_data[action.task_ids[i]];\n        //if the task is part of a job\n        if (task.job_id) {\n          for (let t=0; t<job_data[task.job_id].tasks.length; t++) {\n            if (job_data[task.job_id].tasks[t] === action.task_ids[i]) {\n              job_data[task.job_id].tasks.splice(t, 1);\n            }\n          }\n        }\n        //if the task is part of a project\n        if (task.project_id) {\n          for (let t=0; t<project_data[task.project_id].tasks.length; t++) {\n            if (project_data[task.project_id].tasks[t] === action.task_ids[i]) {\n              project_data[task.project_id].tasks.splice(t, 1);\n            }\n          }\n        }\n        //delete the task itself\n        delete all_tasks_data[action.task_ids[i]];\n      }\n      return {\n        ...state,\n        all_jobs_data: job_data,\n        all_projects_data: project_data,\n        all_tasks_data: all_tasks_data\n      }\n    case 'COMPLETE-TASK':\n      const completed_task = {\n        ...state.all_tasks_data[action.task_id],\n        completed: true\n      }\n      return {\n        ...state,\n        all_tasks_data: {\n          ...state.all_tasks_data,\n          [action.task_id]:completed_task\n        }\n      }\n    case 'SELECT-TASK':\n      return {\n        ...state,\n        selected_task: action.task_id\n      }\n\n\n    case 'UPDATE-ROLES':\n      return {\n        ...state,\n        roles: {\n          ...state.roles,\n          ...action.roles\n        }\n      }\n\n\n\n    case 'UPDATE-COMPANY-SETTINGS':\n      return {\n        ...state,\n        company_settings: {\n          ...state.company_settings,\n          ...action.settings\n        }\n      }\n\n\n    default: return state;\n  }\n}\n\nexport default reducers;\n","import { createStore, combineReducers } from 'redux';\n// import ReduxThunk from 'redux-thunk'\nimport reducers from '../reducers/reducers';\n\nexport const store = createStore(\n  combineReducers({\n    state: reducers\n  }),\n  // applyMiddleware(ReduxThunk),\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n","export const setupUser = () => (\n  {\n    type: 'SETUP-USER'\n  }\n)\n\nexport const setupCompany = () => (\n  {\n    type: 'SETUP-COMPANY'\n  }\n)\n\nexport const signOutUser = () => (\n  {\n    type: 'SIGNOUT-USER'\n  }\n)\n\nexport const signInUser = (user_data) => (\n  {\n    type: 'SIGNIN-USER',\n    user_data\n  }\n)\n\nexport const editUser = (user_id, user_data) => (\n  {\n    type: 'EDIT-USER',\n    user_id,\n    user_data\n  }\n)\n\nexport const assignJobToUser = (old_user_id, user_id, job_id) => (\n  {\n    type: 'ASSIGN-JOB-TO-USER',\n    old_user_id,\n    user_id,\n    job_id\n  }\n)\n\nexport const assignTaskToUser = (old_user_id, user_id, task_id) => (\n  {\n    type: 'ASSIGN-TASK-TO-USER',\n    old_user_id,\n    user_id,\n    task_id\n  }\n)\n\n\n\n\nexport const updateAllUsersData = (all_users_data) => (\n  {\n    type: 'UPDATE-ALL-USERS-DATA',\n    all_users_data\n  }\n)\n\nexport const updateUsersData = (users_data) => (\n  {\n    type: 'UPDATE-USERS-DATA',\n    users_data\n  }\n)\n\nexport const selectUser = (user_id) => (\n  {\n    type: 'SELECT-USER',\n    user_id\n  }\n)\n\n\n\n\nexport const updateAllLeadsData = (all_leads_data) => (\n  {\n    type: 'UPDATE-ALL-LEADS-DATA',\n    all_leads_data\n  }\n)\n\nexport const updateLeadsData = (leads_data) => (\n  {\n    type: 'UPDATE-LEADS-DATA',\n    leads_data\n  }\n)\n\nexport const selectLead = (lead_id) => (\n  {\n    type: 'SELECT-LEAD',\n    lead_id\n  }\n)\n\nexport const editLead = (lead_id, lead_object) => (\n  {\n    type: 'EDIT-LEAD',\n    lead_id,\n    lead_object\n  }\n)\n\n\n\n\n\nexport const updateAllProjectData = (all_projects_data) => (\n  {\n    type: 'UPDATE-ALL-PROJECT-DATA',\n    all_projects_data\n  }\n)\n\nexport const updateProjectsData = (projects_data) => (\n  {\n    type: 'UPDATE-PROJECTS-DATA',\n    projects_data\n  }\n)\n\nexport const updateProjectColor = (project_id, color) => (\n  {\n    type: 'UPDATE-PROJECT-COLOR',\n    project_id,\n    color\n  }\n)\n\nexport const openPhotoGallery = (project_id) => (\n  {\n    type: 'OPEN-PHOTO-GALLERY',\n    project_id\n  }\n)\n\n\nexport const updatePhotosData = (photos_data) => (\n  {\n    type: 'UPDATE-PHOTOS-DATA',\n    photos_data\n  }\n)\n\nexport const editPhoto = (photo_id, photo_object) => (\n  {\n    type: 'EDIT-PHOTO',\n    photo_id,\n    photo_object\n  }\n)\n\n\n\nexport const openInvoiceEditor = (invoice_id) => (\n  {\n    type: 'OPEN-INVOICE-EDITOR',\n    invoice_id\n  }\n)\n\nexport const editInvoice = (invoice_id, invoice_object) => (\n  {\n    type: 'EDIT-INVOICE',\n    invoice_id,\n    invoice_object\n  }\n)\n\nexport const openProjectEditor = (project_id, project_data) => (\n  {\n    type: 'OPEN-PROJECT-EDITOR',\n    project_id,\n    project_data\n  }\n)\n\nexport const openProjectSummary = (project_id) => (\n  {\n    type: 'OPEN-PROJECT-SUMMARY',\n    project_id\n  }\n)\n\nexport const editProject = (project_id, project_object) => (\n  {\n    type: 'EDIT-PROJECT',\n    project_id,\n    project_object\n  }\n)\n\nexport const updateAllJobData = (all_jobs_data) => (\n  {\n    type: 'UPDATE-ALL-JOB-DATA',\n    all_jobs_data\n  }\n)\n\nexport const updateJobsData = (job_data) => (\n  {\n    type: 'UPDATE-JOB-DATA',\n    job_data\n  }\n)\n\nexport const updateJobTemplatesData = (template_data) => (\n  {\n    type: 'UPDATE-JOB-TEMPLATE-DATA',\n    template_data\n  }\n)\n\nexport const updateProjectTemplatesData = (template_data) => (\n  {\n    type: 'UPDATE-PROJECT-TEMPLATE-DATA',\n    template_data\n  }\n)\n\nexport const addJob = (job_id, job_object, project_id) => (\n  {\n    type: 'ADD-JOB',\n    job_id,\n    job_object,\n    project_id\n  }\n)\n\n\nexport const openJobEditor = (job_id) => (\n  {\n    type: 'OPEN-JOB-EDITOR',\n    job_id\n  }\n)\n\nexport const editJob = (job_id, job_object) => (\n  {\n    type: 'EDIT-JOB',\n    job_id,\n    job_object\n  }\n)\n\nexport const deleteJob = (job_id, project_id) => (\n  {\n    type: 'DELETE-JOB',\n    job_id,\n    project_id\n  }\n)\n\nexport const selectJob = (project_id, job_id, index) => (\n  {\n    type: 'SELECT-JOB',\n    project_id,\n    job_id,\n    index\n  }\n)\n\n\n\n\nexport const selectJobSchedule = (date, user_id) => (\n  {\n    type: 'SELECT-JOB-SCHEDULE',\n    date,\n    user_id\n  }\n)\n\n\n\n\nexport const updateAllTasksData = (all_tasks_data) => (\n  {\n    type: 'UPDATE-ALL-TASK-DATA',\n    all_tasks_data\n  }\n)\n\nexport const updateTasksData = (task_data) => (\n  {\n    type: 'UPDATE-TASK-DATA',\n    task_data\n  }\n)\n\nexport const addTask = (task_id, task_object, job_id, project_id) => (\n  {\n    type: 'ADD-TASK',\n    task_id,\n    task_object,\n    job_id,\n    project_id\n  }\n)\n\nexport const openLeadEditor = (lead_id) => (\n  {\n    type: 'OPEN-LEAD-EDITOR',\n    lead_id\n  }\n)\n\nexport const openJobCreator = (project_id, job_id) => (\n  {\n    type: 'OPEN-JOB-CREATOR',\n    project_id,\n    job_id\n  }\n)\n\nexport const closeJobCreator = () => (\n  {\n    type: 'CLOSE-JOB-CREATOR'\n  }\n)\n\nexport const editTask = (task_id, task_object) => (\n  {\n    type: 'EDIT-TASK',\n    task_id,\n    task_object\n  }\n)\n\nexport const deleteTasks = (task_ids) => (\n  {\n    type: 'DELETE-TASKS',\n    task_ids\n  }\n)\n\nexport const completeTask = (task_id) => (\n  {\n    type: 'COMPLETE-TASK',\n    task_id\n  }\n)\n\nexport const selectTask = (task_id) => (\n  {\n    type: 'SELECT-TASK',\n    task_id\n  }\n)\n\n\n\nexport const updateRoles = (roles) => (\n  {\n    type: 'UPDATE-ROLES',\n    roles\n  }\n)\n\n\n\nexport const updateCompanySettings = (settings) => (\n  {\n    type: 'UPDATE-COMPANY-SETTINGS',\n    settings\n  }\n)\n","export const WEEKEND = [0,6];\nexport const DAILY_WORK_HOURS = 8;\nexport const USE_12_HOUR_CLOCK = true;\n","import {DAILY_WORK_HOURS, WEEKEND} from '../config/account-settings'\n\n\nexport function GenerateCode () {\n\n    // set the length of the string\n    var code_length = 10;\n\n    // list containing characters for the random string\n    var stringArray = ['A','B','C','D','E','F','G','H','J','K','M','N','P','Q','R','S','T','U','V','W','X','Y','Z','2','3','4','5','6','7','8','9'];\n\n\n    var rndString = \"\";\n\n    // build a string with random characters\n    for (var i = 0; i < code_length; i++) {\n        var rndNum = Math.ceil(Math.random() * stringArray.length) - 1;\n        rndString += stringArray[rndNum];\n    };\n\n    return rndString.toLowerCase();\n}\n\n\nexport const DefaultUser = {\n  company_setup: true,\n  user_setup: true,\n  company_config: {\n    homepage: \"/dashboard\"\n  },\n  config: {\n    homepage: \"/projects\"\n  },\n  first_name: \"Joe\",\n  last_name: \"Smith\",\n  email: \"joe.smith@projulcustomer.com\",\n  company_id: GenerateCode(),\n  roles: [\"admin\", \"owner\", \"scheduler\", \"project-manager\"],\n  trades: [\"Company Owner\"]\n};\n\nexport const Roles = {\n  \"owner\": {\n    id: \"owner\",\n    name:\"Owner\"\n  },\n  \"admin\": {\n    id: \"admin\",\n    name:\"Admin\"\n  },\n  \"scheduler\": {\n    id: \"scheduler\",\n    name:\"Scheduler\"\n  },\n  \"project-manager\": {\n    id: \"project-manager\",\n    name:\"Project Manager\"\n  },\n};\n\n\nvar random_names = [\n\"Marcia Byrd f\",\n\"Homer Jensen m\",\n\"Derrick Hopkins m\",\n\"Sara Bowman f\",\n\"Ora Hawkins f\",\n\"Traci Gonzalez f\",\n\"Charles Knight m\",\n\"Shari Palmer f\",\n\"Alfred Mcbride m\",\n\"Josephine Martinez f\",\n\"Geraldine Page f\",\n\"Pete Grant m\",\n\"Brooke Cummings f\",\n\"Willis Yates m\",\n\"Randy Thomas m\",\n\"Mack George m\",\n\"Melanie Reid f\",\n\"Terence Rodgers m\",\n\"Meredith Foster f\",\n\"Patsy Campbell f\",\n\"Carolyn Dixon f\",\n\"Esther Weaver f\",\n\"Lillian Maxwell f\",\n\"Gladys Watts m\",\n\"Mae Nunez f\",\n\"Sammy Clark m\",\n\"Sandra Rios f\",\n\"Kathryn Terry f\",\n\"Courtney Dennis f\",\n\"Don Caldwell m\",\n\"Kenny Glover m\",\n\"Marcus Harrison m\",\n\"Molly Young f\",\n\"Joshua Edwards m\",\n\"Bertha Warner f\",\n\"Gayle Stokes m\",\n\"Victoria Harris f\",\n\"Jana Singleton f\",\n\"Orville Hoffman m\",\n\"Benjamin Fleming m\",\n\"Erma Lowe m\",\n\"Miguel Stephens m\",\n\"Rafael Smith m\",\n\"Albert Marsh m\",\n\"Wayne Goodman m\",\n\"Tasha Parsons f\",\n\"Johnnie Munoz m\",\n\"Wade Ward m\",\n\"Blanche Carter m\",\n\"Cesar Cooper m\"\n];\n\nlet PickedColors = {};\nexport const RandomColors = [\n  \"#1a66ff\",\n  \"#40ceff\",\n  // \"#8deaff\",\n  \"#008e7d\",\n  \"#3dc1aa\",\n  // \"#a1ffed\",\n  \"#8e2828\",\n  \"#cc4848\",\n  \"#ff8383\",\n  \"#4f2382\",\n  \"#7e4dc4\",\n  \"#bd9af4\",\n  // \"#473118\",\n  \"#725b42\",\n  \"#96897d\",\n  \"#004723\",\n  \"#297a4e\",\n  \"#6cb78c\",\n  // \"#0a2756\",\n  \"#2d5184\",\n  \"#6d97c9\",\n  \"#e06000\",\n  \"#ff9136\",\n  // \"#ffb888\",\n\n\n  // \"#1abc9c\",\n  // \"#16a085\",\n  // \"#27ae60\",\n  // \"#3498db\",\n  // \"#2980b9\",\n  // \"#4a69bd\",\n  // \"#6a89cc\",\n  // \"#60a3bc\",\n  // \"#079992\",\n  // \"#3c6382\",\n  // \"#d35400\",\n  // \"#e74c3c\",\n  // \"#e15f41\",\n  // \"#e77f67\",\n  // \"#c0392b\"\n\n];\nexport function GenerateRandomColor () {\n  const color = RandomColors[Math.round(Math.random()*(RandomColors.length-1))];\n  if (!PickedColors[color]) {\n    PickedColors[color] = true;\n    return color;\n  }\n  return GenerateRandomColor();\n}\n\n\nconst photos = [\n  {\n    p:\"8cab461124f55cbfa2db24bad04f5c5f.jpg\",\n    w:400,\n    h:600\n  },\n  {\n    p:\"Bathroom sink 1.png\",\n    w:683,\n    h:838\n  },\n  {\n    p:\"bathSink.jpg\",\n    w:736,\n    h:491\n  },\n  {\n    p:\"Integrated sink and counter.png\",\n    w:592,\n    h:742\n  },\n  {\n    p:\"Distressed counter and sink.png\",\n    w:595,\n    h:738\n  },\n  {\n    p:\"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-38.jpg\",\n    w:1000,\n    h:668\n  },\n  {\n    p:\"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-23.jpg\",\n    w:1000,\n    h:668\n  },\n  {\n    p:\"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-17.jpg\",\n    w:1000,\n    h:666\n  },\n  {\n    p:\"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-16.jpg\",\n    w:1000,\n    h:667\n  },\n  {\n    p:\"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-7.jpg\",\n    w:1000,\n    h:667\n  },\n  {\n    p:\"custom-concrete-sink-by-concrete-wave-design-bath-portfolio-1.jpg\",\n    w:1000,\n    h:667\n  },\n  {\n    p:\"counter shower and sink.png\",\n    w:794,\n    h:542\n  },\n  {\n    p:\"Counter slab with bowl sinks.png\",\n    w:792,\n    h:479\n  },\n  {\n    p:\"custom-concrete-ramp-sink-by-concrete-wave-design-bath-portfolio-26.jpg\",\n    w:792,\n    h:479\n  }\n];\n\n\n\n\nexport const JobTemplates = {\n\n  \"Estimation\": {\n    default_trade: \"Project Manager\",\n    name: \"Estimation\",\n    id: \"Estimation\",\n    icon: \"fas fa-clipboard-list\"\n  },\n  \"Sign Contract\": {\n    default_trade: \"Customer\",\n    name: \"Sign Contract\",\n    id: \"Sign Contract\",\n    icon: \"fas fa-file-signature\"\n  },\n  \"Pre Deposit\": {\n    default_trade: \"Customer\",\n    name: \"Pre Deposit\",\n    id: \"Pre Deposit\",\n    icon: \"fas fa-dollar-sign\"\n  },\n  \"Demolition-tile-floor\": {\n    default_trade: \"Laborer\",\n    name: \"Demolition - Tile Floor\",\n    id: \"Demolition-tile-floor\",\n    icon: \"fas fa-hammer\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Demolition-tile-shower\": {\n    default_trade: \"Laborer\",\n    name: \"Demolition - Tile Shower\",\n    id: \"Demolition-tile-shower\",\n    icon: \"fas fa-hammer\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Demolition-vanity\": {\n    default_trade: \"Laborer\",\n    name: \"Demolition - Vanity\",\n    id: \"Demolition-vanity\",\n    icon: \"fas fa-hammer\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Demolition-cabinet\": {\n    default_trade: \"Laborer\",\n    name: \"Demolition - Cabinet\",\n    id: \"Demolition-cabinet\",\n    icon: \"fas fa-hammer\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Demolition-toilet\": {\n    default_trade: \"Laborer\",\n    name: \"Demolition - Toilet\",\n    id: \"Demolition-toilet\",\n    icon: \"fas fa-hammer\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Protection\": {\n    default_trade: \"Laborer\",\n    name: \"Protection\",\n    id: \"Protection\",\n    icon: \"fas fa-tape\"\n  },\n  \"Plumbing-shower-valve\": {\n    default_trade: \"Plumber\",\n    name: \"Plumbing - Shower Valve\",\n    id: \"Plumbing-shower-valve\",\n    icon: \"fas fa-tint\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Drywall-prep\": {\n    default_trade: \"Drywall Installer\",\n    name: \"Drywall - Prep\",\n    id: \"Drywall-prep\",\n    icon: \"fas fa-brush\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Tile-cement-board\": {\n    default_trade: \"Tile Setter\",\n    name: \"Tile - Cement Board\",\n    id: \"Tile-cement-board\",\n    icon: \"fas fa-toolbox\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Tile-water-proofing\": {\n    default_trade: \"Tile Setter\",\n    name: \"Tile - Water Proofing\",\n    id: \"Tile-water-proofing\",\n    icon: \"fas fa-toolbox\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Drywall-texture\": {\n    default_trade: \"Drywall Installer\",\n    name: \"Drywall - Texture\",\n    id: \"Drywall-texture\",\n    icon: \"fas fa-brush\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Drywall-paint\": {\n    default_trade: \"Drywall Installer\",\n    name: \"Drywall - Paint\",\n    id: \"Drywall-paint\",\n    icon: \"fas fa-brush\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Tile-flooring\": {\n    default_trade: \"Tile Setter\",\n    name: \"Tile - Flooring\",\n    id: \"Tile-flooring\",\n    icon: \"fas fa-toolbox\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Tile-shower-pan\": {\n    default_trade: \"Tile Setter\",\n    name: \"Tile - Shower Pan\",\n    id: \"Tile-shower-pan\",\n    icon: \"fas fa-toolbox\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Tile-shower-walls\": {\n    default_trade: \"Tile Setter\",\n    name: \"Tile - Shower Walls\",\n    id: \"Tile-shower-walls\",\n    icon: \"fas fa-toolbox\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Carpentry-vanity-install\": {\n    default_trade: \"Carpenter\",\n    name: \"Carpentry - Vanity Install\",\n    id: \"Carpentry-vanity-install\",\n    icon: \"fas fa-toolbox\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Carpentry-cabinet-install\": {\n    default_trade: \"Carpenter\",\n    name: \"Carpentry - Cabinet Install\",\n    id: \"Carpentry-cabinet-install\",\n    icon: \"fas fa-toolbox\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Countertop-quartz-install\": {\n    default_trade: \"Countertop Installer\",\n    name: \"Countertop - Quartz Install\",\n    id: \"Countertop-quartz-install\",\n    icon: \"fas fa-toolbox\",\n    data: [\n      {\n        name: \"square footage\",\n        units: \"sqft\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Plumbing-shower-trim\": {\n    default_trade: \"Plumber\",\n    name: \"Plumbing - Shower Trim\",\n    id: \"Plumbing-shower-trim\",\n    icon: \"fas fa-tint\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Plumbing-toilet-install\": {\n    default_trade: \"Plumber\",\n    name: \"Plumbing - Toilet Install\",\n    id: \"Plumbing-toilet-install\",\n    icon: \"fas fa-tint\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Plumbing-sink-hook-up\": {\n    default_trade: \"Plumber\",\n    name: \"Plumbing - Sink Hook Up\",\n    id: \"Plumbing-sink-hook-up\",\n    icon: \"fas fa-tint\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Plumbing-faucet-install\": {\n    default_trade: \"Plumber\",\n    name: \"Plumbing - Faucet Install\",\n    id: \"Plumbing-faucet-install\",\n    icon: \"fas fa-tint\",\n    data: [\n      {\n        name: \"quantity\",\n        units: \"qty\",\n        type: \"number\",\n        value: \"\"\n      }\n    ]\n  },\n  \"Clean Up\": {\n    default_trade: \"Laborer\",\n    name: \"Clean Up\",\n    id: \"Clean Up\",\n    icon: \"fas fa-broom\"\n  },\n  \"Inspection\": {\n    default_trade: \"Project Manager\",\n    name: \"Inspection\",\n    id: \"Inspection\",\n    icon: \"fas fa-clipboard-list\"\n  },\n  \"Final Payment\": {\n    default_trade: \"Customer\",\n    name: \"Final Payment\",\n    id: \"Final Payment\",\n    icon: \"fas fa-dollar-sign\"\n  },\n\n\n  // \"Protection\": {\n  //   default_trade: \"Laborer\",\n  //   name: \"Protection\",\n  //   id: \"Protection\",\n  //   icon: \"fas fa-tape\"\n  // },\n  // \"Tile Instalation\": {\n  //   default_trade: \"Tile Setter\",\n  //   name: \"Tile Instalation\",\n  //   id: \"Tile Instalation\",\n  //   icon: \"fas fa-toolbox\",\n  //   data: [\n  //     {\n  //       name: \"square footage\",\n  //       units: \"sqft\",\n  //       type: \"number\",\n  //       value: \"\"\n  //     }\n  //   ]\n  // },\n  // \"Hardwood Instalation\": {\n  //   default_trade: \"Hardwood Installer\",\n  //   name: \"Hardwood Instalation\",\n  //   id: \"Hardwood Instalation\",\n  //   icon: \"fas fa-toolbox\",\n  //   data: [\n  //     {\n  //       name: \"square footage\",\n  //       units: \"sqft\",\n  //       type: \"number\",\n  //       value: \"\"\n  //     }\n  //   ]\n  // },\n  // \"Plumbing\": {\n  //   default_trade: \"Plumber\",\n  //   name: \"Plumbing\",\n  //   id: \"Plumbing\",\n  //   icon: \"fas fa-tint\"\n  // },\n  // \"Clean Up\": {\n  //   default_trade: \"Laborer\",\n  //   name: \"Clean Up\",\n  //   id: \"Clean Up\",\n  //   icon: \"fas fa-broom\"\n  // },\n  // \"Inspection\": {\n  //   default_trade: \"Project Manager\",\n  //   name: \"Inspection\",\n  //   id: \"Inspection\",\n  //   icon: \"fas fa-clipboard-list\"\n  // },\n  // \"Final Payment\": {\n  //   default_trade: \"Customer\",\n  //   name: \"Final Payment\",\n  //   id: \"Final Payment\",\n  //   icon: \"fas fa-dollar-sign\"\n  // }\n}\n\n\nexport const ProjectTemplates = {\n  \"bathroom-remodel\": {\n    id: \"bathroom-remodel\",\n    name: \"Bathroom Remodel\",\n    jobs: [\n      \"Estimation\",\n      \"Sign Contract\",\n      \"Pre Deposit\",\n      \"Demolition-tile-floor\",\n      \"Demolition-tile-shower\",\n      \"Demolition-vanity\",\n      \"Demolition-toilet\",\n      \"Protection\",\n      \"Plumbing-shower-valve\",\n      \"Drywall-prep\",\n      \"Tile-cement-board\",\n      \"Tile-water-proofing\",\n      \"Drywall-texture\",\n      \"Drywall-paint\",\n      \"Tile-flooring\",\n      \"Tile-shower-pan\",\n      \"Tile-shower-walls\",\n      \"Carpentry-vanity-install\",\n      \"Countertop-quartz-install\",\n      \"Plumbing-shower-trim\",\n      \"Plumbing-toilet-install\",\n      \"Plumbing-sink-hook-up\",\n      \"Plumbing-faucet-install\",\n      \"Clean Up\",\n      \"Inspection\",\n      \"Final Payment\"\n    ]\n  },\n  \"kitchen-remodel\": {\n    id: \"kitchen-remodel\",\n    name: \"Kitchen Remodel\",\n    jobs: [\n      \"Estimation\",\n      \"Sign Contract\",\n      \"Pre Deposit\",\n      \"Demolition-tile-floor\",\n      \"Demolition-cabinet\",\n      \"Protection\",\n      \"Drywall-prep\",\n      \"Tile-cement-board\",\n      \"Tile-water-proofing\",\n      \"Drywall-texture\",\n      \"Drywall-paint\",\n      \"Tile-flooring\",\n      \"Carpentry-cabinet-install\",\n      \"Countertop-quartz-install\",\n      \"Plumbing-sink-hook-up\",\n      \"Plumbing-faucet-install\",\n      \"Clean Up\",\n      \"Inspection\",\n      \"Final Payment\"\n    ]\n  }\n};\n\nexport const TradeDistributor = [0,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9];\n\nexport const Trades = [\n  \"Project Manager\",\n  \"Operations Manager\",\n  \"Plumber\",\n  \"Technician\",\n  \"Electrician\",\n  \"Laborer\",\n  \"Dry Wall Installer\",\n  \"Tile Setter\",\n  \"Hardwood Installer\",\n  \"Framer\"\n];\n\nconst JobDefaultTrades = {\n  \"Sign Contract\": \"Customer\",\n  \"Pre Deposit\": \"Customer\",\n  \"Estimation\": \"Project Manager\",\n  \"Demolition\": \"Laborer\",\n  \"Protection\": \"Laborer\",\n  \"Tile Installation\": \"Tile Setter\",\n  \"Hardwood Installation\": \"Hardwood Installer\",\n  \"Plumbing\": \"Plumber\",\n  \"Clean Up\": \"Laborer\",\n  \"Inspection\": \"Project Manager\",\n  \"Final Payment\": \"Customer\"\n};\n\nconst JobDefaultTasks = {\n  \"Estimation\": [\"Complete Estimation\"],\n  \"Demolition\": [\"Break it down\"],\n  \"Protection\": [\"Lay down plastic\", \"Tape up walls\"],\n  \"Tile Installation\": [\"Put the tile in\"],\n  \"Hardwood Installation\": [\"Put the hardwood in\"],\n  \"Plumbing\": [\"Fix the pipes\"],\n  \"Clean Up\": [\"Clean up mess\"],\n  \"Inspection\": [\"Complete Inspection\"],\n};\n\nconst JobIcons = {\n  \"Sign Contract\": \"fas fa-file-signature\",\n  \"Pre Deposit\": \"fas fa-dollar-sign\",\n  \"Estimation\": \"fas fa-clipboard-list\",\n  \"Demolition\": \"fas fa-hammer\",\n  \"Protection\": \"fas fa-tape\",\n  \"Tile Instalation\": \"fas fa-toolbox\",\n  \"Plumbing\": \"fas fa-tint\",\n  \"Clean Up\": \"fas fa-broom\",\n  \"Inspection\": \"fas fa-clipboard-list\",\n  \"Final Payment\": \"fas fa-dollar-sign\"\n};\nconst DefaultJobIcon = \"fas fa-toolbox\";\n\nexport function GenerateTasks (name, scheduled, progress, job_id) {\n  let tasks = [];\n  let task_id = \"\";\n  if (JobDefaultTasks[name]) {\n    for (let t=0; t<JobDefaultTasks[name].length; t++) {\n      task_id = \"task_\" + GenerateCode();\n      TasksById[task_id] = {\n        name: JobDefaultTasks[name][t],\n        description: '<p>' + JobDefaultTasks[name][t] + ' is a cool task.</p>',\n        completed: scheduled && progress ? !!(Math.round(Math.random()*100)%5) : false,\n        id: task_id,\n        job_id: job_id\n      };\n      tasks.push(task_id);\n    }\n  }\n  return tasks;\n}\n\nlet job_iterator = 0;\nexport function GenerateJob (double, project, name, date, scheduled, progress) {\n  job_iterator++;\n  var start_time = 6+(Math.random()*DAILY_WORK_HOURS/4);\n  var end_time = Math.max(1,start_time+Math.random()*DAILY_WORK_HOURS);\n  var id = \"t\"+job_iterator+\"p\"+project.id;\n  //var scheduled = Math.round(Math.random()*100) % 4;\n  let default_trade = JobDefaultTrades[name];\n  let user;\n  if (scheduled && default_trade && UsersByTrade[default_trade]) {\n    if (default_trade === \"Customer\") {\n      for (var u=0; u<UsersByTrade[default_trade].length; u++) {\n        if (project.id === UsersByTrade[default_trade][u].visible_projects[0]) {\n          user = UsersByTrade[default_trade][u];\n        }\n      }\n      if (!user) {\n        scheduled = false;\n      }\n    } else {\n      user = UsersByTrade[default_trade][Math.floor(Math.random()*UsersByTrade[default_trade].length)];\n    }\n  } else {\n    scheduled = false;\n  }\n\n  let tasks = GenerateTasks(name, scheduled, progress, id);\n\n  progress = 0;\n  for (let t=0; t<tasks.length; t++) {\n    if (tasks[t].completed) {\n      progress++;\n    }\n  }\n\n  var job = {\n    start_dates: double ?\n      [\n          new Date(date.getFullYear(), date.getMonth(), date.getDate(), start_time ),\n          new Date(date.getFullYear(), date.getMonth(), date.getDate()+1, start_time ),\n          new Date(date.getFullYear(), date.getMonth(), date.getDate()+2, start_time )\n      ] : scheduled ?\n        [new Date(date.getFullYear(), date.getMonth(), date.getDate(), start_time )]\n      : [],\n    end_dates: double ?\n      [\n          new Date(date.getFullYear(), date.getMonth(), date.getDate(), end_time, -Math.round(Math.random()*10) ),\n          new Date(date.getFullYear(), date.getMonth(), date.getDate()+1, end_time, -Math.round(Math.random()*10) ),\n          new Date(date.getFullYear(), date.getMonth(), date.getDate()+2, end_time, -Math.round(Math.random()*10) )\n      ] : scheduled ? [new Date(date.getFullYear(), date.getMonth(), date.getDate(), end_time, -Math.round(Math.random()*10) )] : [],\n    assigned_user: scheduled ? user.id : null,\n    project_id: project.id,\n    project_color: project.color,\n    project_name: project.name,\n    default_trade: default_trade,\n    name: name,\n    icon: JobIcons[name] || DefaultJobIcon,\n    progress: scheduled ? Math.round(100*(progress / tasks.length)) || 0 : 0,//scheduled ? Math.min(Math.round(Math.random()*200),100) : 0,\n    id: id,\n    tasks: tasks\n  };\n  if (user) {\n    user.jobs.push(job.id);\n  }\n\n  return job;\n}\n\nexport let JobsByMonth = {\n};\n\nexport let PhotosById = {\n};\nexport let JobsById = {\n};\n\nexport let TasksById = {\n};\n\nexport let UsersById = {\n};\n\nexport let UsersByTrade = {\n  Customer:[]\n};\n\n\nexport function CreateCustomerUser (project) {\n  var id =  Math.random();\n  var name = random_names[Math.floor(Math.random()*random_names.length)].split(\" \");\n  const user = {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": id,\n    \"first_name\":name[0],\n  \t\"last_name\": project.name.substr(0,project.name.indexOf(' ')),\n  \t\"trade_name\": \"Customer\",\n    \"address\": \"1234 N 360 St. City, State, 55555\",\n    \"billing_address\": \"1234 N 360 St. City, State, 55555\",\n    visible_projects: [project.id]\n  };\n\n  UsersByTrade[\"Customer\"].push(user);\n  // Users.push(user);\n  UsersById[id] = user;\n  return user;\n}\n\nexport function GenerateProjectJobs () {\n\n  for (var u=0; u<Users.length; u++) {\n    UsersById[Users[u].id] = Users[u];\n  }\n\n  for (u=0; u<random_names.length; u++) {\n    var id = \"user\"+Math.random();\n    var names = random_names[u].split(\" \");\n    var trade_name = Trades[TradeDistributor[Math.floor(Math.random()*TradeDistributor.length)]];\n    UsersById[id] = {\n      \"jobs\":[],\n      \"tasks\":[],\n      \"roles\":trade_name===\"Project Manager\"?[\"project-manager\"]:[],\n      \"id\": id,\n      \"first_name\": names[0],\n    \t\"last_name\": names[1],\n      \"email\": names[0] + \".\" + names[1] + \"@construction.com\",\n      \"photo_uri\": \"https://randomuser.me/api/portraits/\"+ (names[2]===\"m\" ? \"men\" : \"women\") +\"/\"+ Math.ceil(Math.random()*80+12) +\".jpg\",\n    \t\"trade_name\": trade_name\n    };\n  }\n\n\n  const today = new Date();\n  let weekend_ref = {};\n  for (let w=0; w<WEEKEND.length; w++) {\n    weekend_ref[WEEKEND[w]] = true;\n  }\n  for (let u in UsersById) {\n    const user = UsersById[u];\n    UsersByTrade[user.trade_name] = UsersByTrade[user.trade_name] || [];\n    UsersByTrade[user.trade_name].push(user);\n  }\n  for (let p=0; p<ProjectData.length; p++) {\n    let project = ProjectData[p];\n    let start_date = new Date(today.getFullYear(), today.getMonth(), today.getDate()-(p*2));//Math.round(project.temp_progress*2));\n    let weekend_adjuster = 0;\n\n    var customer = CreateCustomerUser(project);\n\n    project.customer_id = customer.id;\n    project.address = customer.address;\n\n    project.blob_uri = \"./blob/photos/\";\n    project.photos = [];\n    for (let ph=0; ph<photos.length; ph++) {\n      let photo = {\n        src: project.blob_uri + photos[ph].p,\n        width: photos[ph].w,\n        height: photos[ph].h,\n        name: \"A job well done.\",\n        description: \"We need some more work like this around here!\"\n      };\n      photo.id = \"photo_\"+Math.random();\n      PhotosById[photo.id] = photo;\n      project.photos.push(photo.id);\n    }\n\n    for (let t=0; t<project.temp_jobs.length; t++) {\n\n      let date = new Date(start_date.getFullYear(), start_date.getMonth(), start_date.getDate()+t+weekend_adjuster);\n      let progress = t < p ? 100 :\n                      t === p ? Math.min(Math.round(Math.random()*100),100) : 0;\n      while (weekend_ref[date.getDay()]) {\n        weekend_adjuster++;\n        date = new Date(start_date.getFullYear(), start_date.getMonth(), start_date.getDate()+t+weekend_adjuster);\n      }\n      const job = GenerateJob(\n        (p===0 && t===3),\n        project,\n        project.temp_jobs[t],\n        date,\n        (progress === 0 ? !!Math.round(Math.random()*100%4) : true),\n        progress\n      );\n      project.jobs.push(job.id);\n      if (!JobsByMonth[date.getFullYear() + \"_\" + date.getMonth()]) {\n        JobsByMonth[date.getFullYear() + \"_\" + date.getMonth()] = [];\n      }\n      JobsByMonth[date.getFullYear() + \"_\" + date.getMonth()].push(job);\n      JobsById[job.id] = job;\n    }\n  }\n}\n\n\nexport let ProjectData = [\n  {\n    name: \"Scott Livingroom Remodel\",\n    color: GenerateRandomColor(),//\"hsl(\"+GenerateRandomColor()+\", 80%, 40%)\",\n    id: GenerateCode(),\n    jobs:[],\n    tasks:[],\n    temp_progress: Math.round(Math.random()*100) % 5,\n    temp_jobs: [\n      \"Sign Contract\",\n      \"Pre Deposit\",\n      \"Estimation\",\n      \"Demolition\",\n      \"Protection\",\n      \"Tile Installation\",\n      \"Clean Up\",\n      \"Inspection\",\n      \"Final Payment\"\n    ]\n  },\n  {\n    name: \"Johnson Kitchen Remodel\",\n    color: GenerateRandomColor(),//\"hsl(\"+GenerateRandomColor()+\", 80%, 40%)\",\n    id: GenerateCode(),\n    jobs:[],\n    tasks:[],\n    temp_progress: Math.round(Math.random()*100) % 5,\n    temp_jobs: [\n      \"Sign Contract\",\n      \"Pre Deposit\",\n      \"Estimation\",\n      \"Demolition\",\n      \"Protection\",\n      \"Tile Installation\",\n      \"Plumbing\",\n      \"Clean Up\",\n      \"Inspection\",\n      \"Final Payment\"\n    ]\n  },\n  {\n    name: \"Smith Bathroom Remodel\",\n    color: GenerateRandomColor(),//\"hsl(\"+GenerateRandomColor()+\", 80%, 40%)\",\n    id: GenerateCode(),\n    jobs:[],\n    tasks:[],\n    temp_progress: Math.round(Math.random()*100) % 5,\n    temp_jobs: [\n      \"Sign Contract\",\n      \"Pre Deposit\",\n      \"Estimation\",\n      \"Demolition\",\n      \"Protection\",\n      \"Tile Installation\",\n      \"Plumbing\",\n      \"Clean Up\",\n      \"Inspection\",\n      \"Final Payment\"\n    ]\n  },\n  {\n    name: \"Osborn Kitchen Tile\",\n    color: GenerateRandomColor(),//\"hsl(\"+GenerateRandomColor()+\", 80%, 40%)\",\n    id: GenerateCode(),\n    jobs:[],\n    tasks:[],\n    temp_progress: Math.round(Math.random()*100) % 5,\n    temp_jobs: [\n      \"Sign Contract\",\n      \"Pre Deposit\",\n      \"Estimation\",\n      \"Demolition\",\n      \"Protection\",\n      \"Hardwood Installation\",\n      \"Plumbing\",\n      \"Clean Up\",\n      \"Inspection\",\n      \"Final Payment\"\n    ]\n  },\n  {\n    name: \"Harmon Home Exterior\",\n    color: GenerateRandomColor(),//\"hsl(\"+GenerateRandomColor()+\", 80%, 40%)\",\n    id: GenerateCode(),\n    jobs:[],\n    tasks:[],\n    temp_progress: Math.round(Math.random()*100) % 5,\n    temp_jobs: [\n      \"Sign Contract\",\n      \"Pre Deposit\",\n      \"Estimation\",\n      \"Demolition\",\n      \"Protection\",\n      \"Tile Installation\",\n      \"Clean Up\",\n      \"Inspection\",\n      \"Final Payment\"\n    ]\n  },\n  {\n    name: \"Burke Bathroom Remodel\",\n    color: GenerateRandomColor(),//\"hsl(\"+GenerateRandomColor()+\", 80%, 40%)\",\n    id: GenerateCode(),\n    jobs:[],\n    tasks:[],\n    temp_progress: Math.round(Math.random()*100) % 5,\n    temp_jobs: [\n      \"Sign Contract\",\n      \"Pre Deposit\",\n      \"Estimation\",\n      \"Demolition\",\n      \"Protection\",\n      \"Tile Installation\",\n      \"Plumbing\",\n      \"Clean Up\",\n      \"Inspection\",\n      \"Final Payment\"\n    ]\n  },\n];\n\n\n\nexport const Users = [\n  {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": \"user_\"+GenerateCode(),\n    \"first_name\":\"Tmc Builders Inc\",\n    \"last_name\":\"\",\n    \"trade_name\":\"Contractor,Plumber\"\n  },\n  {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": \"user_\"+GenerateCode(),\n    \"first_name\":\"Wood N'Things Llc\",\n    \"last_name\":\"\",\n    \"trade_name\":\"Contractor\"\n  },\n  {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": \"user_\"+GenerateCode(),\n    \"first_name\":\"Cabinet Pros\",\n    \"last_name\":\"\",\n    \"trade_name\":\"Contractor\"\n  },\n  {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": \"user_\"+GenerateCode(),\n    \"first_name\":\"Gilman Contractors Inc\",\n    \"last_name\":\"\",\n    \"trade_name\":\"Contractor\"\n  },\n  {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": \"user_\"+GenerateCode(),\n    \"first_name\":\"Crowne Closets & Cabinetry\",\n    \"last_name\":\"\",\n    \"trade_name\":\"Contractor\"\n  },\n  {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": \"user_\"+GenerateCode(),\n    \"first_name\":\"The Structures Group Southwest Inc\",\n    \"last_name\":\"\",\n    \"trade_name\":\"Contractor\"\n  },\n  {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": \"user_\"+GenerateCode(),\n    \"first_name\":\"B Smith Construction Inc\",\n    \"last_name\":\"\",\n    \"trade_name\":\"Contractor\"\n  },\n  {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": \"user_\"+GenerateCode(),\n    \"first_name\":\"Turner CO\",\n    \"last_name\":\"\",\n    \"trade_name\":\"Contractor\"\n  },\n  {\n    \"jobs\":[],\n    \"tasks\":[],\n    \"id\": \"user_\"+GenerateCode(),\n    \"first_name\":\"Tower Mechanical Sv\",\n    \"last_name\":\"\",\n    \"trade_name\":\"Contractor\"\n  }\n];\n\n\n\nGenerateProjectJobs();\n\n\n\n\n\nexport const LeadList = {};\n\nconst lead_status = [\n  \"new\",\n  \"scheduled\",\n  \"pending\",\n  \"estimate\",\n  \"approved\",\n  \"rejected\"\n]\nconst max_heat = {\n  new: 3,\n  scheduled: 7,\n  pending: 10,\n  estimate: 8,\n  approved: 6,\n  rejected: 3,\n};\nconst number_of_leads = {\n  0:20,\n  1:10,\n  2:5,\n  3:5,\n  4:6,\n  5:4,\n};\n\nfunction GenerateLeadsData () {\n  let id;\n  let name_counter = 0;\n  const today = new Date();\n  for (var i in number_of_leads) {\n    for (var l=0; l<number_of_leads[i]; l++) {\n      let name = name_counter<random_names.length ? random_names[name_counter] : random_names[Math.floor(Math.random()*random_names.length)];\n      let name_list = name.split(\" \");\n\n      id = name_list[0]+\"_lead_\"+GenerateCode();\n      const status_value = i;//Math.floor(Math.random()*lead_status.length);\n      // const added_date = new Date(today.getFullYear(), today.getMonth(), today.getDate()-Math.floor(Math.random()*5*status_value));\n      let dates = {};\n      let last_date = today;\n      for (let l=status_value; l>=0; l--) {\n        last_date = new Date(last_date.getFullYear(), last_date.getMonth(), last_date.getDate()-Math.floor((Math.random()*max_heat[lead_status[status_value]])));\n        dates[lead_status[l]] = last_date;\n      }\n\n      LeadList[id] = {\n        id: id,\n        index: l,\n        new_date: dates.new,\n        scheduled_date: dates.scheduled,\n        pending_date: dates.pending,\n        estimate_date: dates.estimate,\n        approved_date: dates.approved,\n        rejected_date: dates.rejected,\n        status: lead_status[status_value],\n        first_name: name_list[0],\n        last_name: name_list[1],\n        name: name_list[0] + \" \" + name_list[1] + \" Project\",\n        jobs:[]\n      }\n      name_counter++\n    }\n  }\n}\n\n\nGenerateLeadsData();\n","import React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { editLead, editProject, addJob, updateJobsData, updateLeadsData, updateUsersData, updateProjectsData, selectJob } from '../actions/actions';\n\n\nimport {DragDropContext } from 'react-beautiful-dnd';\n\nimport {GenerateRandomColor, GenerateCode} from '../utilities/data';\n\n\nconst move = (source, destination, droppableSource, droppableDestination) => {\n  const status_key = {\n    \"new_leads\":\"new\",\n    \"scheduled_leads\":\"scheduled\",\n    \"pending_leads\":\"pending\",\n    \"estimate_leads\":\"estimate\",\n    \"approved_leads\":\"approved\",\n    \"rejected_leads\":\"rejected\",\n    \"other_leads\":\"\"\n  }\n  const sourceClone = Array.from(source);\n  const destClone = Array.from(destination);\n  const [removed] = sourceClone.splice(droppableSource.index, 1);\n\n  removed.status = status_key[droppableDestination.droppableId];\n  removed[removed.status + \"_date\"] = removed[removed.status + \"_date\"] || new Date();\n\n  destClone.splice(droppableDestination.index, 0, removed);\n\n  const result = {};\n  result.source = sourceClone;\n  result.dest = destClone;\n  result.removed = removed;\n\n  return result;\n};\n\n\nconst reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n\n    return result;\n};\n\nclass DragDropContainer extends Component {\n\n  onBeforeDragStart = () => {\n    /*...*/\n  };\n\n  onDragStart = () => {\n    /*...*/\n  };\n  onDragUpdate = () => {\n    /*...*/\n  };\n  onDragEnd = (lead_groups) => (result) => {\n    const { source, destination } = result;\n    console.log(result);\n\n    // dropped outside the list\n    if (!destination) {\n      return;\n    }\n\n    if (result.type===\"TEMPLATE\") {\n      if (source.droppableId === \"template_jobs\" && destination.droppableId === \"timeline\") {\n        if (this.props.selected_lead) {\n          let jobs = [...this.props.all_leads_data[this.props.selected_lead].jobs];\n          let template_job;\n          let job_id;\n          let job;\n\n          if (!this.props.all_project_templates_data[result.draggableId]) {\n\n            job_id = \"job\"+GenerateCode();\n            jobs.splice(destination.index, 0, job_id);\n            template_job = {...this.props.all_job_templates_data[result.draggableId]};\n            job = {\n              ...template_job,\n              start_dates: [],\n              end_dates: [],\n              assigned_user: null,\n              project_id: this.props.selected_lead,\n              project_color: null,\n              project_name: null,\n              progress: 0,\n              id: job_id,\n              tasks: template_job.tasks || []\n            };\n            this.props.addJob(job_id, job, this.props.selected_lead);\n\n          } else {\n            let template_jobs = this.props.all_project_templates_data[result.draggableId].jobs;\n            for (var j=template_jobs.length-1; j>=0; j--) {\n              job_id = \"job\"+GenerateCode();\n              jobs.splice(destination.index, 0, job_id);\n              template_job = {...this.props.all_job_templates_data[template_jobs[j]]};\n              job = {\n                ...template_job,\n                start_dates: [],\n                end_dates: [],\n                assigned_user: null,\n                project_id: this.props.selected_lead,\n                project_color: null,\n                project_name: null,\n                progress: 0,\n                id: job_id,\n                tasks: template_job.tasks || []\n              };\n              this.props.addJob(job_id, job, this.props.selected_lead);\n            }\n          }\n\n          this.props.editLead(this.props.selected_lead, {jobs:jobs});\n        }\n      } else if (source.droppableId === \"timeline\" && destination.droppableId === \"timeline\") {\n        let jobs = [...this.props.all_leads_data[this.props.selected_lead].jobs];\n        const job = {...jobs.splice(source.index, 1)[0]};\n\n        jobs.splice(destination.index, 0, job);\n\n        console.log(job);\n\n        this.props.editLead(this.props.selected_lead, {jobs:jobs});\n      }\n    }\n    else if (result.type===\"JOB\") {\n      if (this.props.selected_project) {\n\n        let template_job;\n        let job_id;\n        let job;\n\n        if (!this.props.all_project_templates_data[result.draggableId]) {\n          template_job = {...this.props.all_job_templates_data[result.draggableId]};\n          job_id = \"job\"+GenerateCode();\n          job = {\n            start_dates: [],\n            end_dates: [],\n            assigned_user: null,\n            project_id: this.props.selected_project,\n            project_color: this.props.all_projects_data[this.props.selected_project].color,\n            project_name: this.props.all_projects_data[this.props.selected_project].name,\n            default_trade: template_job.default_trade,\n            name: template_job.name,\n            description: template_job.description,\n            icon: template_job.icon,\n            progress: 0,\n            id: job_id,\n            tasks: template_job.tasks || []\n          };\n          this.props.addJob(job_id, job, this.props.selected_project);\n        }\n        else {\n          let template_jobs = this.props.all_project_templates_data[result.draggableId].jobs;\n\n          for (let j=0; j<template_jobs.length; j++) {\n            template_job = this.props.all_job_templates_data[template_jobs[j]];\n            job_id = \"job\"+GenerateCode();\n\n            job = {\n              start_dates: [],\n              end_dates: [],\n              assigned_user: null,\n              project_id: this.props.selected_project,\n              project_color: this.props.all_projects_data[this.props.selected_project].color,\n              project_name: this.props.all_projects_data[this.props.selected_project].name,\n              default_trade: template_job.default_trade,\n              name: template_job.name,\n              description: template_job.description,\n              icon: template_job.icon,\n              progress: 0,\n              id: job_id,\n              tasks: template_job.tasks || []\n            };\n            this.props.addJob(job_id, job, this.props.selected_project);\n          }\n        }\n      }\n    }\n    else if (result.type===\"LEAD\") {\n      const status_key = {\n        \"new_leads\":\"new\",\n        \"scheduled_leads\":\"scheduled\",\n        \"pending_leads\":\"pending\",\n        \"estimate_leads\":\"estimate\",\n        \"approved_leads\":\"approved\",\n        \"rejected_leads\":\"rejected\",\n        \"other_leads\":\"\"\n      }\n\n      let lead_groups = {\n        new_leads: [],\n        pending_leads: [],\n        scheduled_leads: [],\n        estimate_leads: [],\n        approved_leads: [],\n        rejected_leads: [],\n        other_leads: []\n      }\n      for (let l in this.props.all_leads_data) {\n        switch (this.props.all_leads_data[l].status) {\n          case 'new':\n            lead_groups.new_leads.push({...this.props.all_leads_data[l]});\n            break;\n          case 'pending':\n            lead_groups.pending_leads.push({...this.props.all_leads_data[l]});\n            break;\n          case 'scheduled':\n            lead_groups.scheduled_leads.push({...this.props.all_leads_data[l]});\n            break;\n          case 'estimate':\n            lead_groups.estimate_leads.push({...this.props.all_leads_data[l]});\n            break;\n          case 'approved':\n            lead_groups.approved_leads.push({...this.props.all_leads_data[l]});\n            break;\n          case 'rejected':\n            lead_groups.rejected_leads.push({...this.props.all_leads_data[l]});\n            break;\n          default:\n            lead_groups.other_leads.push({...this.props.all_leads_data[l]});\n        }\n      }\n\n      if (source.droppableId === destination.droppableId) {\n        const leads = [...lead_groups[destination.droppableId]];\n        const items = reorder(\n          leads,\n          source.index,\n          destination.index\n        );\n\n        this.props.updateLeadsData(items.reduce((obj, item, index) => {\n          item.index = index\n          obj[item.id] = item\n          return obj\n        }, {}));\n\n      } else if (destination.droppableId === \"project_leads\") {\n\n        let lead = {...this.props.all_leads_data[result.draggableId]};\n        lead.status = status_key[destination.droppableId];\n        lead[lead.status + \"_date\"] = lead[lead.status + \"_date\"] || new Date();\n\n        this.props.editLead(lead.id, lead);\n\n\n        let new_project = {};\n\n\n\n        let id=GenerateCode();\n        const project_color = GenerateRandomColor();\n        let user_id = Math.random();\n        let customer = {\n          ...lead,\n          id: user_id,\n          trade_name: \"Customer\",\n          jobs: [],\n          tasks: []\n        }\n        let jobs = [];\n        if (this.props.all_leads_data[lead.id].jobs) {\n          let jobs_by_id = {};\n\n          const lead_jobs = this.props.all_leads_data[lead.id].jobs;\n          let template_job;\n\n          for (let j=0; j<lead_jobs.length; j++) {\n            template_job = lead_jobs[j];\n\n            jobs_by_id[template_job] = {\n              ...this.props.all_jobs_data[template_job],\n              project_id: id,\n              project_color: project_color,\n              project_name: lead.first_name + \" \" + lead.last_name + \" project\"\n            };\n            jobs.push(template_job);\n          }\n\n          this.props.updateJobsData(jobs_by_id);\n        }\n        new_project = {\n          name: lead.first_name + \" \" + lead.last_name + \" project\",\n          address: lead.address,\n          customer_id: user_id,\n          color: project_color,\n          id: id,\n          jobs: jobs,\n          tasks: [],\n          photos: [],\n          completed: false\n        }\n\n        this.props.updateUsersData({[user_id]: customer});\n\n        this.props.updateProjectsData({[id]: new_project});\n\n        // setTimeout(()=>{\n          this.props.selectJob(id, null);\n        // },1000);\n\n        // this.props.openProjectEditor(\"NEWPROJECT\", moved.removed);\n\n\n\n      } else if (destination.droppableId === \"archive_leads\") {\n\n\n        let lead = {...this.props.all_leads_data[result.draggableId]};\n        lead.status = status_key[destination.droppableId];\n        lead[lead.status + \"_date\"] = lead[lead.status + \"_date\"] || new Date();\n\n        this.props.editLead(lead.id, lead);\n\n      } else {\n\n        let lead = {...this.props.all_leads_data[result.draggableId]};\n        lead.status = status_key[destination.droppableId];\n        lead[lead.status + \"_date\"] = lead[lead.status + \"_date\"] || new Date();\n\n        this.props.editLead(lead.id, lead);\n      }\n    }\n  };\n\n  render() {\n\n\n    return (\n      <DragDropContext\n        onBeforeDragStart={this.onBeforeDragStart}\n        onDragStart={this.onDragStart}\n        onDragUpdate={this.onDragUpdate}\n        onDragEnd={this.onDragEnd()}\n      >\n        {this.props.children}\n      </DragDropContext>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    all_projects_data: state.state.all_projects_data,\n    all_leads_data: state.state.all_leads_data,\n    all_jobs_data: state.state.all_jobs_data,\n    all_project_templates_data: state.state.all_project_templates_data,\n    all_job_templates_data: state.state.all_job_templates_data,\n    selected_project: state.state.selected_project,\n    selected_lead: state.state.selected_lead\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({ editLead, editProject, addJob, updateJobsData, updateLeadsData, updateUsersData, updateProjectsData, selectJob}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DragDropContainer);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n  Link,\n  NavLink\n} from \"react-router-dom\";\nimport Logo from '../assets/images/logo.png'\n\nimport { signOutUser } from '../actions/actions';\n\nclass Header extends React.Component {\n  signOut = (e) => {\n    e.preventDefault();\n    window.clientApplication.logout();\n    this.props.signOutUser();\n  }\n\n  render () {\n    return (\n      <header>\n        <Link to=\"/\">\n          <img src={Logo} alt=\"Projul Logo\" />\n        </Link>\n        <label htmlFor=\"nav-menu-checkbox\" className=\"nav-button\">\n          <i className=\"fas fa-bars\" />\n        </label>\n        <nav>\n          { this.props.current_user && (\n            <ul className={\"flex-center\" + (!this.props.current_user || this.props.current_user.company_setup || this.props.current_user.user_setup?\"\":\" menu-placeholder\")}>\n              <li><NavLink exact to=\"/dashboard\"><i className=\"fas fa-home\"></i><span>dashboard</span></NavLink></li>\n              <li><NavLink exact to=\"/leads\"><i className=\"fas fa-phone\"></i><span>leads</span></NavLink></li>\n              <li><NavLink to=\"/projects\"><i className=\"fas fa-toolbox\"></i><span>projects</span></NavLink></li>\n              <li><NavLink exact to=\"/schedule\"><i className=\"far fa-calendar-alt\"></i><span>schedule</span></NavLink></li>\n              {(this.props.current_user.roles.indexOf(\"admin\")+1) && (<li><NavLink exact to=\"/admin\"><i className=\"fas fa-cog\"></i><span>admin</span></NavLink></li>)}\n              <li><a href=\"#sign-out\" onClick={this.signOut}><i className=\"fas fa-sign-out-alt\"></i><span>sign out</span></a></li>\n            </ul>\n          )}\n          <label htmlFor=\"nav-menu-checkbox\" className=\"close-cover\"></label>\n        </nav>\n      </header>\n    );\n  }\n}\n\n// { this.props.current_user && (\n//   <ul className={\"flex-center\" + (!this.props.current_user || this.props.current_user.company_setup || this.props.current_user.user_setup?\"\":\" menu-placeholder\")}>\n//\n//   </ul>\n// )}\n\nconst mapStateToProps = (state) => {\n  return {\n    current_user: state.state.current_user\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({signOutUser}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\n","import React from 'react'\n\nconst Footer = () => (\n  <footer>\n    Projul © {new Date().getFullYear()}\n  </footer>\n)\n\nexport default Footer\n","export function SplitString (string, to_character) {\n  if (string.indexOf(to_character) > 0) {\n    return string.substr(0,string.indexOf(to_character));\n  }\n  return string;\n}\n\nexport function URLString (str) {\n  str = str+\"\";\n  return str.replace(/\\s+/g, '-').toLowerCase();\n}\n","export const HOMEPAGE = \"/dashboard\";\n\nexport const applicationConfig = {\n  clientID: '097b5df2-496e-4e2a-87ac-dcb775b2b170',\n  authority: \"https://projul.b2clogin.com/projul.onmicrosoft.com/b2c_1_siupin\",\n  b2cScopes: [\"https://projul.onmicrosoft.com/dev-api/user_impersonation\"],\n  webApi: 'https://functionapp220181204090627.azurewebsites.net/api/Function1?name=Projul'\n};\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n  Link\n} from 'react-router-dom';\nimport {applicationConfig} from '../config/config';\n// import {SetToken} from '../utilities/cookies';\nimport {DefaultUser} from '../utilities/data';\n\nimport { signInUser } from '../actions/actions';\n\nclass PageSignin extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      signed_in: false,\n      loading: false\n    };\n    let _this = this;\n    setTimeout(()=>{\n      this.props.signInUser(DefaultUser);\n    }, 100);\n    window.clientApplication.acquireTokenSilent(applicationConfig.b2cScopes).then(function (accessToken) {\n        // callApiWithAccessToken(accessToken);\n\n        console.log(window.clientApplication.getUser());\n        console.log(\"Signed In!\");\n        _this.props.signInUser(DefaultUser);\n    }, function (error) {\n        // window.clientApplication.acquireTokenPopup(applicationConfig.b2cScopes).then(function (accessToken) {\n        //     callApiWithAccessToken(accessToken);\n        // }, function (error) {\n        //     logMessage(\"Error acquiring the access token to call the Web api:\\n\" + error);\n        // });\n        console.log(\"Error acquiring the access token to call the Web api:\\n\" + error);\n    })\n  }\n  SignIn = () => {\n    // setTimeout(()=>{\n    //   SetToken(\"Im a Token\");\n    //   this.props.signInUser(DefaultUser);\n    // },2000);\n    // document.location = \"https://projul.b2clogin.com/projul.onmicrosoft.com/oauth2/v2.0/authorize?p=b2c_1_siupin&response_type=code&state=&client_id=097b5df2-496e-4e2a-87ac-dcb775b2b170&scope=https://projul.onmicrosoft.com/dev-api/user_impersonation openid offline_access&redirect_uri=https://localhost.projul.com:3000\";\n    // document.location = \"https://projul.b2clogin.com/projul.onmicrosoft.com/oauth2/v2.0/authorize?p=b2c_1_siupin&response_type=token&state=&client_id=097b5df2-496e-4e2a-87ac-dcb775b2b170&scope=https://projul.onmicrosoft.com/dev-api/user_impersonation openid offline_access&redirect_uri=http://localhost:3000\";\n    // window.clientApplication.loginRedirect(applicationConfig.b2cScopes);\n\n\n\n    // const _this = this;\n    window.clientApplication.loginRedirect(applicationConfig.b2cScopes);\n    // window.clientApplication.loginPopup(applicationConfig.b2cScopes).then(function (idToken) {\n    //     window.clientApplication.acquireTokenSilent(applicationConfig.b2cScopes).then((accessToken) =>{\n    //         console.log(\"we're in!\");\n    //         _this.props.signInUser(DefaultUser);\n    //         // updateUI();\n    //     }, function (error) {\n    //         window.clientApplication.acquireTokenPopup(applicationConfig.b2cScopes).then(function (accessToken) {\n    //             // updateUI();\n    //         }, function (error) {\n    //             console.log(\"Error acquiring the popup:\\n\" + error);\n    //         });\n    //     })\n    // }, function (error) {\n    //     console.log(\"Error during login:\\n\" + error);\n    // });\n  };\n\n  render () {\n    return (\n      <section id=\"signin\" className={this.state.loading?\"loading\":\"\"}>\n        <div className=\"card\">\n          <h1>welcome back</h1>\n          <button className=\"button-sign-in load-button\" disabled={this.state.loading} onClick={e=>{\n            this.setState({loading: true});\n            this.SignIn();\n          }}><span>sign in</span><span></span></button>\n          <div>\n            <Link to=\"/signup\">Need an account? Try it out!</Link>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    current_user: state.state.current_user\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({signInUser}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageSignin);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { setupUser, setupCompany } from '../actions/actions';\n\nconst construction_types = [\n  \"General Contractor - Commercial\",\n  \"Custom Home Builder\",\n  \"Production Builder\",\n  \"Remodeler - Renovation\",\n  \"Design Build\",\n  \"Specialty Contractor\",\n  \"Subcontractor\",\n  \"Construction Manager\",\n  \"Property Developer\",\n  \"Real Estate Agent\",\n  \"Architect - Designer\",\n  \"Supplier - Vendor\",\n  \"Other\"\n];\n\nconst regions = [\n  \"North America\",\n  \"Latin America\",\n  \"South America\",\n  \"Europe\",\n  \"Australia\",\n  \"Middle East\",\n  \"Africa\",\n  \"Asia & India\",\n  \"Other\"\n];\n\nconst roles = [\n  \"Company Owner or Partner\",\n  \"Project Manager\",\n  \"Office Manager\",\n  \"Superintendent\",\n  \"Estimator\",\n  \"Architect\",\n  \"Engineer\",\n  \"Accountant\",\n  \"Other\"\n];\n\nclass PageSetup extends React.Component {\n  state = {\n    setup_complete: false,\n    loading: false,\n    slider_state: 0,\n    company_name: \"\",\n    phone: \"\",\n    construction_type: \"\",\n    region: \"\",\n    role: \"\"\n  };\n  componentDidMount() {\n    setTimeout(()=>{\n      this.setState({slider_state: 1});\n    }, 1000);\n  }\n\n  CompleteSetup = () => {\n    setTimeout(()=>{\n      // SetSetup(\"Setup Complete!\");\n      // this.setState({setup_complete: true});\n      this.props.setupUser();\n      this.props.setupCompany();\n    },2000);\n  };\n\n  HandleChange = (event) => {\n    let state = {};\n    state[event.target.name] = event.target.value;\n    this.setState(state);\n  }\n\n  HandleCheckboxChange = (event) => {\n    let state = {};\n    state[event.target.id] = event.target.checked;\n    this.setState(state);\n  }\n\n  HandleSubmit = (event) => {\n    event.preventDefault();\n    if (this.Validate()) {\n      this.setState({loading: true});\n      this.CompleteSetup();\n    }\n  }\n\n  Validate = (slide) => {\n    var slides = [\n      this.state.company_name !== \"\" &&\n      this.state.phone !== \"\" &&\n      this.state.construction_type !== \"\" &&\n      this.state.region !== \"\" &&\n      this.state.role !== \"\",\n      true\n    ];\n    if (slide) {\n      return slides[slide-1];\n    } else {\n      return slides[0] && slides[1];\n    }\n  }\n  render () {\n\n    const construction_type_options = [(<option disabled={true} key=\"default\">construction type</option>)];\n    const region_options = [(<option disabled={true} key=\"default\">region</option>)];\n    const role_options = [(<option disabled={true} key=\"default\">your role</option>)];\n\n    for (var type in construction_types) {\n      construction_type_options.push((\n        <option value={construction_types[type]} key={construction_types[type]}>{construction_types[type]}</option>\n      ));\n    }\n\n    for (var region in regions) {\n      region_options.push((\n        <option value={regions[region]} key={regions[region]}>{regions[region]}</option>\n      ));\n    }\n\n    for (var role in roles) {\n      role_options.push((\n        <option value={roles[role]} key={roles[role]}>{roles[role]}</option>\n      ));\n    }\n\n    return (\n      <section id=\"page-setup\">\n        <div>\n          <div className=\"card f-column f-space-between\">\n            <form className={\"slider t-center\" + (this.state.loading?\" loading\":\"\")} onSubmit={this.HandleSubmit}>\n              <div className={\"f-column\" + (this.state.slider_state === 1?\" active\":\"\")}>\n                <h2>Tell us a little about your construction company...</h2>\n                <div className=\"f-column f-center f-a-center f-grow\">\n                  <p>\n                    <input name=\"company_name\" type=\"text\" placeholder=\"company name\" value={this.state.company_name} onChange={this.HandleChange} />\n                  </p>\n                  <p>\n                    <input name=\"phone\" type=\"text\" placeholder=\"phone number\" value={this.state.phone} onChange={this.HandleChange} />\n                  </p>\n                  <p className=\"select-container\">\n                    <select className={this.state.construction_type?\"\":\"placeholder\"} defaultValue=\"construction type\" name=\"construction_type\" onChange={this.HandleChange}>\n                      {construction_type_options}\n                    </select>\n                    <i className=\"fas fa-caret-down\"></i>\n                  </p>\n                  <p className=\"select-container\">\n                    <select className={this.state.region?\"\":\"placeholder\"} defaultValue=\"region\" name=\"region\" onChange={this.HandleChange}>\n                      {region_options}\n                    </select>\n                    <i className=\"fas fa-caret-down\"></i>\n                  </p>\n                  <p className=\"select-container\">\n                    <select className={this.state.role?\"\":\"placeholder\"} defaultValue=\"your role\" name=\"role\" onChange={this.HandleChange}>\n                      {role_options}\n                    </select>\n                    <i className=\"fas fa-caret-down\"></i>\n                  </p>\n                </div>\n                <footer>\n                  <button className=\"next-button\"\n                    type=\"button\"\n                    disabled={\n                      this.state.loading ||\n                      !this.Validate(1)\n                    }\n                    onClick={_e=>{\n                      this.setState({slider_state: 2});\n                    }}\n                  >\n                    <span>next</span>\n                  </button>\n                </footer>\n              </div>\n              <div className={\"f-column\" + (this.state.slider_state === 2?\" active\":\"\")}>\n                <h2>Which Projul features interest you the most?</h2>\n                <div className=\"f-column f-center f-a-center f-grow\">\n                  <p>\n                    <input id=\"feature-1\" className=\"feature\" name=\"feature-1\" type=\"checkbox\" onChange={this.HandleCheckboxChange} />\n                    <label htmlFor=\"feature-1\">\n                      Project Managment!\n                    </label>\n                  </p>\n                  <p>\n                    <input id=\"feature-2\" className=\"feature\" name=\"feature-2\" type=\"checkbox\" onChange={this.HandleCheckboxChange} />\n                    <label htmlFor=\"feature-2\">\n                      Customer Communication!\n                    </label>\n                  </p>\n                  <p>\n                    <input id=\"feature-3\" className=\"feature\" name=\"feature-3\" type=\"checkbox\" onChange={this.HandleCheckboxChange} />\n                    <label htmlFor=\"feature-3\">\n                      Project Photo Organization!\n                    </label>\n                  </p>\n                </div>\n                <footer>\n                  <button className=\"back-button\"\n                    type=\"button\"\n                    disabled={\n                      this.state.loading\n                    }\n                    onClick={_e=>{\n                      this.setState({slider_state: 1});\n                    }}\n                  >\n                    <span>back</span>\n                  </button>\n                  <button className=\"load-button\"\n                    disabled={\n                      this.state.loading ||\n                      !this.Validate(2)\n                    }\n                  >\n                    <span>complete setup</span>\n                    <span></span>\n                  </button>\n                </footer>\n              </div>\n            </form>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    current_user: state.state.current_user\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({setupUser,setupCompany}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageSetup);\n","import axios from 'axios';\n\nexport default axios.create({\n  baseURL: 'https://',\n  timeout: 1000,\n  headers: {}\n});\n","import React from 'react'\nimport Axios from '../utilities/api'\nimport {applicationConfig} from '../config/config'\n\nfunction callApi() {\n  window.clientApplication.acquireTokenSilent(applicationConfig.b2cScopes).then(function (accessToken) {\n      callApiWithAccessToken(accessToken);\n  }, function (error) {\n    window.clientApplication.acquireTokenPopup(applicationConfig.b2cScopes).then(function (accessToken) {\n        callApiWithAccessToken(accessToken);\n    }, function (error) {\n        console.log(\"Error acquiring the access token to call the Web api:\\n\" + error);\n    });\n  })\n}\nfunction callApiWithAccessToken(accessToken) {\n    // Call the Web API with the AccessToken\n    Axios({\n        type: \"GET\",\n        url: applicationConfig.webApi,\n        headers: {\n            'Authorization': 'Bearer ' + accessToken,\n        },\n    }).then(function (data) {\n        console.log(\"Web APi returned:\\n\" + JSON.stringify(data));\n    })\n    .catch(function (error) {\n        console.log(\"Error calling the Web api:\\n\" + error);\n    })\n}\n\n\nclass PageDashboard extends React.Component {\n  state = {\n    loaded: false\n  };\n  componentDidMount() {\n    setTimeout(()=>{\n      this.setState({loaded: true});\n\n      callApi();\n\n    }, 50);\n  }\n  render() {\n    return (\n      <section id=\"page-dashboard\">\n        <div className={this.state.loaded?\"loaded\":\"loading\"}>\n          <div className=\"card d1\">\n          </div>\n          <div className=\"card d2\">\n          </div>\n        </div>\n        <div className={this.state.loaded?\"loaded\":\"loading\"}>\n          <div className=\"card d3\">\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default PageDashboard\n","export function DaysInMonth (month, year) {\n  return new Date(year, month+1, 0).getDate();\n}\n\nexport function SameDay(d1, d2) {\n  return d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate();\n}\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { selectJob, selectJobSchedule, updateJobsData, editJob, assignJobToUser } from '../actions/actions';\n\nimport DatePicker, {\n  CalendarContainer as OriginalContainer\n} from 'react-datepicker';\n\n// import UserDaySchedule from './user-day-schedule'\n\nimport {DaysInMonth, SameDay} from '../utilities/date'\nimport {JobsById} from '../utilities/data'\n\nclass UserHeatmap extends React.Component {\n\n  calcJobsByDay () {\n    var jobs_by_day = [];\n    for (var d=0; d<DaysInMonth(this.props.month, this.props.year); d++) {\n      jobs_by_day.push([]);\n    }\n\n    for (var t=0; t<this.props.all_users_data[this.props.user_id].jobs.length; t++) {\n      const job_id = this.props.all_users_data[this.props.user_id].jobs[t];\n      let job = this.props.all_jobs_data[job_id];\n      if (!job) {\n        this.props.updateJobsData(JobsById);\n        return jobs_by_day;\n      }\n      if (job.start_dates.length) {\n        job.start_dates.map((start_date, i) => {\n          if (start_date.getMonth() === this.props.month) {\n            jobs_by_day[start_date.getDate()-1].push({...job, index:i, start_date: start_date, end_date: job.end_dates[i]});\n          }\n          return true;\n        });\n      }\n    }\n    return jobs_by_day;\n  }\n\n  handleDayCellClick = (hour) => {\n    return (e) => {\n      if (this.props.selected_job_data && !this.props.all_jobs_data[this.props.selected_job].start_dates.length) {\n        // this.props.selectJobSchedule(new Date(this.props.year, this.props.month, (this.props.selected_day)), this.props.user_id);\n        let start_date = new Date(this.props.year, this.props.month, (this.props.selected_day), hour);\n        let end_date = new Date(this.props.year, this.props.month, (this.props.selected_day), hour+1);\n\n        let start_dates = [...this.props.all_jobs_data[this.props.selected_job].start_dates];\n        let end_dates = [...this.props.all_jobs_data[this.props.selected_job].end_dates];\n\n        start_dates[this.props.selected_job_data.index] = start_date;\n        end_dates[this.props.selected_job_data.index] = end_date;\n\n        this.props.editJob(this.props.selected_job, {start_dates:start_dates, end_dates:end_dates});\n        this.props.assignJobToUser(this.props.all_jobs_data[this.props.selected_job].assigned_user, this.props.user_id, this.props.selected_job);\n      }\n    }\n  }\n  handleDayClick = (id, index) => {\n    return(_e) => {\n      this.props.handleDayClick(id, index);\n    }\n  }\n  handleJobClick = (project_id, id, index) => {\n    return (_e) => {\n      this.props.selectJob(project_id, id, index);\n      // this.props.selectJobSchedule(new Date(this.props.year, this.props.month, (this.props.selected_day)), this.props.user_id);\n    }\n  }\n\n\n  handleChangeStartTime = (id, index) => {\n    return (value) => {\n      let start_dates = [...this.props.all_jobs_data[id].start_dates];\n      let end_dates = [...this.props.all_jobs_data[id].end_dates];\n\n      start_dates[index] = value;\n      end_dates[index] = new Date(end_dates[index].setFullYear(value.getFullYear(),value.getMonth(),value.getDate()));\n      console.log(value, end_dates[index]);\n\n      this.props.editJob(id, {start_dates:start_dates, end_dates:end_dates});\n      if (id === this.props.selected_job) {\n        this.props.gotoDate(value);\n      }\n    }\n  }\n\n  handleChangeEndTime = (id, index) => {\n    return (value) => {\n      let end_dates = [...this.props.all_jobs_data[id].end_dates];\n\n      end_dates[index] = value;\n\n      this.props.editJob(id, {end_dates:end_dates});\n    }\n  }\n\n  isDayAssigned = (current_date) => {\n    let assigned = \"\";\n\n    if (this.props.selected_job_data && this.props.selected_job_data.assigned_user === this.props.user_id && this.props.selected_job_data.start_dates.length) {\n      this.props.selected_job_data.start_dates.map((start_date, i) => {\n        if (SameDay(start_date, current_date)){\n          assigned = \" assigned\";\n        }\n        return start_date;\n      })\n    }\n    return assigned;\n  }\n\n  startx = 0;\n  dist = 0;\n  dragged_element = null;\n  event_store = {};\n\n  handleEndTouchStart = (id, index, job_duration) => {\n    return (e) => {\n      let touchobj = e.changedTouches[0]; // reference first touch point\n      this.startx = parseInt(touchobj.clientX);\n      this.dist = 0;\n      // const job_duration = (((this.props.all_jobs_data[id].end_dates[index]-this.props.all_jobs_data[id].start_dates[index])/1000)/60/60/24)*100;\n      const window_width = e.currentTarget.parentNode.parentNode.clientWidth;\n\n      this.event_store[\"EndTouchMove\"+id+index] = this.handleEndTouchMove(id, index, job_duration, window_width);\n      this.event_store[\"EndTouchEnd\"+id+index] = this.handleEndTouchEnd(id, index, job_duration, window_width);\n\n      e.currentTarget.addEventListener('touchend', this.event_store[\"EndTouchEnd\"+id+index], false);\n      e.currentTarget.addEventListener('touchmove', this.event_store[\"EndTouchMove\"+id+index], false);\n      e.currentTarget.addEventListener('touchcancel', this.event_store[\"EndTouchEnd\"+id+index], false);\n\n    }\n  }\n\n  handleEndMouseDown = (id, index, job_duration) => {\n    return (e) => {\n      this.dragged_element = {\n        id,\n        index,\n        job_duration,\n        side:\"end\",\n        window_width: e.currentTarget.parentNode.parentNode.clientWidth,\n        e\n      }\n      this.dist = 0;\n      this.startx = parseInt(e.clientX);\n      document.addEventListener('mousemove', this.handleEndMouseMove, false);\n      document.addEventListener('mouseup', this.handleEndMouseUp, false);\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  handleEndMouseMove = (e) => {\n    const {id, index, job_duration, window_width} = this.dragged_element;\n    this.dist = parseInt(e.clientX) - this.startx;\n\n    document.getElementById(\"job-\"+id+index).style.maxWidth = (job_duration + (this.dist*100 / window_width))+\"%\";\n    document.getElementById(\"job-\"+id+index).style.minWidth = (job_duration + (this.dist*100 / window_width))+\"%\";\n\n    let end_dates = [...this.props.all_jobs_data[id].end_dates];\n    let start_dates = [...this.props.all_jobs_data[id].start_dates];\n\n\n    let start_hour = start_dates[index].getHours() + (start_dates[index].getMinutes() / 60);\n    let hour = Math.max(end_dates[index].getHours() + (end_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24), start_hour);\n\n    const min = Math.round((hour % 1) * 60);\n    let hr = Math.floor(hour);\n    let ampm = \"am\";\n    if( hr > 12 ) {\n        hr -= 12;\n        ampm = \"pm\";\n    }\n    document.getElementById(\"job-end-tooltip-\"+id+index).innerHTML = hr+\":\"+(min<10?\"0\"+min:min)+\" \"+ampm;\n\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  handleEndMouseUp = (e) => {\n    const {id, index, window_width} = this.dragged_element;\n    let end_dates = [...this.props.all_jobs_data[id].end_dates];\n\n    let hour = end_dates[index].getHours() + (end_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n\n    let value = new Date(new Date(end_dates[index]).setHours(Math.floor(hour), (hour % 1) * 60));\n\n    end_dates[index] = value;\n    this.props.editJob(id, {end_dates:end_dates});\n\n    document.removeEventListener('mousemove', this.handleEndMouseMove, false);\n    document.removeEventListener('mouseup', this.handleEndMouseUp, false);\n  }\n\n  handleEndTouchMove = (id, index, job_duration, window_width) => {\n    return (e) => {\n      let touchobj = e.changedTouches[0];\n      this.dist = parseInt(touchobj.clientX) - this.startx;\n      document.getElementById(\"job-\"+id+index).style.maxWidth = (job_duration + (this.dist*100 / window_width))+\"%\";\n      document.getElementById(\"job-\"+id+index).style.minWidth = (job_duration + (this.dist*100 / window_width))+\"%\";\n\n      let end_dates = [...this.props.all_jobs_data[id].end_dates];\n      let start_dates = [...this.props.all_jobs_data[id].start_dates];\n\n      let start_hour = start_dates[index].getHours() + (start_dates[index].getMinutes() / 60);\n      let hour = Math.max(end_dates[index].getHours() + (end_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24), start_hour);\n\n      const min = Math.round((hour % 1) * 60);\n      let hr = Math.floor(hour);\n      let ampm = \"am\";\n      if( hr > 12 ) {\n          hr -= 12;\n          ampm = \"pm\";\n      }\n      document.getElementById(\"job-end-tooltip-\"+id+index).innerHTML = hr+\":\"+(min<10?\"0\"+min:min)+\" \"+ampm;\n\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  handleEndTouchEnd = (id, index, job_duration, window_width) => {\n    return (e) => {\n      let end_dates = [...this.props.all_jobs_data[id].end_dates];\n\n      let hour = end_dates[index].getHours() + (end_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n\n      let value = new Date(new Date(end_dates[index]).setHours(Math.floor(hour), (hour % 1) * 60));\n\n      end_dates[index] = value;\n      console.log(this.dist, hour, value);\n\n      this.props.editJob(id, {end_dates:end_dates});\n\n      e.currentTarget.removeEventListener('touchend', this.event_store[\"EndTouchEnd\"+id+index], false);\n      e.currentTarget.removeEventListener('touchmove', this.event_store[\"EndTouchMove\"+id+index], false);\n      e.currentTarget.removeEventListener('touchcancel', this.event_store[\"EndTouchEnd\"+id+index], false);\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n///////\n  //////////////////BODY CLICK AND DRAG\n//////\n\n  handleBodyTouchStart = (id, index, job_start) => {\n    return (e) => {\n      let touchobj = e.changedTouches[0]; // reference first touch point\n      this.dist = 0;\n      this.startx = parseInt(touchobj.clientX);\n      console.log(\"body drag\");\n      // const job_start = (((this.props.all_jobs_data[id].end_dates[index]-this.props.all_jobs_data[id].start_dates[index])/1000)/60/60/24)*100;\n      const window_width = e.currentTarget.parentNode.parentNode.clientWidth;\n\n      this.event_store[\"BodyTouchMove\"+id+index] = this.handleBodyTouchMove(id, index, job_start, window_width);\n      this.event_store[\"BodyTouchEnd\"+id+index] = this.handleBodyTouchEnd(id, index, job_start, window_width);\n\n      e.currentTarget.addEventListener('touchend', this.event_store[\"BodyTouchEnd\"+id+index], false);\n      e.currentTarget.addEventListener('touchmove', this.event_store[\"BodyTouchMove\"+id+index], false);\n      e.currentTarget.addEventListener('touchcancel', this.event_store[\"BodyTouchEnd\"+id+index], false);\n\n    }\n  }\n\n  handleBodyTouchMove = (id, index, job_start, window_width) => {\n    return (e) => {\n      let touchobj = e.changedTouches[0];\n      this.dist = parseInt(touchobj.clientX) - this.startx;\n      document.getElementById(\"job-\"+id+index).style.left =\n        (job_start + (this.dist*100 / window_width))+\"%\";\n\n      let end_dates = [...this.props.all_jobs_data[id].end_dates];\n      let start_dates = [...this.props.all_jobs_data[id].start_dates];\n\n      let hour = end_dates[index].getHours() + (end_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n      let start_hour = start_dates[index].getHours() + (start_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n\n      const min = Math.round((hour % 1) * 60);\n      let hr = Math.floor(hour);\n      let ampm = \"am\";\n      if( hr > 12 ) {\n          hr -= 12;\n          ampm = \"pm\";\n      }\n\n      const s_min = Math.round((start_hour % 1) * 60);\n      let s_hr = Math.floor(start_hour);\n      let s_ampm = \"am\";\n      if( hr > 12 ) {\n          hr -= 12;\n          ampm = \"pm\";\n      }\n\n      document.getElementById(\"job-end-tooltip-\"+id+index).innerHTML = hr+\":\"+(min<10?\"0\"+min:min)+\" \"+ampm;\n      document.getElementById(\"job-start-tooltip-\"+id+index).innerHTML = s_hr+\":\"+(s_min<10?\"0\"+s_min:s_min)+\" \"+s_ampm;\n\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  handleBodyTouchEnd = (id, index, job_start, window_width) => {\n    return (e) => {\n      let end_dates = [...this.props.all_jobs_data[id].end_dates];\n      let start_dates = [...this.props.all_jobs_data[id].start_dates];\n\n      let hour = end_dates[index].getHours() + (end_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n      let start_hour = start_dates[index].getHours() + (start_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n\n      let value = new Date(new Date(end_dates[index]).setHours(Math.floor(hour), (hour % 1) * 60));\n      let start_value = new Date(new Date(start_dates[index]).setHours(Math.floor(start_hour), (start_hour % 1) * 60));\n\n      end_dates[index] = value;\n      start_dates[index] = start_value;\n      this.props.editJob(id, {end_dates:end_dates, start_dates:start_dates});\n\n      e.currentTarget.removeEventListener('touchend', this.event_store[\"BodyTouchEnd\"+id+index], false);\n      e.currentTarget.removeEventListener('touchmove', this.event_store[\"BodyTouchMove\"+id+index], false);\n      e.currentTarget.removeEventListener('touchcancel', this.event_store[\"BodyTouchEnd\"+id+index], false);\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n\n  handleBodyMouseDown = (id, index, job_start) => {\n    return (e) => {\n      this.dragged_element = {\n        id,\n        index,\n        job_start,\n        side:\"end\",\n        window_width: e.currentTarget.parentNode.parentNode.clientWidth,\n        e\n      }\n      this.dist = 0;\n      this.startx = parseInt(e.clientX);\n      document.addEventListener('mousemove', this.handleBodyMouseMove, false);\n      document.addEventListener('mouseup', this.handleBodyMouseUp, false);\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  handleBodyMouseMove = (e) => {\n    const {id, index, window_width, job_start} = this.dragged_element;\n    this.dist = parseInt(e.clientX) - this.startx;\n\n    document.getElementById(\"job-\"+id+index).style.left =\n      (job_start + (this.dist*100 / window_width))+\"%\";\n\n    let end_dates = [...this.props.all_jobs_data[id].end_dates];\n    let start_dates = [...this.props.all_jobs_data[id].start_dates];\n\n    let hour = end_dates[index].getHours() + (end_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n    let start_hour = start_dates[index].getHours() + (start_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n\n    const min = Math.round((hour % 1) * 60);\n    let hr = Math.floor(hour);\n    let ampm = \"am\";\n    if( hr > 12 ) {\n        hr -= 12;\n        ampm = \"pm\";\n    }\n\n    const s_min = Math.round((start_hour % 1) * 60);\n    let s_hr = Math.floor(start_hour);\n    let s_ampm = \"am\";\n    if( hr > 12 ) {\n        hr -= 12;\n        ampm = \"pm\";\n    }\n\n    document.getElementById(\"job-end-tooltip-\"+id+index).innerHTML = hr+\":\"+(min<10?\"0\"+min:min)+\" \"+ampm;\n    document.getElementById(\"job-start-tooltip-\"+id+index).innerHTML = s_hr+\":\"+(s_min<10?\"0\"+s_min:s_min)+\" \"+s_ampm;\n\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  handleBodyMouseUp = (e) => {\n    const {id, index, window_width} = this.dragged_element;\n    let end_dates = [...this.props.all_jobs_data[id].end_dates];\n    let start_dates = [...this.props.all_jobs_data[id].start_dates];\n\n    let hour = end_dates[index].getHours() + (end_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n    let start_hour = start_dates[index].getHours() + (start_dates[index].getMinutes() / 60) + ((this.dist / window_width) * 24);\n\n    let value = new Date(new Date(end_dates[index]).setHours(Math.floor(hour), (hour % 1) * 60));\n    let start_value = new Date(new Date(start_dates[index]).setHours(Math.floor(start_hour), (start_hour % 1) * 60));\n\n    end_dates[index] = value;\n    start_dates[index] = start_value;\n    this.props.editJob(id, {end_dates:end_dates, start_dates:start_dates});\n\n    document.removeEventListener('mousemove', this.handleBodyMouseMove, false);\n    document.removeEventListener('mouseup', this.handleBodyMouseUp, false);\n\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  render() {\n    const cells = [];\n    const day_cells = [];\n    const classes = [\n      \"jobs-0\",\n      \"jobs-1\",\n      \"jobs-2\",\n      \"jobs-3\",\n      \"jobs-4\",\n      \"jobs-5\",\n      \"jobs-6\",\n      \"jobs-7\",\n      \"jobs-8\"\n    ];\n\n    var jobs_by_day = this.calcJobsByDay();\n\n    if (!this.props.selected_day && jobs_by_day && jobs_by_day.length === DaysInMonth(this.props.month, this.props.year)) {\n      for (var i=0; i<DaysInMonth(this.props.month, this.props.year); i++) {\n\n        const current_date = new Date(this.props.year, this.props.month, (i+1));\n        let value = 0;\n        for (var t=0; t<jobs_by_day[i].length; t++) {\n          const job = jobs_by_day[i][t];\n          const job_duration = (((job.end_date-job.start_date)/1000)/60/60);\n          value+=job_duration;\n        }\n        let weekend = \"\";\n        // value = Math.max(value,0);\n        for (var w=0; w<this.props.company_settings.weekend.length; w++) {\n          if (current_date.getDay() === this.props.company_settings.weekend[w]) {\n            // value = 0;\n            weekend = \" weekend\";\n          }\n        }\n        cells.push((\n          <li\n            key={this.props.user_id + \"_\" + i}\n            className={\"cell \" +\n              (classes[Math.min(Math.round(value*8/this.props.company_settings.daily_work_hours),classes.length-1)]) +\n              weekend +\n              (((current_date.toDateString() === (new Date()).toDateString()) || (((this.props.month/20)+this.props.year) > (((new Date()).getMonth()/20)+(new Date()).getFullYear()) && i===0)) ? \" today\" : \"\") +\n              this.isDayAssigned(current_date)\n          } onClick={this.handleDayClick(i+1, this.props.index)}\n          >{\n            value?(Math.round(value*10)/10)+\" hrs\":\"\"\n          }</li>\n        ));\n      }\n    }\n\n    if (this.props.selected_day) {\n      // The Day view\n\n      for (var h=0; h<24; h++) {\n        // const current_time = new Date(this.props.year, this.props.month, this.props.selected_day, h);\n        day_cells.push((\n          <li\n            key={\"hour-\"+h}\n            className={\n              \"day-cell\"\n            }\n            onClick={this.handleDayCellClick(h)}\n          >\n          </li>\n        ));\n      }\n      if (jobs_by_day[this.props.selected_day-1]) {\n        //Represent Jobs on Day View\n        for (t=0; t<jobs_by_day[this.props.selected_day-1].length; t++) {\n          const job = jobs_by_day[this.props.selected_day-1][t];\n          const job_duration = (((job.end_date-job.start_date)/1000)/60/60/24)*100;\n          const job_start = ((job.start_date - new Date(this.props.year, this.props.month, this.props.selected_day))/1000/60/60/24)*100;\n          // if (this.props.all_users_data[this.props.user_id].trade_name !== \"Customer\" || job.project_id === this.props.selected_job_data.project_id) {\n            day_cells.push((\n              <li\n                key={\"job-\"+job.id+job.index}\n                id={\"job-\"+job.id+job.index}\n                className={\n                  \"job\" +\n                  (job.id === this.props.selected_job? \" selected\" : \"\") +\n                  ((job.project_id === this.props.selected_project || this.props.selected_job || !this.props.selected_project)? \" in-project\" : \"\")\n                }\n                style={{\n                  left: job_start+\"%\",\n                  maxWidth: job_duration+\"%\",\n                  minWidth: job_duration+\"%\",\n                  top: (t*4) + \"px\",\n                  backgroundColor: job.project_color\n                }}\n              >\n                <label>\n                  <DatePicker\n                    selected={new Date(job.start_date)}\n                    className=\"\"\n                    onChange={this.handleChangeStartTime(job.id,job.index)}\n                    dateFormat=\"h:mm aa\"\n                    dateCaption=\"change start date\"\n                    popperPlacement=\"left\"\n                    popperModifiers={{\n                      offset: {\n                        enabled: true,\n                        offset: '0, 10px'\n                      },\n                      preventOverflow: {\n                        enabled: true,\n                        escapeWithReference: false, // force popper to stay in viewport (even when input is scrolled out of view)\n                        boundariesElement: 'scrollParent'\n                      }\n                    }}\n                    calendarContainer={({className, children})=>(\n                      <div>\n                        <OriginalContainer className={className}>\n                          <div className=\"date-picker-header\">change job date</div>\n                          <div style={{ position: \"relative\" }}>{children}</div>\n                        </OriginalContainer>\n                      </div>\n                    )}\n                  />\n                  <div id={\"job-start-tooltip-\"+job.id+job.index} className=\"tooltips\"></div>\n                  <i className=\"fas fa-calendar-alt\"></i>\n                </label>\n                <div\n                  onClick={\n                    this.handleJobClick(job.project_id, job.id, job.index)\n                  }\n                  onTouchStart={this.handleBodyTouchStart(job.id, job.index, job_start)}\n                  onMouseDown={this.handleBodyMouseDown(job.id, job.index, job_start)}\n                >\n                  <h4>\n                    <i className={job.icon}></i>\n                    <span><strong>{job.name}</strong></span>\n                  </h4>\n                  <div className=\"name\">{job.project_name}</div>\n                </div>\n                <label\n                  onTouchStart={this.handleEndTouchStart(job.id, job.index, job_duration)}\n                  onMouseDown={this.handleEndMouseDown(job.id, job.index, job_duration)}\n                >\n                  <div id={\"job-end-tooltip-\"+job.id+job.index} className=\"tooltips\"></div>\n                  <i className=\"fas fa-arrows-alt-h\"></i>\n                </label>\n              </li>\n            ));\n          // }\n        }\n      }\n    }\n\n    return (\n      <div className={\"user-schedule\" + (this.props.selected_day ? \" show-day\" : \"\")}>\n      { this.props.selected_day ? (\n        <ul className={\"day-schedule\"}\n          style={{\n            // transformOrigin: ((this.props.selected_day/DaysInMonth(this.props.month, this.props.year))*100) + \"% 0\"\n            // transition: \"opacity .5s ease, transform 0s ease 1s\"\n          }}>\n          {day_cells}\n        </ul>\n      ):(\n        <ul className={\"month-schedule\"}>\n          {cells}\n        </ul>\n      )}\n      </div>\n    );\n  }\n}\n\n// <DatePicker\n//   selected={new Date(job.start_date)}\n//   className=\"\"\n//   onChange={this.handleChangeStartTime(job.id,job.index)}\n//   showTimeSelect\n//   showTimeSelectOnly\n//   timeIntervals={15}\n//   minTime={new Date(new Date(job.start_date).setHours(0, 0))}\n//   maxTime={new Date(job.end_date)}\n//   dateFormat=\"h:mm aa\"\n//   timeCaption=\"start time\"\n//   popperPlacement=\"left\"\n//   popperModifiers={{\n//     offset: {\n//       enabled: true,\n//       offset: '0, 10px'\n//     },\n//     preventOverflow: {\n//       enabled: true,\n//       escapeWithReference: false, // force popper to stay in viewport (even when input is scrolled out of view)\n//       boundariesElement: 'scrollParent'\n//     }\n//   }}\n// />\n\n// <DatePicker\n//   selected={new Date(job.end_date)}\n//   className=\"\"\n//   onChange={this.handleChangeEndTime(job.id,job.index)}\n//   showTimeSelect\n//   showTimeSelectOnly\n//   timeIntervals={15}\n//   minTime={new Date(job.start_date)}\n//   maxTime={new Date(new Date(job.end_date).setHours(23, 55))}\n//   dateFormat=\"h:mm aa\"\n//   timeCaption=\"end time\"\n//   popperPlacement=\"right\"\n//   popperModifiers={{\n//     offset: {\n//       enabled: true,\n//       offset: '0, 20px'\n//     },\n//     preventOverflow: {\n//       enabled: true,\n//       escapeWithReference: false, // force popper to stay in viewport (even when input is scrolled out of view)\n//       boundariesElement: 'scrollParent'\n//     }\n//   }}\n// />\n\n\n\nconst mapStateToProps = (state) => {\n  return {\n    company_settings: state.state.company_settings,\n    all_projects_data: state.state.all_projects_data,\n    all_users_data: state.state.all_users_data,\n    all_jobs_data: state.state.all_jobs_data\n    // examplePropTwo: state.state.examplePropTwo\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({selectJob, selectJobSchedule, updateJobsData, editJob, assignJobToUser}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserHeatmap);\n","window.loc = \"en\";\nexport const Content = {\n  \"en\": {\n    \"MonthNames\": [\n      \"January\",\n      \"Fabruary\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\",\n      \"August\",\n      \"September\",\n      \"October\",\n      \"November\",\n      \"December\"\n    ],\n    \"MonthNamesShort\": [\n      \"Jan\",\n      \"Fab\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\"\n    ],\n    \"WeekDaysShort\": [\n      \"Sun\",\n      \"Mon\",\n      \"Tue\",\n      \"Wed\",\n      \"Thu\",\n      \"Fri\",\n      \"Sat\"\n    ],\n\n    \"DeleteAllTasksWarning\": {\n      \"message_1\": \"You're about to delete all of the tasks for the job: \",\n      \"message_2\": \".\",\n      \"message_3\": \"This cannot be undone.\",\n      \"message_4\": \"Are you sure?\",\n      \"confirm\": \"delete tasks\",\n      \"cancel\": \"cancel\"\n    },\n\n    \"MarkAllTasksCompleteWarning\": {\n      \"message_1\": \"You're about to mark all of the tasks for the job: \",\n      \"message_2\": \" as completed.\",\n      \"message_3\": \"Are you sure?\",\n      \"confirm\": \"they're all done!\",\n      \"cancel\": \"hang on\"\n    }\n\n  }\n};\n","import React from 'react'\nimport {DaysInMonth, SameDay} from '../utilities/date'\nimport {Content} from '../utilities/content'\n\nconst WeekDaysShort = Content[window.loc].WeekDaysShort;\n\nclass UserHeatmapDates extends React.Component {\n  state = {\n    selected_day: 0\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_day && this.props.selected_day !== prevProps.selected_day) {\n      this.setState({\n        selected_day: this.props.selected_day\n      });\n    }\n  }\n\n  handleDayClick = (e) => {\n    const id=parseInt(e.currentTarget.dataset.id,10);\n    this.props.handleDayClick(id)\n  }\n\n  isDayAssigned = (current_date) => {\n    let assigned = \"\";\n\n    if (this.props.selected_job_data && this.props.selected_job_data.assigned_user === this.props.user_id && this.props.selected_job_data.start_dates.length) {\n      this.props.selected_job_data.start_dates.map((start_date, i) => {\n        if (SameDay(start_date, current_date)){\n          assigned = \" assigned\";\n        }\n        return start_date;\n      })\n    }\n    return assigned;\n  }\n\n  render() {\n    const cells = [];\n    const day_cells = [];\n\n    for (var i=0; i<DaysInMonth(this.props.month, this.props.year); i++) {\n      var current_date = new Date(this.props.year, this.props.month, (i+1));\n      cells.push((\n        <li key={i+1} data-id={(i+1)} className={\n          \"cell\" +\n          ((current_date.toDateString() === (new Date()).toDateString()) ? \" today\" : \"\") +\n          this.isDayAssigned(current_date)\n        } onClick={this.handleDayClick}>\n          <span>{i+1}</span>\n          <small>{WeekDaysShort[current_date.getDay()]}</small>\n        </li>\n      ));\n    }\n\n    if (this.state.selected_day) {\n      for (var h=0; h<24; h++) {\n        const current_time = new Date(this.props.year, this.props.month, this.state.selected_day, h);\n        day_cells.push((\n          <li key={h} className={\n            \"day-cell\"\n          }>\n            <span>{(current_time.getHours() % 12 || 12) + \" \" + (current_time.getHours() >= 12 ? \"pm\" : \"am\")}</span>\n          </li>\n        ));\n      }\n    }\n\n    return (\n      <div className={\"user-schedule heatmap-dates\" + (this.props.selected_day ? \" show-day\" : \"\")}>\n        { this.props.selected_day ? (\n          <ul className={\"day-schedule\"}\n            style={{\n              // transformOrigin: ((this.state.selected_day/DaysInMonth(this.props.month, this.props.year))*100) + \"% 0\"\n              // transition: \"opacity .5s ease, transform 0s ease 1s\"\n            }}>\n            {day_cells}\n          </ul>\n        ):(\n          <ul className={\"month-schedule\"}>\n            {cells}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default UserHeatmapDates\n","export const ArrayToObject = (array, keyField) =>\n   array.reduce((obj, item) => {\n     obj[item[keyField]] = item\n     return obj\n   }, {})\n\nexport const ObjectToArray = (object) => {\n  let array = [];\n  for (var o in object) {\n    array.push(object[o]);\n  }\n  return array;\n}\n\n\nexport const ArrayMove = (arr, old_index, new_index) => {\n if (new_index >= arr.length) {\n   var k = new_index - arr.length + 1;\n   while (k--) {\n     arr.push(undefined);\n   }\n }\n arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\n};\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { updateUsersData } from '../actions/actions';\n\nimport UserHeatmap from './user-heatmap'\nimport UserHeatmapDates from './user-heatmap-dates'\nimport {DaysInMonth} from '../utilities/date'\nimport {Content} from '../utilities/content'\nimport {UsersById} from '../utilities/data'\nimport {SplitString} from '../utilities/string'\nimport {ObjectToArray} from '../utilities/array'\n// import ScrollToComponent from 'react-scroll-to-component'\n\nconst WeekDaysShort = Content[window.loc].WeekDaysShort;\nconst MonthNames = Content[window.loc].MonthNames;\nconst MonthNamesShort = Content[window.loc].MonthNamesShort;\n\nclass Scheduler extends React.Component {\n  state = {\n    sort: \"trade_name\",\n    trade_filter: \"all\",\n    date: new Date(),\n    selected_day: 0,\n    selected_index: 0,\n    loaded: false\n  };\n\n  componentDidMount() {\n    this.temp_service_call = setTimeout(()=>{\n      let trades = {};\n      for (var i in UsersById) {\n        trades[SplitString(UsersById[i].trade_name,\",\")] = !!SplitString(UsersById[i].trade_name,\",\");\n      }\n      let trade_names = Object.keys(trades);\n      trade_names.sort(function(a, b){\n        var x = a.toLowerCase();\n        var y = b.toLowerCase();\n        if (x < y) {return -1;}\n        if (x > y) {return 1;}\n        return 0;\n      });\n      this.setState({\n        trades: trades,\n        trade_names: trade_names,\n        // users: [...users],\n        // users_by_id: users_by_id,\n        trade_filter: \"all\",\n        loaded: true\n      });\n\n      this.props.updateUsersData(UsersById);\n\n      if (this.props.selected_job) {\n        if (this.props.selected_job_data.start_date) {\n          this.gotoDate(this.props.selected_job_data.start_date);\n        } else if (this.props.selected_job_data.default_trade && trades[this.props.selected_job_data.default_trade]) {\n          this.setState({\n            trade_filter: this.props.selected_job_data.default_trade\n          });\n        }\n      }\n\n    }, 1000);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_job !== prevProps.selected_job || this.props.selected_job_index !== prevProps.selected_job_index) {\n      // this.setState({\n      //   hidden: true\n      // });\n      // setTimeout(()=>{\n        // this.setState({hidden: false});\n        if (this.props.selected_job_data && this.state.loaded) {\n          if (this.props.selected_job_data.start_date) {\n            this.setState({\n              trade_filter: \"all\"\n            });\n            this.gotoDate(this.props.selected_job_data.start_date);\n          }\n          else {\n            this.handleClearSelectedDay();\n            if (this.props.selected_job_data.default_trade && this.state.trades[this.props.selected_job_data.default_trade]) {\n              this.setState({\n                trade_filter: this.props.selected_job_data.default_trade\n              });\n            } else {\n              this.setState({\n                trade_filter: \"all\"\n              });\n            }\n          }\n        }\n      // }, 500);\n    }\n  }\n\n  componentWillUnmount () {\n    window.clearTimeout(this.temp_service_call);\n  }\n\n  selectSort = (e) => {\n    // let id=parseInt(e.currentTarget.dataset.id,10);\n    this.setState({sort: e.target.value});\n  }\n\n  selectTradeFilter = (e) => {\n    // let id=parseInt(e.currentTarget.dataset.id,10);\n    console.log(e.target.value);\n    this.setState({trade_filter: e.target.value});\n  }\n\n  handleJobClick = (project_id, id) => {\n    // this.props.handleJobClick(project_id, id);\n    // this.props.selectJob(project_id, id);\n  }\n\n  handleDayClick = (day, index) => {\n    this.setState({\n      selected_day: day,\n      selected_index: index\n    });\n  }\n\n  handleClearSelectedDay = (e) => {\n    this.setState({\n      selected_day: 0\n    });\n  }\n\n  handleNextDay = (e) => {\n    let selected_day = this.state.selected_day;\n    var current_month = this.state.date;\n    if (selected_day === DaysInMonth(current_month.getMonth(), current_month.getFullYear())) {\n      this.handleNextMonth();\n      selected_day = 1;\n    } else {\n      selected_day++;\n    }\n    this.setState({\n      selected_day: selected_day\n    });\n  }\n  handlePrevDay = (e) => {\n    let selected_day = this.state.selected_day;\n    let new_month;\n    if (selected_day === 1) {\n      new_month = this.handlePrevMonth();\n      selected_day = DaysInMonth(new_month.getMonth(), new_month.getFullYear());\n    } else {\n      selected_day--;\n    }\n    this.setState({\n      selected_day: selected_day\n    });\n  }\n\n  handleGotoToday = (e) => {\n    var today = new Date();\n    this.gotoDate(today);\n  }\n\n  gotoDate = (date) => {\n    this.setState({\n      date: date,\n      selected_day: date.getDate()\n    });\n    if (this.props.selected_job && this.props.selected_job_data.assigned_user) {\n      if (this[this.props.selected_job_data.assigned_user]) {\n        this[this.props.selected_job_data.assigned_user].parentNode.parentNode.scrollTop = this[this.props.selected_job_data.assigned_user].offsetTop-200;\n      } else {\n        setTimeout(()=>{\n          if (this[this.props.selected_job_data.assigned_user]) {\n            this[this.props.selected_job_data.assigned_user].parentNode.parentNode.scrollTop = this[this.props.selected_job_data.assigned_user].offsetTop-200;\n          }\n        }, 100)\n      }\n    }\n  }\n\n  handleNextMonth = (e) => {\n    var now = this.state.date;\n    var current;\n    if (now.getMonth() === 11) {\n      current = new Date(now.getFullYear() + 1, 0, 1);\n    } else {\n      current = new Date(now.getFullYear(), now.getMonth() + 1, 1);\n    }\n    this.setState({\n      date: current\n    });\n    return current;\n  }\n\n  handlePrevMonth = (e) => {\n    var now = this.state.date;\n    var current;\n    if (now.getMonth() === 0) {\n      current = new Date(now.getFullYear() - 1, 11, 1);\n    } else {\n      current = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n    }\n    this.setState({\n      date: current\n    });\n    return current;\n  }\n\n  createRef = (user_id) => {\n    return (section) => { this[user_id] = section; };\n  }\n\n  render() {\n    const user_nodes = [];\n    const user_dates = [];\n    const trades = [];\n\n    if (this.state.loaded) {\n      let users = ObjectToArray(this.props.all_users_data);\n\n      for (var t=0; t<this.state.trade_names.length; t++) {\n        trades.push((\n          <option key={this.state.trade_names[t]} value={this.state.trade_names[t]}>{this.state.trade_names[t]}</option>\n        ));\n      }\n      let sort_value = this.state.sort;\n      let trade_value = this.state.trade_filter;\n      users.sort(function(a, b){\n        var x = a[sort_value] ? (a.trade_name.indexOf(trade_value)===0 ? \"a\" : a[sort_value].toLowerCase()) : \"zzzzzz\";\n        var y = b[sort_value] ? (b.trade_name.indexOf(trade_value)===0 ? \"a\" : b[sort_value].toLowerCase()) : \"zzzzzz\";\n        if (x < y) {return -1;}\n        if (x > y) {return 1;}\n        return 0;\n      });\n      for (var i=0; i<users.length; i++) {\n        if ((!this.props.selected_project || !this.props.all_projects_data[this.props.selected_project] || users[i].trade_name !== \"Customer\" || this.props.all_projects_data[this.props.selected_project].customer_id === users[i].id) && (this.state.trade_filter === \"all\" || (users[i].trade_name.indexOf(this.state.trade_filter)+1))){\n          // if (!this.props.selected_job || users[i].id !== this.props.selected_job_data.assigned_user) {\n            user_nodes.push((\n              <li key={\"user-\"+users[i].id}>\n                <h3>{users[i].first_name + \" \" + users[i].last_name}</h3>\n                <h4>{SplitString(users[i].trade_name,\",\")}</h4>\n              </li>\n            ));\n            user_dates.push((\n              <li key={\"user-\"+users[i].id} ref={this.createRef(users[i].id)}>\n                <UserHeatmap\n                  handleDayClick={this.handleDayClick}\n                  handleJobClick={this.handleJobClick}\n                  selected_day={this.state.selected_day}\n                  selected_index={this.state.selected_index}\n                  user_id={users[i].id}\n                  month={this.state.date.getMonth()}\n                  year={this.state.date.getFullYear()}\n                  selected_project={this.props.selected_project}\n                  selected_job={this.props.selected_job}\n                  selected_job_data={this.props.selected_job_data}\n                  gotoDate={this.gotoDate}\n                  index={i}\n                />\n              </li>\n            ));\n          // }\n        }\n      }\n    }\n\n    return (\n      <div className={this.props.className + \" scheduler\" + (this.state.loaded?\" loaded\":\" loading\")} >\n        <div className=\"menu\">\n          <input id=\"filter-selects\" type=\"checkbox\" />\n          <label className=\"filter-selects-button\" htmlFor=\"filter-selects\">\n            <i className=\"fas fa-sort-amount-up\"></i>\n          </label>\n          <div className=\"filter-selects\">\n            <div className=\"select-container\">\n              <i className=\"fas fa-sort-alpha-down\"></i>\n              <select onChange={this.selectSort}>\n                <option value=\"trade_name\">sort by trade</option>\n                <option value=\"last_name\">sort by last name</option>\n                <option value=\"first_name\">sort by first name</option>\n              </select>\n              <i className=\"fas fa-caret-down\"></i>\n            </div>\n\n            <div className=\"select-container\">\n              <i className=\"fas fa-filter\"></i>\n              <select value={this.state.trade_filter} onChange={this.selectTradeFilter}>\n                <option value=\"all\">all</option>\n                {trades}\n              </select>\n              <i className=\"fas fa-caret-down\"></i>\n            </div>\n          </div>\n          {this.state.selected_day ? (\n            <div className=\"nav-buttons\">\n              <button className=\"hide-text\" onClick={(e)=>{this.handlePrevDay(e)}}><i className=\"fas fa-angle-left\"></i><span>Previous Day</span></button>\n              <button onClick={(e)=>{this.handleClearSelectedDay(e)}}><i className=\"fas fa-angle-up\"></i><span>{MonthNames[this.state.date.getMonth()]}</span></button>\n              <button className=\"hide-text\" onClick={(e)=>{this.handleNextDay(e)}}><span>Next Day</span><i className=\"fas fa-angle-right\"></i></button>\n            </div>\n          ) : (\n            <div className=\"nav-buttons\">\n              <button className=\"hide-text\" onClick={(e)=>{this.handlePrevMonth(e)}}><i className=\"fas fa-angle-left\"></i><span>Previous Month</span></button>\n              <button onClick={(e)=>{this.handleGotoToday(e)}}><span>Today</span></button>\n              <button className=\"hide-text\" onClick={(e)=>{this.handleNextMonth(e)}}><span>Next Month</span><i className=\"fas fa-angle-right\"></i></button>\n            </div>\n          )}\n        </div>\n        <div className=\"grid-container\">\n          <div className=\"schedule-grid schedule-grid-header\">\n            <ul className=\"user-names\">\n              <li className=\"month-name\">\n                <h3>\n                  {this.state.selected_day ?\n                    WeekDaysShort[new Date(this.state.date.getFullYear(), this.state.date.getMonth(), this.state.selected_day).getDay()] + \" \" + MonthNamesShort[this.state.date.getMonth()] + \" \" + this.state.selected_day :\n                    MonthNames[this.state.date.getMonth()]\n                  }\n                </h3>\n                <h4>{this.state.date.getFullYear()}</h4>\n              </li>\n            </ul>\n            <ul className=\"heat-maps\">\n              <li>\n                <UserHeatmapDates\n                  handleDayClick={this.handleDayClick}\n                  selected_day={this.state.selected_day}\n                  month={this.state.date.getMonth()}\n                  year={this.state.date.getFullYear()}\n                  selected_job={this.props.selected_job}\n                  selected_job_data={this.props.selected_job_data}\n                />\n              </li>\n            </ul>\n          </div>\n          <div id=\"schedule-grid\" className={\"schedule-grid\"}>\n            <div className=\"load-background\"></div>\n            <ul className=\"user-names\">\n            {\n              user_nodes\n            }\n            </ul>\n            <ul className=\"heat-maps\">\n            {\n              user_dates\n            }\n            </ul>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_users_data: state.state.all_users_data,\n    all_projects_data: state.state.all_projects_data,\n    selected_job_index: state.state.selected_job_index,\n    selected_project: state.state.selected_project,\n    // examplePropTwo: state.state.examplePropTwo\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateUsersData}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Scheduler);\n","import React from 'react'\nimport { connect } from 'react-redux';\n\nimport Scheduler from './scheduler'\n\nclass PageSchedule extends React.Component {\n  state = {\n    loaded: false\n  };\n  componentDidMount() {\n    setTimeout(()=>{\n      this.setState({loaded: true});\n    }, 1);\n  }\n  render() {\n    return (\n      <section id=\"page-schedule\" className={this.state.loaded?\"loaded\":\"loading\"}>\n        <Scheduler className=\"card\" />\n      </section>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_users_data: state.state.all_users_data,\n    all_projects_data: state.state.all_projects_data\n  }\n}\n\n\nexport default connect(mapStateToProps)(PageSchedule);\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { updateLeadsData, selectLead, openProjectEditor, updateProjectsData, updateUsersData, selectJob } from '../actions/actions';\n\nimport {Droppable, Draggable } from 'react-beautiful-dnd';\n\n\nconst heat_map = [\n  \"white\",\n  \"#fff3e9\",\n  \"#ffe5cf\",\n  \"#ffd7b6\",\n  \"#ffc99c\",\n  \"#ffbb83\",\n  \"#ffad69\",\n  \"#ff9f50\",\n  \"#ff9136\",\n];\n\nconst max_heat = {\n  new: 3,\n  scheduled: 7,\n  pending: 10,\n  estimate: 10,\n  approved: 10,\n  rejected: 10,\n};\n\nconst getItemStyle = (item, isDragging, draggableStyle) => {\n  const heat = Math.min(Math.round(((new Date() - item[item.status + \"_date\"])/1000/60/60/24)*8/max_heat[item.status]),heat_map.length-1);\n\n  return {\n    // some basic styles to make the items look a bit nicer\n    color: heat >= 8 ? \"white\" : \"black\",\n    // change background colour if dragging\n    background: heat_map[heat],//isDragging ? 'lightgreen' : 'grey',\n    // boxShadow: \"rgba(0, 0, 0, 0.12) 0 0 1rem\",\n    // styles we need to apply on draggables\n    ...draggableStyle\n  }\n};\n\nconst getListStyle = isDraggingOver => ({\n    background: isDraggingOver ? '#e4e4e4' : 'white',\n    padding: \".5rem\",\n    width: \"100%\",\n    flex: \"1 1 auto\"\n});\n\n\n\nclass LeadKanban extends React.Component {\n  state = {\n    sort: \"heat\"\n  }\n\n\n  selectSort = (e) => {\n    // let id=parseInt(e.currentTarget.dataset.id,10);\n    console.log(e.target.value);\n    this.setState({sort: e.target.value});\n  }\n\n  handleEstimateClick = (id) => {\n    return (e) => {\n      this.props.selectLead(id);\n    };\n  }\n\n  handleLeadClick = (id) => {\n    return (e) => {\n      this.props.selectLead(id);\n    };\n  }\n\n  createLead = (item, index) => {\n    return (<Draggable\n      key={item.id}\n      draggableId={item.id}\n      index={index}>\n      {(provided, snapshot) => (\n        <div\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n\n          onClick={this.handleEstimateClick(item.id)}\n          style={getItemStyle(\n            item,\n            snapshot.isDragging,\n            provided.draggableProps.style\n          )}>\n          <div>{item.first_name + \" \" + item.last_name}</div>\n        </div>\n      )}\n    </Draggable>);\n  }\n\n  // <div>\n  //   <i\n  //     className=\"fas fa-pen\"\n  //     onClick={this.handleLeadClick(item.id)}\n  //   ></i>\n  //   <i\n  //     className=\"fas fa-file-invoice-dollar\"\n  //     onClick={this.handleEstimateClick(item.id)}\n  //   ></i>\n  // </div>\n\n\n  render() {\n    let leads = {\n      new_leads: [],\n      pending_leads: [],\n      scheduled_leads: [],\n      estimate_leads: [],\n      approved_leads: [],\n      rejected_leads: [],\n      other_leads: []\n    }\n    for (let l in this.props.all_leads_data) {\n      switch (this.props.all_leads_data[l].status) {\n        case 'new':\n          leads.new_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'pending':\n          leads.pending_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'scheduled':\n          leads.scheduled_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'estimate':\n          leads.estimate_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'approved':\n          leads.approved_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'rejected':\n          leads.rejected_leads.push({...this.props.all_leads_data[l]});\n          break;\n        default:\n          leads.other_leads.push({...this.props.all_leads_data[l]});\n      }\n    }\n\n    let sort_value = this.state.sort;\n\n\n    for (let l in leads) {\n      // leads[l].sort(function(a, b){\n      //   var x = a.index;\n      //   var y = b.index;\n      //   if (x < y) {return -1;}\n      //   if (x > y) {return 1;}\n      //   return 0;\n      // });\n      leads[l].sort(function(a, b){\n        var x = sort_value===\"heat\" ?\n          Math.round(((a[a.status + \"_date\"])/1000/60/60/24)*8/max_heat[a.status] - new Date()) : a[sort_value].toLowerCase();\n        var y = sort_value===\"heat\" ?\n          Math.round(((b[b.status + \"_date\"])/1000/60/60/24)*8/max_heat[b.status] - new Date()) : b[sort_value].toLowerCase();\n        if (x < y) {return -1;}\n        if (x > y) {return 1;}\n        return 0;\n      });\n      // leads[l].sort(function(a, b){\n      //   var x = Math.round(((new Date() - a[a.status + \"_date\"])/1000/60/60/24)*8/max_heat[a.status]);\n      //   var y = Math.round(((new Date() - b[b.status + \"_date\"])/1000/60/60/24)*8/max_heat[b.status]);\n      //   if (x < y) {return 1;}\n      //   if (x > y) {return -1;}\n      //   return 0;\n      // });\n    }\n\n    return (\n      <div className=\"lead-kanban\">\n        <div className=\"menu\">\n          <div>\n            <button\n              onClick={()=>{\n                this.props.selectLead(\"NEWLEAD\");\n              }}\n              className=\"\"\n            >\n              <i className=\"fas fa-plus\"></i>\n              <span>add a new lead</span>\n            </button>\n            <div className=\"select-container\">\n              <i className=\"fas fa-sort-alpha-down\"></i>\n              <select onChange={this.selectSort}>\n                <option value=\"heat\">sort by time in column</option>\n                <option value=\"last_name\">sort by last name</option>\n                <option value=\"first_name\">sort by first name</option>\n              </select>\n              <i className=\"fas fa-caret-down\"></i>\n            </div>\n          </div>\n        </div>\n        <div className=\"columns\">\n        { this.props.all_leads_data && [\n          (<div className=\"droppable-column\" key=\"new\">\n            <h3><i className=\"fas fa-star-of-life\"></i><span>new leads</span></h3>\n            <div>\n              <Droppable\n                className=\"droppable-column\"\n                droppableId=\"new_leads\"\n                type=\"LEAD\"\n              >\n                {(provided, snapshot) => (\n                  <div\n                    ref={provided.innerRef}\n                    style={getListStyle(snapshot.isDraggingOver)}>\n                    {\n                      leads.new_leads.map((item, index) => (\n                        this.createLead(item, index)\n                      ))\n                    }\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </div>\n          </div>),\n          (<div className=\"droppable-column\" key=\"scheduled\">\n            <h3><i className=\"far fa-calendar-alt\"></i><span>estimate scheduled</span></h3>\n            <div>\n              <Droppable\n                className=\"droppable-column\"\n                droppableId=\"scheduled_leads\"\n                type=\"LEAD\"\n              >\n                {(provided, snapshot) => (\n                  <div\n                    ref={provided.innerRef}\n                    style={getListStyle(snapshot.isDraggingOver)}>\n                    {\n                      leads.scheduled_leads.map((item, index) => (\n                        this.createLead(item, index)\n                      ))\n                    }\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </div>\n          </div>),\n          (<div className=\"droppable-column\" key=\"pending\">\n            <h3><i className=\"fas fa-clock\"></i><span>estimate pending</span></h3>\n            <div>\n              <Droppable\n                className=\"droppable-column\"\n                droppableId=\"pending_leads\"\n                type=\"LEAD\"\n              >\n                {(provided, snapshot) => (\n                  <div\n                    ref={provided.innerRef}\n                    style={getListStyle(snapshot.isDraggingOver)}>\n                    {\n                      leads.pending_leads.map((item, index) => (\n                        this.createLead(item, index)\n                      ))\n                    }\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </div>\n          </div>),\n          (<div className=\"droppable-column\" key=\"estimate\">\n            <h3><i className=\"fas fa-clipboard\"></i><span>estimate sent</span></h3>\n            <div>\n              <Droppable\n                className=\"droppable-column\"\n                droppableId=\"estimate_leads\"\n                type=\"LEAD\"\n              >\n                {(provided, snapshot) => (\n                  <div\n                    ref={provided.innerRef}\n                    style={getListStyle(snapshot.isDraggingOver)}>\n                    {\n                      leads.estimate_leads.map((item, index) => (\n                        this.createLead(item, index)\n                      ))\n                    }\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </div>\n          </div>),\n          (<div className=\"droppable-column\" key=\"approved\">\n            <h3><i className=\"fas fa-user-check\"></i><span>estimate approved</span></h3>\n            <div>\n              <Droppable\n                className=\"droppable-column\"\n                droppableId=\"approved_leads\"\n                type=\"LEAD\"\n              >\n                {(provided, snapshot) => (\n                  <div\n                    ref={provided.innerRef}\n                    style={getListStyle(snapshot.isDraggingOver)}>\n                    {\n                      leads.approved_leads.map((item, index) => (\n                        this.createLead(item, index)\n                      ))\n                    }\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </div>\n          </div>),\n          (<div className=\"droppable-column\" key=\"rejected\">\n            <h3><i className=\"fas fa-user-times\"></i><span>estimate rejected</span></h3>\n            <div>\n              <Droppable\n                className=\"droppable-column\"\n                droppableId=\"rejected_leads\"\n                type=\"LEAD\"\n              >\n                {(provided, snapshot) => (\n                  <div\n                    ref={provided.innerRef}\n                    style={getListStyle(snapshot.isDraggingOver)}>\n                    {\n                      leads.rejected_leads.map((item, index) => (\n                        this.createLead(item, index)\n                      ))\n                    }\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </div>\n          </div>),\n          (<div className=\"droppable-column\" key=\"results\">\n            <h3><i className=\"fas fa-arrow-right\"></i>continue</h3>\n            <div className=\"continue-slots\">\n              <Droppable\n                className=\"droppable-column\"\n                droppableId=\"project_leads\"\n                type=\"LEAD\"\n              >\n                {(provided, snapshot) => (\n                  <div\n                    ref={provided.innerRef}\n                    style={getListStyle(snapshot.isDraggingOver)}>\n\n                    {(<div className=\"drag-placeholder\">\n                      <i className=\"fas fa-toolbox\"></i>\n                      <div>start project from lead</div>\n                      <div style={{display:\"none\"}}>{provided.placeholder}</div>\n                    </div>)}\n                  </div>\n                )}\n              </Droppable>\n              <Droppable\n                className=\"droppable-column\"\n                droppableId=\"archive_leads\"\n                type=\"LEAD\"\n              >\n                {(provided, snapshot) => (\n                  <div\n                    ref={provided.innerRef}\n                    style={getListStyle(snapshot.isDraggingOver)}>\n\n                    {(<div className=\"drag-placeholder\">\n                      <i className=\"fas fa-archive\"></i>\n                      <div>archive lead</div>\n                      <div style={{display:\"none\"}}>{provided.placeholder}</div>\n                    </div>)}\n                  </div>\n                )}\n              </Droppable>\n            </div>\n          </div>)\n        ]}\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_leads_data: state.state.all_leads_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateLeadsData, selectLead, openProjectEditor, updateProjectsData, updateUsersData, selectJob}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeadKanban);\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { updateLeadsData } from '../actions/actions';\n\nconst error_color = \"l-0\";\nconst base_color = \"l-10\";\n\nclass LeadChart extends React.Component {\n\n  render() {\n    let leads = {\n      new_leads: [],\n      pending_leads: [],\n      scheduled_leads: [],\n      estimate_leads: [],\n      approved_leads: [],\n      rejected_leads: []\n    }\n    var total_leads = 0;\n    for (let l in this.props.all_leads_data) {\n      switch (this.props.all_leads_data[l].status) {\n        case 'new':\n          leads.new_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'pending':\n          leads.pending_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'scheduled':\n          leads.scheduled_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'estimate':\n          leads.estimate_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'approved':\n          leads.approved_leads.push({...this.props.all_leads_data[l]});\n          break;\n        case 'rejected':\n          leads.rejected_leads.push({...this.props.all_leads_data[l]});\n          break;\n\n        default:\n          break;\n      }\n      total_leads++;\n    }\n    const heat_map_ranges = {\n      new_leads: {range:20},\n      scheduled_leads: {range:30},\n      pending_leads: {range:4,flip:true},\n      estimate_leads: {range:5},\n      approved_leads: {range:15},\n      rejected_leads: {range:4,flip:true},\n    }\n\n    let nodes = {};\n    for (let l in leads) {\n      nodes[l] = (\n        <div className=\"chart-node\" key={l}>\n        <div\n          className={(heat_map_ranges[l].flip&&(leads[l].length > heat_map_ranges[l].range)) ?  error_color : base_color\n        }\n          style={{\n            transform: \"scaleY(\" + ((leads[l].length / total_leads)*5) + \")\"\n          }}\n        ></div>\n        { (heat_map_ranges[l].flip && leads[l].length > heat_map_ranges[l].range) &&\n          (<i className=\"fas fa-exclamation-triangle\"></i>)\n        }\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"lead-chart\">\n        <div className=\"bar\"></div>\n        <i className=\"fas fa-arrow-right continue\"></i>\n        <div className=\"chart\">\n          {nodes.new_leads}\n          {nodes.scheduled_leads}\n          {nodes.pending_leads}\n          {nodes.estimate_leads}\n          {nodes.approved_leads}\n          {nodes.rejected_leads}\n          <div className=\"chart-node\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_leads_data: state.state.all_leads_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateLeadsData}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeadChart);\n","import React from 'react';\nimport RichTextEditor from 'react-rte';\n\nclass Editor extends React.Component {\n\n\n  state = {\n    value: this.props.defaultValue ? RichTextEditor.createValueFromString(this.props.defaultValue, 'html') : RichTextEditor.createEmptyValue()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.defaultValue !== prevProps.defaultValue || this.props.refresh !== prevProps.refresh) {\n      this.setState({\n        value: this.props.defaultValue ? RichTextEditor.createValueFromString(this.props.defaultValue, 'html') : RichTextEditor.createEmptyValue()\n      });\n    }\n  }\n\n  onChange = (value) => {\n    this.setState({value});\n    if (this.props.onChange) {\n      // Send the changes up to the parent component as an HTML string.\n      // This is here to demonstrate using `.toString()` but in a real app it\n      // would be better to avoid generating a string on each change.\n      this.props.onChange(\n        value.toString('html')\n      );\n    }\n  };\n\n  render () {\n    return (\n      <RichTextEditor\n        className=\"editor\"\n        value={this.state.value}\n        onChange={this.onChange}\n      />\n    );\n  }\n}\n\nexport default Editor\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport Editor from './editor';\n\nimport {RandomColors} from '../utilities/data';\n\nimport {openProjectEditor, editProject, updateProjectsData, updateProjectColor, updateUsersData} from '../actions/actions';\n\n\nvar Color = function Color(hexVal) { //define a Color class for the color objects\n    this.hex = hexVal;\n};\n\nconst constructColor = function(colorObj){\n    var hex = colorObj.hex.substring(1);\n    /* Get the RGB values to calculate the Hue. */\n    var r = parseInt(hex.substring(0, 2), 16) / 255;\n    var g = parseInt(hex.substring(2, 4), 16) / 255;\n    var b = parseInt(hex.substring(4, 6), 16) / 255;\n\n    /* Getting the Max and Min values for Chroma. */\n    var max = Math.max.apply(Math, [r, g, b]);\n    var min = Math.min.apply(Math, [r, g, b]);\n\n\n    /* Variables for HSV value of hex color. */\n    var chr = max - min;\n    var hue = 0;\n    var val = max;\n    var sat = 0;\n\n\n    if (val > 0) {\n        /* Calculate Saturation only if Value isn't 0. */\n        sat = chr / val;\n        if (sat > 0) {\n            if (r === max) {\n                hue = 60 * (((g - min) - (b - min)) / chr);\n                if (hue < 0) {\n                    hue += 360;\n                }\n            } else if (g === max) {\n                hue = 120 + 60 * (((b - min) - (r - min)) / chr);\n            } else if (b === max) {\n                hue = 240 + 60 * (((r - min) - (g - min)) / chr);\n            }\n        }\n    }\n    colorObj.chroma = chr;\n    colorObj.hue = hue;\n    colorObj.sat = sat;\n    colorObj.val = val;\n    colorObj.luma = 0.3 * r + 0.59 * g + 0.11 * b;\n    colorObj.red = parseInt(hex.substring(0, 2), 16);\n    colorObj.green = parseInt(hex.substring(2, 4), 16);\n    colorObj.blue = parseInt(hex.substring(4, 6), 16);\n    return colorObj;\n};\n\nconst sortColorsByHue = function (colors) {\n    return colors.sort(function (a, b) {\n        return a.hue - b.hue;\n    });\n};\n\nclass ProjectEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // edit: this.props.edit || false\n      project_data: this.props.all_projects_data[this.props.open_project_editor] || {\n        id: Math.random()\n      }\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.open_project_editor) {\n      if (this.props.open_project_editor !== prevProps.open_project_editor) {\n        if (this.props.open_project_editor === \"NEWPROJECT\") {\n          let new_project = {};\n          if (this.props.new_project_data) {\n            let id=Math.random();\n            let user_id = Math.random();\n            let customer = {\n              ...this.props.new_project_data,\n              id: user_id,\n              trade_name: \"Customer\",\n              jobs: [],\n              tasks: []\n            }\n            new_project = {\n              address: this.props.new_project_data.address,\n              customer_id: user_id,\n              id: id,\n              jobs: [],\n              tasks: [],\n              photos: [],\n              completed: false\n            }\n\n            this.props.updateUsersData({[user_id]: customer});\n          }\n          this.setState({\n            project_data: {\n              ...new_project\n            }\n          });\n        }\n        else {\n          this.setState({\n            project_data: this.props.all_projects_data[this.props.open_project_editor] || {}\n          });\n        }\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.openProjectEditor(null);\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      project_data: {...this.state.project_data, [e.target.name]:e.target.value}\n    });\n  }\n\n  handleColorChange = (e) => {\n    this.setState({\n      project_data: {...this.state.project_data, color:e.target.value}\n    });\n  };\n\n  handleDescriptionChange = (value) => {\n    this.setState({\n      project_data: {...this.state.project_data, description:value}\n    });\n  }\n\n  handleIconChange = (changeEvent) => {\n    this.setState({\n      icon: changeEvent.target.value\n    });\n    setTimeout(()=>{\n      this.setState({\n        project_data: {}\n      });\n    },500);\n  };\n\n  handleSaveChanges = (e) => {\n    // if (this.props.open_project_editor === \"NEWPROJECT\") {\n    //   let id=Math.random();\n    //   let user_id = Math.random();\n    //   let customer = {\n    //     ...this.props.new_project_data,\n    //     id: user_id\n    //   }\n    //   let new_project = {\n    //     ...this.state.project_data,\n    //     address: this.props.new_project_data.address,\n    //     customer_id: user_id,\n    //     id: id,\n    //     icon: this.state.icon,\n    //     completed: false\n    //   }\n    //\n    //   this.props.updateProjectsData({[id]: new_project});\n    //   this.props.updateUsersData({[user_id]: customer});\n    if (this.props.open_project_editor === \"NEWPROJECT\") {\n      this.props.updateProjectsData({[this.state.project_data.id]: this.state.project_data});\n    } else {\n      this.props.editProject(this.state.project_data.id, this.state.project_data);\n      if (this.state.project_data.color !== this.props.all_projects_data[this.state.project_data.id].color) {\n        this.props.updateProjectColor(this.state.project_data.id, this.state.project_data.color);\n      }\n    }\n    setTimeout(()=>{\n      this.setState({\n        project_data: {}\n      });\n    },500);\n  }\n\n  render() {\n\n    let hexArray = [...RandomColors];\n    //\n    // colors.sort(function(a, b){\n    //   var x = a.toLowerCase();\n    //   var y = b.toLowerCase();\n    //   if (x < y) {return 1;}\n    //   if (x > y) {return -1;}\n    //   return 0;\n    // });\n\n    var colors = [];\n    for (let h=0; h<hexArray.length; h++) {\n      var color = new Color(hexArray[h]);\n      constructColor(color);\n      colors.push(color);\n    };\n\n    sortColorsByHue(colors);\n\n    let color_nodes = [];\n\n    for (let i=0; i<colors.length; i++) {\n      color_nodes.push ((\n        <div key={\"color \" + i} className=\"radio\">\n          <label>\n            <input\n              type=\"radio\"\n              value={colors[i].hex}\n              checked={this.state.project_data.color === colors[i].hex}\n              onChange={this.handleColorChange}\n            />\n            <i style={{backgroundColor: colors[i].hex}}></i>\n          </label>\n        </div>\n      ));\n    }\n\n    return (\n      <div className={\"project-editor form\" + (this.props.open_project_editor && this.props.all_projects_data?\" show\":\"\")}>\n        <div className=\"content\">\n          <header>\n            <h1>\n              <span>{(this.state.project_data.name || \"\")}</span>\n            </h1>\n            <div>\n              <button\n                onClick={()=>{\n                  this.handleSaveChanges();\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-check\"></i>\n                <span>save</span>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-times\"></i>\n                <span>cancel</span>\n              </button>\n            </div>\n          </header>\n          <main>\n            <div>\n              <div>\n                <label>project name</label>\n                <input name=\"name\" type=\"text\" placeholder=\"project name\" value={this.state.project_data.name || \"\"} onChange={this.handleChange} />\n              </div>\n            </div>\n            <div>\n              <div>\n                <label>color</label>\n                <div className=\"color-picker\">\n                  {color_nodes}\n                </div>\n              </div>\n            </div>\n            <div>\n              <div>\n                <label>project address</label>\n                <textarea name=\"address\" placeholder=\"project address\" value={this.state.project_data.address || \"\"} onChange={this.handleChange} />\n              </div>\n            </div>\n\n            <div>\n              <div>\n                <label>notes</label>\n                <Editor\n                  defaultValue={(this.props.all_projects_data[this.props.open_project_editor] && this.props.all_projects_data[this.props.open_project_editor].description) || \"\"}\n                  onChange={this.handleDescriptionChange}\n                  refresh={this.props.open_project_editor || this.state.project_data.id}\n                />\n              </div>\n            </div>\n          </main>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_job: state.state.selected_job,\n    open_project_editor: state.state.open_project_editor,\n    new_project_data: state.state.new_project_data,\n    all_projects_data: state.state.all_projects_data,\n    all_jobs_data: state.state.all_jobs_data,\n    all_tasks_data: state.state.all_tasks_data,\n    all_users_data: state.state.all_users_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({openProjectEditor, editProject, updateProjectsData, updateProjectColor, updateUsersData}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectEditor);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport Editor from './editor';\n\nimport {openLeadEditor, updateLeadsData} from '../actions/actions';\n\nclass LeadEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // edit: this.props.edit || false\n      lead_data: this.props.all_leads_data[this.props.open_lead_editor] || {\n        id: Math.random()\n      }\n    };\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.open_lead_editor) {\n      if (this.props.open_lead_editor !== prevProps.open_lead_editor) {\n        this.setState({\n          lead_data: this.props.all_leads_data[this.props.open_lead_editor] || {\n            id: Math.random()\n          }\n        });\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.openLeadEditor(null);\n    setTimeout(()=>{\n      this.setState({\n        lead_data: {\n          id: Math.random()\n        }\n      });\n    },500);\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      lead_data: {...this.state.lead_data, [e.target.name]:e.target.value}\n    });\n  }\n\n  handleDescriptionChange = (value) => {\n    this.setState({\n      task_data: {...this.state.task_data, description:value}\n    });\n  }\n\n  handleSaveChanges = (e) => {\n    if (this.props.open_lead_editor === \"NEWLEAD\") {\n      let id=Math.random();\n      let new_lead = {\n        ...this.state.lead_data,\n        id: id,\n        new_date: new Date(),\n        status: 'new'\n      }\n      this.props.updateLeadsData({\n        [id]: new_lead\n      });\n    } else {\n      this.props.updateLeadsData({\n        [this.props.open_lead_editor]: this.state.lead_data\n      });\n    }\n\n    setTimeout(()=>{\n      this.setState({\n        lead_data: {\n          id: Math.random()\n        }\n      });\n    },500);\n  }\n\n  render() {\n    return (\n      <div className={\"lead-editor form\" + (this.props.open_lead_editor && this.props.all_leads_data?\" show\":\"\")}>\n        <div className=\"content\">\n          <header>\n            <h1><i className=\"fas fa-phone\"></i><span>{(this.state.lead_data.first_name || \"\") + \" \" + (this.state.lead_data.last_name || \"\")}</span></h1>\n            <div>\n              <button\n                onClick={()=>{\n                  this.handleSaveChanges();\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-check\"></i>\n                <span>save</span>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-times\"></i>\n                <span>cancel</span>\n              </button>\n            </div>\n          </header>\n          <main>\n            <div>\n              <div>\n                <label>first name</label>\n                <input name=\"first_name\" type=\"text\" placeholder=\"first name\" value={this.state.lead_data.first_name || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>last name</label>\n                <input name=\"last_name\" type=\"text\" placeholder=\"last name\" value={this.state.lead_data.last_name || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>email</label>\n                <input name=\"email\" type=\"email\" placeholder=\"email\" value={this.state.lead_data.email || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>phone</label>\n                <input name=\"phone\" type=\"text\" placeholder=\"phone\" value={this.state.lead_data.phone || \"\"} onChange={this.handleChange} />\n              </div>\n            </div>\n            <div>\n              <div>\n                <label>notes</label>\n                <Editor\n                  defaultValue={this.state.lead_data.description || \"\"}\n                  onChange={this.handleDescriptionChange}\n                  refresh={this.props.open_lead_editor || this.state.lead_data.id}\n                />\n              </div>\n            </div>\n            <div>\n              <div>\n                <label>address</label>\n                <textarea name=\"address\" placeholder=\"address\" value={this.state.lead_data.address || \"\"} onChange={this.handleChange} />\n              </div>\n            </div>\n            <div>\n              <div>\n                <label>company name</label>\n                <input name=\"company_name\" type=\"text\" placeholder=\"company name\" value={this.state.lead_data.company_name || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>website</label>\n                <input name=\"website\" type=\"text\" placeholder=\"website\" value={this.state.lead_data.website || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>birthday</label>\n                <input name=\"birthday\" type=\"text\" placeholder=\"birthday\" value={this.state.lead_data.birthday || \"\"} onChange={this.handleChange} />\n              </div>\n            </div>\n          </main>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    open_lead_editor: state.state.open_lead_editor,\n    all_leads_data: state.state.all_leads_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({openLeadEditor, updateLeadsData}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeadEditor);\n","import React from 'react'\n\nconst ModalWarning = (props) => (\n  <section id=\"modal-warning\">\n    <header>\n      <h1><i className=\"fas fa-exclamation-triangle\"></i><span>{props.title || \"Warning\"}</span></h1>\n      <button\n        onClick={()=>{\n          window.closeModal();\n        }}\n        className=\"icon-button\"\n      >\n        <i className=\"fas fa-times\"></i>\n      </button>\n    </header>\n    <div className=\"message\">{props.message}</div>\n    <footer>\n      <button\n        onClick={()=>{\n          props.handleConfirm();\n          window.closeModal();\n        }}\n      >\n        <i className=\"fas fa-check\"></i>\n        <span>{props.confirm}</span>\n      </button>\n      <button\n        onClick={()=>{\n          props.handleCancel();\n          window.closeModal();\n        }}\n      >\n        <i className=\"fas fa-times\"></i>\n        <span>{props.cancel}</span>\n      </button>\n    </footer>\n  </section>\n)\n\nexport default ModalWarning\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {updateTasksData, editLead, completeTask, deleteTasks, editTask, addTask, selectTask} from '../actions/actions'\n\nimport ModalWarning from './modal-warning'\nimport {TasksById} from '../utilities/data'\nimport {Content} from '../utilities/content'\nimport {ArrayMove} from '../utilities/array'\n\nconst DeleteAllTasksWarning = Content[window.loc].DeleteAllTasksWarning;\nconst MarkAllTasksCompleteWarning = Content[window.loc].MarkAllTasksCompleteWarning;\n\nclass LeadTaskList extends React.Component {\n  state = {\n    loaded: false,\n    add_task_text: \"\",\n    temp_edit_text: \"\",\n    currently_editing: 0,\n    all_complete: false,\n    selected_lead: null\n  };\n\n  callAPI () {\n    this.temp_api_call = setTimeout(()=>{\n      var tasks_by_id = {};\n\n      for (var i in TasksById) {\n        for (var t=0;t<this.props.all_leads_data[this.props.selected_lead].tasks.length; t++) {\n          if (this.props.all_leads_data[this.props.selected_lead].tasks[t] === TasksById[i].id) {\n            if (!this.props.all_tasks_data[TasksById[i].id]) {\n              tasks_by_id[TasksById[i].id] = {...TasksById[i]};\n            }\n          }\n        }\n      }\n\n      this.props.updateTasksData(tasks_by_id);\n\n      this.setState({\n        loaded: true,\n        selected_lead: this.props.selected_lead\n      })\n    }, 50);\n  }\n\n  componentDidMount () {\n    if (this.props.all_leads_data[this.props.selected_lead]) {\n      this.callAPI();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_lead) {\n      if (this.props.selected_lead !== prevProps.selected_lead) {\n        this.callAPI();\n        this.setState({\n          loaded: false\n        });\n      }\n    }\n  }\n\n  componentWillUnmount () {\n    window.clearTimeout(this.temp_api_call);\n  }\n\n\n  checkIfAllComplete(job_tasks) {\n    let completed = true;\n    for (let t=0; t<job_tasks.length; t++) {\n      const task = this.props.all_tasks_data[job_tasks[t]];\n      if (!task.completed) {\n        completed = false;\n        break;\n      }\n    }\n    return completed && !!job_tasks.length;\n  }\n\n  handleTaskClick = (id) => {\n    return (_e) => {\n      if (this.state.currently_editing !== id) {\n        let task = {...this.props.all_tasks_data[id]};\n        task.completed = !task.completed;\n        this.props.editTask(id, {...task});\n\n\n        const job_tasks = this.props.all_leads_data[this.state.selected_lead].tasks;\n        let tasks = {};\n        for (var t=0; t<job_tasks.length; t++) {\n          let temptask = this.props.all_tasks_data[job_tasks[t]];\n          if (temptask.id === id) {\n            temptask.completed = task.completed;\n          }\n          tasks[temptask.id] = temptask;\n        }\n        this.updateJob(tasks);\n        // this.setState({\n        //   tasks: tasks\n        // });\n      }\n    }\n  }\n\n  handleCompleteAll = () => {\n    const job_tasks = this.props.all_leads_data[this.state.selected_lead].tasks;\n    window.openModal((\n      <ModalWarning\n        message={(\n          <div>\n            <p>\n              <span>{MarkAllTasksCompleteWarning.message_1}</span>\n              <strong>{this.props.all_leads_data[this.state.selected_lead].name}</strong>\n              <span>{MarkAllTasksCompleteWarning.message_2}</span>\n            </p>\n            <p>{MarkAllTasksCompleteWarning.message_3}</p>\n          </div>\n        )}\n        cancel={MarkAllTasksCompleteWarning.cancel}\n        confirm={MarkAllTasksCompleteWarning.confirm}\n        handleConfirm={()=>{\n          let tasks = {};\n          for (var t=0; t<job_tasks.length; t++) {\n            let task = this.props.all_tasks_data[job_tasks[t]];\n            task.completed = true;\n            tasks[task.id] = task;\n          }\n          this.props.updateTasksData(tasks);\n          this.updateJob(tasks);\n        }}\n        handleCancel={()=>{}}\n      />\n    ));\n  }\n\n  handleIncompleteAll = () => {\n    let tasks = {};\n    const job_tasks = this.props.all_leads_data[this.state.selected_lead].tasks;\n    for (var t=0; t<job_tasks.length; t++) {\n      let task = this.props.all_tasks_data[job_tasks[t]];\n      task.completed = false;\n      tasks[task.id] = task;\n    }\n    this.props.updateTasksData(tasks);\n    this.updateJob(tasks);\n  }\n\n  handleDeleteAll = () => {\n    const job_tasks = this.props.all_leads_data[this.state.selected_lead].tasks;\n    window.openModal((\n      <ModalWarning\n        message={(\n          <div>\n            <p>\n              <span>{DeleteAllTasksWarning.message_1}</span>\n              <strong>{this.props.all_leads_data[this.state.selected_lead].name}</strong>\n              <span>{DeleteAllTasksWarning.message_2}</span>\n            </p>\n            <p>{DeleteAllTasksWarning.message_3}</p>\n            <p>{DeleteAllTasksWarning.message_4}</p>\n          </div>\n        )}\n        cancel={DeleteAllTasksWarning.cancel}\n        confirm={DeleteAllTasksWarning.confirm}\n        handleConfirm={()=>{\n          let tasks = [...job_tasks];\n          this.props.deleteTasks(tasks);\n        }}\n        handleCancel={()=>{}}\n      />\n    ));\n  }\n\n  handleDelete = (id) => {\n    return (e)=>{\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.deleteTasks([id]);\n      // delete tasks[id];\n      // this.setState({\n      //   tasks: tasks\n      // });\n    }\n  }\n\n\n  handleAddKeyPress = (e) => {\n    if(e.key === 'Enter'){\n      this.handleAddTask();\n    }\n  }\n\n  handleAddChange = (e) => {\n    this.setState({\n      add_task_text: e.currentTarget.value\n    });\n  }\n\n  handleAddTask = (e) => {\n    if (this.state.add_task_text) {\n      const id = \"task_\"+Math.random();\n      let task = {\n        id: id,\n        name: this.state.add_task_text,\n        completed: false\n      };\n\n      this.props.addTask(id, task, this.state.selected_lead);\n\n      this.setState({\n        add_task_text: \"\"\n      });\n    }\n\n    // this.props.selectTask(\"NEWTASK\");\n  }\n\n\n  handleEdit = (id, name) => {\n    return (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      // this.setState({\n      //   currently_editing: id,\n      //   temp_edit_text: name\n      // });\n      this.props.selectTask(id);\n    }\n  }\n\n  handleEditKeyPress = (e) => {\n    if(e.key === 'Enter'){\n      this.handleConfirmEdit(e);\n    }\n  }\n\n  handleEditChange = (e) => {\n    this.setState({\n      temp_edit_text: e.currentTarget.value\n    });\n  }\n\n  handleCancelEdit = () => {\n    return (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      this.setState({\n        currently_editing: null\n      });\n    }\n  }\n\n  handleConfirmEdit = () => {\n    return (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      let id=this.state.currently_editing;\n\n      this.props.editTask(id, {name: this.state.temp_edit_text});\n\n      this.setState({\n        currently_editing: null\n      });\n    }\n  }\n\n  updateJob (tasks) {\n    // this.props.all_leads_data[this.state.selected_lead].tasks = tasks;\n    let progress = 0;\n    let total_progress = 0;\n    let total_tasks =0;\n    for (let t in tasks) {\n      if (tasks[t].completed) {\n        progress++;\n      }\n      total_tasks++;\n    }\n    total_progress = Math.round(100*(progress / total_tasks)) || 0;\n    console.log(total_progress);\n    //UPDATE JOB\n    this.props.editLead(this.props.selected_lead, {progress: total_progress});\n\n  }\n\n  changeMode (mode) {\n    this.setState({\n      mode: mode\n    });\n  }\n\n  getMenu () {\n    const job_tasks = this.state.selected_lead && this.state.loaded ? this.props.all_leads_data[this.state.selected_lead].tasks : [];\n    const menu = (\n      <div className=\"menu\">\n        <div>\n          <div className=\"button-group\">\n            <input type=\"text\" placeholder=\"task name\" value={this.state.add_task_text} onChange={this.handleAddChange} onKeyPress={this.handleAddKeyPress} />\n            <button onClick={(e)=>{this.handleAddTask(e)}}><i className=\"fas fa-plus\"></i><span>add task</span></button>\n          </div>\n        </div>\n        <div>\n          <button onClick={(e)=>{this.handleDeleteAll()}} disabled={!job_tasks.length}><i className=\"fas fa-trash\"></i><span>delete all</span></button>\n        </div>\n      </div>\n    );\n    return menu;\n  }\n\n  handleTaskDragStart = (e) => {\n    this.dragged_id= e.target.dataset.id;\n    this.dragged_index= e.target.dataset.index;\n  }\n\n  handleTaskDragEnd = (e) => {\n    window.setStyle(``);\n    if (this.drop_id) {\n      this.handleTaskDrop(e);\n    }\n  }\n\n  handleTaskDragOver = (e) => {\n    e.preventDefault();\n    if (e.currentTarget.dataset.id !== this.drop_id) {\n      //To fix performance issues, rather than calling render, we change a stylesheet to apply styles\n      if (parseInt(e.currentTarget.dataset.index, 10) >= parseInt(this.dragged_index,10)) {\n        window.setStyle(`\n          [data-id=\"` + e.currentTarget.dataset.id + `\"]:after {\n            bottom: 0 !important;\n            opacity: 1 !important;\n          }\n        `);\n      } else {\n        window.setStyle(`\n          [data-id=\"` + e.currentTarget.dataset.id + `\"]:after {\n            top: 0 !important;\n            opacity: 1 !important;\n          }\n        `);\n      }\n      this.drop_id = e.currentTarget.dataset.id;\n      this.drop_index = e.currentTarget.dataset.index;\n    }\n  }\n\n  handleTaskDragLeave = (e) => {\n    e.preventDefault();\n  }\n\n  handleTaskDrop = (e) => {\n    e.preventDefault();\n    let tasks = [...this.props.all_leads_data[this.state.selected_lead].tasks];\n    let old_index = this.dragged_index;\n    let new_index = this.drop_index;\n\n    this.drop_id = null;\n    window.setStyle(``);\n\n    ArrayMove(tasks, parseInt(old_index,10), parseInt(new_index,10));\n\n    this.props.editLead(this.state.selected_lead, {tasks});\n  }\n\n\n  render() {\n    let task_nodes = [];\n    if (this.state.selected_lead) {\n      const job_tasks = this.props.all_leads_data[this.state.selected_lead].tasks;\n\n      if (job_tasks && this.state.loaded) {\n        let tasks = [...job_tasks];\n\n        for (var t=0; t<tasks.length; t++) {\n          const task = this.props.all_tasks_data[tasks[t]];\n          if (task) {\n            task_nodes.push((\n              <li\n                key={this.state.selected_lead + \"_\" + task.id}\n                className={\n                  \"task\" +\n                  (task.completed ? \" completed\" : \"\") +\n                  (task.id === this.state.currently_editing ? \" currently-editing\" : \"\") +\n                  (this.state.drop_id === task.id ? (\" drop-\"+this.state.drop_location) : \"\")\n                }\n                data-id={task.id}\n                data-index={t}\n                onClick={this.handleTaskClick(task.id)}\n\n                draggable\n                onDrag={this.handleTaskDragStart}\n                onDragEnd={this.handleTaskDragEnd}\n\n                onDragOver={this.handleTaskDragOver}\n                onDragLeave={this.handleTaskDragLeave}\n                onDrop={this.handleTaskDrop}\n              >\n                <h3>\n                  <span className=\"icon-holder\"><i className=\"fas fa-check-circle check\"></i><i className=\"far fa-circle\"></i></span>\n                  {this.state.currently_editing === task.id ? (\n                    <input className=\"\" defaultValue={task.name} onChange={this.handleEditChange} onKeyPress={this.handleEditKeyPress} />\n                  ):(\n                    <span className=\"task-name\">{task.name}</span>\n                  )}\n                </h3>\n                {(task.start_date) && (\n                  <span className=\"date\">\n                    <span className=\"date-value\">\n                      {task.start_date.toLocaleDateString()}\n                    </span>\n                    <span className=\"time-value\">\n                      {task.start_date.toLocaleTimeString() + (task.end_date ? \" - \" + task.end_date.toLocaleTimeString() : \"\")}\n                    </span>\n                  </span>\n                )}\n                <div>\n                  {this.state.currently_editing === task.id ? (\n                    <div>\n                      <button className=\"icon-button\" onClick={this.handleConfirmEdit(task.id)} title=\"Apply\"><i className=\"fas fa-check\"></i></button>\n                      <button className=\"icon-button\" onClick={this.handleCancelEdit(task.id)} title=\"Cancel\"><i className=\"fas fa-times\"></i></button>\n                    </div>\n                  ):(\n                    <div>\n                      <button className=\"icon-button\" onClick={this.handleEdit(task.id, task.name)} title=\"Edit Task\"><i className=\"fas fa-edit\"></i></button>\n                      <button className=\"icon-button\" onClick={this.handleDelete(task.id)} title=\"Delete Task\"><i className=\"fas fa-trash\"></i></button>\n                    </div>\n                  )}\n                </div>\n              </li>\n            ));\n          }\n        }\n      }\n    }\n\n    return (\n      <div className={\"job-tasks\" + (this.state.loaded?\"\":\" loading\")} >\n        {this.getMenu()}\n        <div className=\"task-list\">\n          <ul>{task_nodes}</ul>\n        </div>\n\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_tasks_data: state.state.all_tasks_data,\n    all_leads_data: state.state.all_leads_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateTasksData, editLead, completeTask, deleteTasks, editTask, addTask, selectTask}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeadTaskList);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport Editor from './editor';\n\nimport LeadTaskList from './lead-task-list';\n\nimport {openJobEditor, editJob, editLead} from '../actions/actions';\n\n\nclass JobEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // edit: this.props.edit || false\n      job_data: {\n        id: Math.random()\n      }\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.open_job_editor && this.props.open_job_editor.lead_id) {\n      if (!prevProps.open_job_editor || this.props.open_job_editor.lead_id !== prevProps.open_job_editor.lead_id) {\n        this.setState({\n          job_data: {...this.props.open_job_editor.job_data}\n        });\n      }\n    }\n    else if (this.props.open_job_editor) {\n      if (this.props.open_job_editor !== prevProps.open_job_editor) {\n        if (this.props.open_job_editor === \"NEWJOB\") {\n\n        }\n        else {\n          this.setState({\n            job_data: this.props.all_jobs_data[this.props.open_job_editor] || {}\n          });\n        }\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.openJobEditor(null);\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      job_data: {...this.state.job_data, [e.target.name]:e.target.value}\n    });\n  }\n\n  handleDescriptionChange = (value) => {\n    this.setState({\n      job_data: {...this.state.job_data, description:value}\n    });\n  }\n\n  handleSaveChanges = (e) => {\n    if (this.props.open_job_editor.lead_id) {\n\n      let jobs = [...this.props.all_leads_data[this.props.open_job_editor.lead_id].jobs];\n\n      // jobs[this.props.open_job_editor.job_index] = {...this.state.job_data};\n\n      // this.props.editLead(this.props.open_job_editor.lead_id, {jobs:jobs});\n      this.props.editJob(jobs[this.props.open_job_editor.job_index], this.state.job_data);\n\n    } else {\n      if (this.props.open_job_editor === \"NEWJOB\") {\n        this.props.updateJobData({[this.state.job_data.id]: this.state.job_data});\n      } else {\n        this.props.editJob(this.state.job_data.id, this.state.job_data);\n      }\n    }\n    setTimeout(()=>{\n      this.setState({\n        job_data: {}\n      });\n    },500);\n  }\n\n  render() {\n\n    return (\n      <div className={\"job-editor form\" + (this.props.open_job_editor && this.props.all_jobs_data?\" show\":\"\")}>\n        <div className=\"content\">\n          <header>\n            <h1>\n              <span>{(this.state.job_data.name || \"\")}</span>\n            </h1>\n            <div>\n              <button\n                onClick={()=>{\n                  this.handleSaveChanges();\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-check\"></i>\n                <span>save</span>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-times\"></i>\n                <span>cancel</span>\n              </button>\n            </div>\n          </header>\n          <main>\n            <div>\n              <div>\n                <div>\n                  <label>job name</label>\n                  <input name=\"name\" type=\"text\" placeholder=\"job name\" value={this.state.job_data.name || \"\"} onChange={this.handleChange} />\n                </div>\n                <div>\n                  <label>notes</label>\n                  <Editor\n                    defaultValue={\n                      ((this.props.open_job_editor && this.props.open_job_editor.lead_id) ?(\n                        this.props.open_job_editor.job_data.description\n                      ):(\n                        this.props.all_jobs_data[this.props.open_job_editor] && this.props.all_jobs_data[this.props.open_job_editor].description\n                      ))\n                      || \"\"\n                    }\n                    onChange={this.handleDescriptionChange}\n                    refresh={this.state.job_data.id}\n                  />\n                </div>\n              </div>\n\n\n\n            </div>\n          </main>\n        </div>\n      </div>\n    );\n  }\n}\n\n// <div>\n//   <LeadTaskList />\n// </div>\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_job: state.state.selected_job,\n    open_job_editor: state.state.open_job_editor,\n    new_job_data: state.state.new_job_data,\n    all_jobs_data: state.state.all_jobs_data,\n    all_leads_data: state.state.all_leads_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({openJobEditor, editJob, editLead}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(JobEditor);\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {\n  updateProjectTemplatesData,\n  updateJobTemplatesData,\n  editLead,\n  openJobEditor\n} from '../actions/actions';\n\n\nimport {ProjectTemplates, JobTemplates} from '../utilities/data'\n\nimport {Droppable, Draggable } from 'react-beautiful-dnd';\n\n\nconst getProjectItemStyle = (item, isDragging, draggableStyle) => {\n  return {\n    // some basic styles to make the items look a bit nicer\n    color: \"black\",\n    background: \"#c1c1c1\",\n    padding: \"1rem\",\n    margin: \"0 .5rem .5rem 0\",\n    borderRadius: \"5px\",\n    width: \"auto\",\n    // change background colour if dragging\n    // background: heat_map[heat],//isDragging ? 'lightgreen' : 'grey',\n    // boxShadow: \"rgba(0, 0, 0, 0.12) 0 0 1rem\",\n    // styles we need to apply on draggables\n    ...draggableStyle\n  }\n};\n\nconst getItemStyle = (item, isDragging, draggableStyle) => {\n  return {\n    // some basic styles to make the items look a bit nicer\n    color: \"black\",\n    background: \"#c1c1c1\",\n    padding: \"1rem\",\n    margin: \"0 .5rem .5rem 0\",\n    borderRadius: \"5px\",\n    width: \"auto\",\n    // change background colour if dragging\n    // background: heat_map[heat],//isDragging ? 'lightgreen' : 'grey',\n    // boxShadow: \"rgba(0, 0, 0, 0.12) 0 0 1rem\",\n    // styles we need to apply on draggables\n    ...draggableStyle\n  }\n};\n\nconst getTimelineItemStyle = (item, isDragging, draggableStyle) => {\n  return {\n    // some basic styles to make the items look a bit nicer\n    padding: \".5rem\",\n    margin: \"0 .5rem 0 0\",\n    borderRadius: \"5px\",\n    width: \"auto\",\n    flex: \"0 0 auto\",\n    backgroundColor: \"#3a3a3a\",\n    // change background colour if dragging\n    // background: heat_map[heat],//isDragging ? 'lightgreen' : 'grey',\n    // boxShadow: \"rgba(0, 0, 0, 0.12) 0 0 1rem\",\n    // styles we need to apply on draggables\n    ...draggableStyle\n  }\n};\n\nconst getListStyle = isDraggingOver => ({\n    background: isDraggingOver ? '#e4e4e4' : 'transparent',\n    display: \"flex\",\n    padding: \".5rem 0\",\n    width: \"100%\",\n    minHeight: \"5rem\",\n    flex: \"1 1 auto\",\n    position: \"relative\",\n    zIndex: \"1\",\n    flexFlow: \"row wrap\"\n});\n\nconst getDropListStyle = isDraggingOver => ({\n    background: isDraggingOver ? '#e4e4e4' : 'transparent',\n    display: \"flex\",\n    padding: \"1.5rem\",\n    width: \"100%\",\n    minHeight: \"10rem\",\n    flex: \"1 1 auto\",\n    position: \"relative\",\n    zIndex: \"1\"\n});\n\n\nclass EstimateProject extends React.Component {\n  state = {\n    loaded: false,\n    tab: \"project-templates\"\n  };\n\n  getTemplateData () {\n    if (!this.props.all_job_templates_data || !this.props.all_project_templates_data) {\n      this.props.updateJobTemplatesData(JobTemplates);\n      this.props.updateProjectTemplatesData(ProjectTemplates);\n    }\n  }\n\n  componentDidMount() {\n    this.getTemplateData();\n  }\n\n  handleTimelineValueChange = (item, index, input) => {\n    return (e) => {\n      let jobs = [...this.props.all_leads_data[this.props.selected_lead].jobs];\n      jobs[index].data[input].value = e.target.value;\n      this.props.editLead(this.props.selected_lead, {jobs:jobs});\n    };\n  }\n\n  handleDeleteJobTemplate = (index) => {\n    return (e) => {\n      e.stopPropagation();\n      let jobs = [...this.props.all_leads_data[this.props.selected_lead].jobs];\n      jobs.splice(index, 1);\n      console.log(index);\n      this.props.editLead(this.props.selected_lead, {jobs:jobs});\n    }\n  }\n\n  handleTimelineJobClick = (item, index) => (\n    (_e) => {\n      this.props.openJobEditor({\n        lead_id: this.props.selected_lead,\n        job_data: item,\n        job_index: index\n      });\n    }\n  )\n\n  handleLabelClick = (e) => {\n    e.stopPropagation();\n  }\n\n  createTimelineJob = (id, index) => {\n    var inputs = [];\n    let item = this.props.all_jobs_data[id];\n    if (item.data) {\n      for (var i = 0; i<item.data.length; i++) {\n        inputs.push((\n          <div key={item.id + i}>\n            <label onClick={this.handleLabelClick}>\n              <span>{item.data[i].name}</span>\n              <input type={item.data[i].type} value={item.data[i].value} onChange={this.handleTimelineValueChange(item, index, i)} />\n            </label>\n          </div>\n        ));\n      }\n    }\n    return (<Draggable\n      key={\"timeline_\"+item.id+index}\n      draggableId={\"timeline_\"+item.id+index}\n      index={index}>\n      {(provided, snapshot) => (\n        <div\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n          onClick={this.handleTimelineJobClick(item, index)}\n          style={getTimelineItemStyle(\n            item,\n            snapshot.isDragging,\n            provided.draggableProps.style\n          )}>\n          <header>\n            <i className={item.icon}></i>\n            <span className=\"title\">{item.name}</span>\n            <button title=\"close\" onClick={this.handleDeleteJobTemplate(index)} className=\"icon-button\"><i className=\"fas fa-times\"></i></button>\n          </header>\n          {inputs}\n        </div>\n      )}\n    </Draggable>);\n  }\n\n  createJob = (item, index) => {\n    return (<Draggable\n      key={item.id}\n      draggableId={item.id}\n      index={index}>\n      {(provided, snapshot) => (\n        <div\n          className=\"job\"\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n\n          style={getItemStyle(\n            item,\n            snapshot.isDragging,\n            provided.draggableProps.style\n          )}>\n\n          <i className={item.icon}></i>\n          <span>{item.name}</span>\n        </div>\n      )}\n    </Draggable>);\n  }\n\n  createProject = (item, index) => {\n    return (<div className=\"drag-project\" key={item.id}>\n      <Draggable\n        key={item.id}\n        draggableId={item.id}\n        index={index}\n      >\n        {(provided, snapshot) => (\n          <div\n            ref={provided.innerRef}\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            style={getProjectItemStyle(\n              item,\n              snapshot.isDragging,\n              provided.draggableProps.style\n            )}>\n            <div>{item.name}</div>\n          </div>\n        )}\n      </Draggable>\n      {this.props.all_job_templates_data && (\n        <div className=\"jobs\">{\n          item.jobs.map((job, index) => (\n            <div key={job}>\n              <i className={this.props.all_job_templates_data[job].icon}></i>\n              {this.props.all_job_templates_data[job].name}\n            </div>\n          ))\n        }</div>\n      )}\n    </div>);\n  }\n\n\n  changeMode (mode) {\n    this.setState({\n      tab: mode\n    });\n  }\n\n  render() {\n    let timeline = this.props.selected_lead ? this.props.all_leads_data[this.props.selected_lead].jobs : [];\n    let job_templates = [];\n    let project_templates = [];\n    const sort_value = \"name\";\n\n\n\n    if (this.props.all_job_templates_data) {\n      for (var j in this.props.all_job_templates_data) {\n        job_templates.push(this.props.all_job_templates_data[j]);\n      }\n\n      job_templates.sort(function(a, b){\n        var x = a[sort_value].toLowerCase();\n        var y = b[sort_value].toLowerCase();\n        if (x < y) {return -1;}\n        if (x > y) {return 1;}\n        return 0;\n      });\n    }\n\n    if (this.props.all_project_templates_data) {\n      for (var p in this.props.all_project_templates_data) {\n        project_templates.push(this.props.all_project_templates_data[p]);\n      }\n\n      project_templates.sort(function(a, b){\n        var x = a[sort_value].toLowerCase();\n        var y = b[sort_value].toLowerCase();\n        if (x < y) {return -1;}\n        if (x > y) {return 1;}\n        return 0;\n      });\n    }\n\n    return (\n      <article\n        className={\"estimate-project\"}\n      >\n        <header>\n          <h2>{this.props.selected_lead_data.name}</h2>\n        </header>\n        <div className=\"timeline\">\n          <Droppable\n            className=\"droppable-column\"\n            droppableId=\"timeline\"\n            type=\"TEMPLATE\"\n            direction=\"horizontal\"\n          >\n            {(provided, snapshot) => (\n              <div\n                ref={provided.innerRef}\n                style={getDropListStyle(snapshot.isDraggingOver)}>\n                {!timeline.length && (\n                  <span className=\"icon\">\n                    <span>drag templates </span>\n                    <i className=\"fas fa-hand-rock\"></i>\n                    <span> on to timeline</span>\n                  </span>\n                )}\n                {\n                  timeline.map((item, index) => (\n                    this.createTimelineJob(item, index)\n                  ))\n                }\n                {provided.placeholder}\n                <div style={{\n                  width: \"1rem\",\n                  opacity: \"0\",\n                  display: \"inline-block\",\n                  height: \"2rem\",\n                  flex: \"0 0 auto\"\n                }}></div>\n              </div>\n            )}\n\n          </Droppable>\n        </div>\n\n        <div className=\"job-templates\">\n          <header>\n            <button className={\"tab-button \" + (this.state.tab === \"project-templates\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"project-templates\")}}>project templates</button>\n            <button className={\"tab-button \" + (this.state.tab === \"job-templates\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"job-templates\")}}>job templates</button>\n          </header>\n          <div className=\"tab-panel\">\n            <div className={this.state.tab === \"project-templates\"?\"show\":\"\"}>\n              {this.state.tab === \"project-templates\" && (\n                <Droppable\n                  className=\"droppable-column\"\n                  droppableId=\"template_jobs\"\n                  type=\"TEMPLATE\"\n                  isDropDisabled\n                >\n                  {(provided, snapshot) => (\n                    <div\n                      ref={provided.innerRef}\n                      style={getListStyle(snapshot.isDraggingOver)}>\n                      {\n                        project_templates.map((item, index) => (\n                          this.createProject(item, index)\n                        ))\n                      }\n                    </div>\n                  )}\n                </Droppable>\n              )}\n            </div>\n            <div className={this.state.tab === \"job-templates\"?\"show\":\"\"}>\n              {this.state.tab === \"job-templates\" && (\n                <Droppable\n                  className=\"droppable-column\"\n                  droppableId=\"template_jobs\"\n                  type=\"TEMPLATE\"\n                  direction=\"horizontal\"\n                  isDropDisabled\n                >\n                  {(provided, snapshot) => (\n                    <div\n                      ref={provided.innerRef}\n                      style={getListStyle(snapshot.isDraggingOver)}>\n                      {\n                        job_templates.map((item, index) => (\n                          this.createJob(item, index)\n                        ))\n                      }\n                    </div>\n                  )}\n                </Droppable>\n              )}\n            </div>\n          </div>\n        </div>\n      </article>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_lead: state.state.selected_lead,\n    all_leads_data: state.state.all_leads_data,\n    all_jobs_data: state.state.all_jobs_data,\n    all_project_templates_data: state.state.all_project_templates_data,\n    all_job_templates_data: state.state.all_job_templates_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({\n    updateProjectTemplatesData,\n    updateJobTemplatesData,\n    editLead,\n    openJobEditor\n  }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EstimateProject);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport LeadEditor from './lead-editor';\nimport JobEditor from './job-editor';\n\nimport EstimateProject from './estimate-project';\n\nimport {openLeadEditor, updateLeadsData, selectLead} from '../actions/actions';\n\nclass LeadEstimator extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // edit: this.props.edit || false\n      selected_lead_data: this.props.all_leads_data[this.props.selected_lead] || {\n        jobs:[]\n      }\n    };\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_lead) {\n      if (this.props.selected_lead !== prevProps.selected_lead) {\n        this.setState({\n          selected_lead_data: this.props.all_leads_data[this.props.selected_lead] || {\n            jobs:[]\n          }\n        });\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.selectLead(null);\n    setTimeout(()=>{\n      this.setState({\n        selected_lead_data: {\n          jobs:[]\n        }\n      });\n    },500);\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      selected_lead_data: {...this.state.selected_lead_data, [e.target.name]:e.target.value}\n    });\n  }\n\n  handleDescriptionChange = (value) => {\n    this.setState({\n      task_data: {...this.state.task_data, description:value}\n    });\n  }\n\n  handleSaveChanges = (e) => {\n    if (this.props.selected_lead === \"NEWLEAD\") {\n      let id=Math.random();\n      let new_lead = {\n        ...this.state.selected_lead_data,\n        id: id,\n        new_date: new Date(),\n        status: 'new'\n      }\n      this.props.updateLeadsData({\n        [id]: new_lead\n      });\n    } else {\n      this.props.updateLeadsData({\n        [this.props.selected_lead]: {...this.state.selected_lead_data, jobs: this.props.all_leads_data[this.props.selected_lead].jobs}\n      });\n    }\n\n    setTimeout(()=>{\n      this.setState({\n        selected_lead_data: {\n          jobs:[]\n        }\n      });\n    },500);\n  }\n\n  render() {\n    return (\n      <div className={\"lead-estimator form\" + (this.props.selected_lead && this.props.all_leads_data?\" show\":\"\")}>\n        <div className=\"content\">\n          <header>\n            <h1><i className=\"fas fa-phone\"></i><span>{(this.state.selected_lead_data.first_name || \"\") + \" \" + (this.state.selected_lead_data.last_name || \"\")}</span></h1>\n            <div>\n              <button\n                onClick={()=>{\n                  this.props.openLeadEditor(this.props.selected_lead);\n                }}\n                className=\"icon-button\"\n              >\n                <i className=\"fas fa-edit\"></i>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleSaveChanges();\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-check\"></i>\n                <span>save</span>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-times\"></i>\n                <span>cancel</span>\n              </button>\n            </div>\n          </header>\n          <main>\n            <EstimateProject selected_lead_data={this.state.selected_lead_data} />\n          </main>\n          <LeadEditor />\n          <JobEditor />\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_lead: state.state.selected_lead,\n    all_leads_data: state.state.all_leads_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({selectLead, updateLeadsData, openLeadEditor}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeadEstimator);\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { updateLeadsData } from '../actions/actions';\n\nimport LeadKanban from './lead-kanban';\nimport LeadChart from './lead-chart';\nimport ProjectEditor from './project-editor';\n\nimport {LeadList} from '../utilities/data'\n\nimport LeadEstimator from './lead-estimator';\n\nclass PageLeads extends React.Component {\n  state = {\n    loaded: false\n  };\n  componentDidMount() {\n    this.temp_load_data = setTimeout(()=>{\n      const lead_names = Object.keys(this.props.all_leads_data);\n      if (!lead_names.length) {\n        this.props.updateLeadsData(LeadList);\n      }\n      this.setState({loaded: true});\n    }, 1000);\n  }\n\n  componentWillUnmount () {\n    window.clearTimeout(this.temp_load_data);\n  }\n\n  render() {\n    return (\n      <section id=\"page-leads\" className={this.state.loaded?\"loaded\":\"loading\"}>\n        <div className=\"load-background\"></div>\n        <div className=\"card f-nogrow\">\n          <LeadChart />\n        </div>\n        <div className=\"card d1 f-grow kanban-card\">\n          <LeadKanban />\n        </div>\n        <LeadEstimator />\n      </section>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    all_leads_data: state.state.all_leads_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateLeadsData}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageLeads);\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {\n  selectJob,\n  updateJobsData,\n  updateUsersData,\n  editJob,\n  openJobCreator,\n  closeJobCreator,\n  openProjectEditor,\n  openProjectSummary,\n  openPhotoGallery,\n  openInvoiceEditor\n} from '../actions/actions';\n\nimport {Content} from '../utilities/content'\nimport {JobsById, UsersById} from '../utilities/data'\n\nconst MonthNames = Content[window.loc].MonthNames;\n\n\n\nclass Project extends React.Component {\n  state = {\n    loaded: false,\n    selected_job: \"none\"\n  };\n\n  getJobData () {\n    var jobs_by_id = {};\n    let the_job_id;\n    this.props.project_data.jobs.map((job_id, i) => {\n      the_job_id = job_id;\n      let job_insert = {\n        ...JobsById[job_id]\n      };\n      jobs_by_id[job_insert.id] = job_insert;\n      return true;\n    });\n    if (!this.props.all_jobs_data[the_job_id]) {\n      this.props.updateJobsData(jobs_by_id);\n    }\n    if (!this.props.all_users_data[this.props.project_data.customer_id]) {\n      this.props.updateUsersData({[this.props.project_data.customer_id]: UsersById[this.props.project_data.customer_id]})\n    }\n    if (!this.props.project_data.jobs.length) {\n      this.props.openJobCreator(this.props.project_data.id);\n    }\n  }\n\n  componentDidMount() {\n    this.getJobData();\n    // this.setState({\n    //   months: data.months\n    // });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.project_data.id !== prevProps.project_data.id) {\n      this.getJobData();\n      // this.setState({\n      //   months: data.months\n      // });\n    }\n  }\n\n  handleAddButton() {\n    this.props.openJobCreator(this.props.project_data.id);\n  }\n\n\n  selectJob = (id, index) => {\n    return (e) => {\n      e.stopPropagation();\n      this.props.selectJob(this.props.id, id, index);\n      this.props.closeJobCreator();\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.selectJob(null, null);\n  }\n\n  handleInvoiceButton = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    let invoice_id = this.props.all_projects_data[this.props.project_data.id].invoice_id || \"NEWINVOICE\";\n\n    console.log(this.props.all_projects_data[this.props.project_data.id]);\n\n    this.props.openInvoiceEditor({\n      invoice_id: invoice_id,\n      project_id: this.props.project_data.id\n    });\n  }\n\n  handleEditButton = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.openProjectEditor(this.props.project_data.id);\n  }\n\n  handleSummaryButton = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.openProjectSummary(this.props.project_data.id);\n  }\n\n  handlePhotoButton = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.openPhotoGallery(this.props.project_data.id);\n  }\n\n  render() {\n    var months = {\n      Unscheduled: []\n    };\n    var display_months = [];\n    var today = new Date();\n\n    if (this.props.all_jobs_data && this.props.project_data.jobs) {\n      this.props.project_data.jobs.map((job_id, i) => {\n        let job_insert = {\n          ...this.props.all_jobs_data[job_id]\n        };\n        if (!job_insert.id) {\n          return true;\n        }\n        if (!job_insert.start_dates.length) {\n          months.Unscheduled.push(job_insert);\n          return true;\n        }\n\n        job_insert.start_dates.map((start_date, i) => {\n          let job_month = start_date.getMonth();\n          if (!months[job_month]) {\n            months[job_month] = [];\n          }\n          months[job_month].push({...job_insert, start_date: start_date, end_date: job_insert.end_dates[i], index: i});\n          return true;\n        });\n        return true;\n      });\n      var month_keys = Object.keys(months);\n      var after_today = false;\n      month_keys.sort(function(a, b){\n        return (months[a][0]?months[a][0].start_date:0) - (months[b][0]?months[b][0].start_date:0)\n      });\n      for (var i=0; i<month_keys.length; i++) {\n        var jobs = months[month_keys[i]];\n        jobs.sort(function(a, b){return a.start_date - b.start_date});\n        for (var j=0; j<jobs.length; j++) {\n          var job = jobs[j];\n          var mark_today = \"\";\n          if (!after_today && job.start_date && job.start_date >= new Date(today.getFullYear(), today.getMonth(), today.getDate())) {\n            after_today = true;\n            mark_today = \" after-today\";\n          }\n          if (!job.id) {\n            console.log(\"no id\", job);\n          }\n          display_months.push((\n            <li\n              key={job.id + (job.index||\"\")}\n              data-id={job.id}\n              className={\n                (job.progress === 100 ? \"complete\" : job.progress > 0 ? \"progress\" : \"\") +\n                (\" \"+month_keys[i]) +\n                (job.start_date && (job.start_date.toDateString() === (new Date()).toDateString())?\" today\":\"\") +\n                mark_today +\n                (j === jobs.length-1?\" last-of-month\":\"\") +\n                (job.id===this.props.selected_job?\" selected\":\" not-selected\") +\n                ((job.id===this.props.selected_job && job.index===this.props.selected_job_index)?\" indicated\":\"\") +\n                ((j<jobs.length-1) && jobs[j+1].id===this.props.selected_job?\" job-before-selected\":\"\")\n              }\n              onClick={this.selectJob(job.id, job.index)}\n            >\n              {\n                j===0?<h3>{MonthNames[month_keys[i]] || month_keys[i]}</h3>:[]\n              }\n              <span className=\"h-line\" />\n              <span className=\"selected-arrow\" />\n              <span className=\"date\">{(job.start_date ? job.start_date.getDate() : \"\")}</span>\n              <div className=\"job-box\">\n                <h4><i className={job.icon}></i><span className=\"job-name\">{job.name}</span></h4>\n              </div>\n              <span className=\"status\">\n                <span className=\"progress-bar\" style={{transform:\"scaleX(\"+((job.progress||0)/100)+\")\"}}></span>\n                <span className=\"status-text\">{\n                  job.progress===100 ?\n                  (<i className=\"fas fa-check\"></i>):\n                  !job.progress ?\n                  (\"\"):\n                  (job.progress + \"%\")\n                }</span>\n              </span>\n            </li>\n          ));\n        };\n      };\n    }\n    return (\n      <article\n        className={\"project\" +\n          (this.props.last_selected?\" last_selected\":\"\")\n        }\n      >\n        <header>\n          <h2>{this.props.project_data.name}</h2>\n          <div className=\"button-menu\">\n            <button title=\"create invoice\" onClick={this.handleInvoiceButton} className=\"icon-button\"><i className=\"fas fa-file-invoice-dollar\"></i></button>\n            <button title=\"edit details\" onClick={this.handleEditButton} className=\"icon-button\"><i className=\"fas fa-edit\"></i></button>\n            <button title=\"photo gallery\" onClick={this.handlePhotoButton} className=\"icon-button\"><i className=\"fas fa-images\"></i></button>\n            <button title=\"project summary\" onClick={this.handleSummaryButton} className=\"icon-button\"><i className=\"fas fa-info\"></i></button>\n\n            {this.props.selected_project === this.props.project_data.id && (<button title=\"close\" onClick={this.handleCloseButton} className=\"icon-button\"><i className=\"fas fa-times\"></i></button>)}\n          </div>\n        </header>\n        <div className=\"header-color\" style={{\n          backgroundColor: this.props.project_data.color || \"black\"\n        }} />\n        <div className=\"timeline\">\n          {display_months}\n          <div className=\"add-job-button\">\n            <button\n              onClick={()=>{\n                this.handleAddButton();\n              }}\n              className=\"icon-button\"\n            >\n              <i className=\"fas fa-plus\"></i>\n            </button>\n          </div>\n        </div>\n      </article>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_projects_data: state.state.all_projects_data,\n    all_users_data: state.state.all_users_data,\n    all_jobs_data: state.state.all_jobs_data,\n    selected_job: state.state.selected_job,\n    selected_job_index: state.state.selected_job_index,\n    selected_project: state.state.selected_project\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({\n    selectJob,\n    updateJobsData,\n    updateUsersData,\n    editJob,\n    openJobCreator,\n    closeJobCreator,\n    openProjectEditor,\n    openProjectSummary,\n    openPhotoGallery,\n    openInvoiceEditor\n  }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Project);\n","import React from 'react';\nimport Project from './project';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {selectJob} from '../actions/actions'\n\nclass ProjectList extends React.Component {\n  selectProject = (id) => {\n    return (_e)=>{\n      this.props.selectJob(id, null);\n    };\n  }\n\n  render() {\n    let projects = [];\n    if (this.props.all_projects_data) {\n      let counter = 0;\n      for (let p in this.props.all_projects_data) {\n        projects.push((\n          <div\n            key={\"project-\"+this.props.all_projects_data[p].id}\n            className={\"card\" + (counter<5?\" d\"+(counter+1):\" d5\")}\n            onClick={this.selectProject(this.props.all_projects_data[p].id)}\n          >\n            <Project\n              id={this.props.all_projects_data[p].id}\n              project_data={this.props.all_projects_data[p]}\n            />\n          </div>\n        ));\n        counter++;\n      }\n    }\n\n    return (\n      <div>\n        {projects}\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_projects_data: state.state.all_projects_data\n  }\n}\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({selectJob}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectList);\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {updateTasksData, editJob, completeTask, deleteTasks, editTask, addTask, selectTask} from '../actions/actions'\n\nimport ModalWarning from './modal-warning'\nimport {TasksById} from '../utilities/data'\nimport {Content} from '../utilities/content'\nimport {ArrayMove} from '../utilities/array'\n\nconst DeleteAllTasksWarning = Content[window.loc].DeleteAllTasksWarning;\nconst MarkAllTasksCompleteWarning = Content[window.loc].MarkAllTasksCompleteWarning;\n\nclass TaskList extends React.Component {\n  state = {\n    loaded: false,\n    add_task_text: \"\",\n    temp_edit_text: \"\",\n    currently_editing: 0,\n    all_complete: false,\n    selected_job: null\n  };\n\n  callAPI () {\n    this.temp_api_call = setTimeout(()=>{\n      var tasks_by_id = {};\n\n      for (var i in TasksById) {\n        for (var t=0;t<this.props.all_jobs_data[this.props.selected_job].tasks.length; t++) {\n          if (this.props.all_jobs_data[this.props.selected_job].tasks[t] === TasksById[i].id) {\n            if (!this.props.all_tasks_data[TasksById[i].id]) {\n              tasks_by_id[TasksById[i].id] = {...TasksById[i]};\n            }\n          }\n        }\n      }\n\n      this.props.updateTasksData(tasks_by_id);\n\n      this.setState({\n        loaded: true,\n        selected_job: this.props.selected_job\n      })\n    }, 50);\n  }\n\n  componentDidMount () {\n    if (this.props.all_jobs_data[this.props.selected_job]) {\n      this.callAPI();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_job) {\n      if (this.props.selected_job !== prevProps.selected_job) {\n        this.callAPI();\n        this.setState({\n          loaded: false\n        });\n      }\n    }\n  }\n\n  componentWillUnmount () {\n    window.clearTimeout(this.temp_api_call);\n  }\n\n\n  checkIfAllComplete(job_tasks) {\n    let completed = true;\n    for (let t=0; t<job_tasks.length; t++) {\n      const task = this.props.all_tasks_data[job_tasks[t]];\n      if (!task.completed) {\n        completed = false;\n        break;\n      }\n    }\n    return completed && !!job_tasks.length;\n  }\n\n  handleTaskClick = (id) => {\n    return (_e) => {\n      if (this.state.currently_editing !== id) {\n        let task = {...this.props.all_tasks_data[id]};\n        task.completed = !task.completed;\n        this.props.editTask(id, {...task});\n\n\n        const job_tasks = this.props.all_jobs_data[this.state.selected_job].tasks;\n        let tasks = {};\n        for (var t=0; t<job_tasks.length; t++) {\n          let temptask = this.props.all_tasks_data[job_tasks[t]];\n          if (temptask.id === id) {\n            temptask.completed = task.completed;\n          }\n          tasks[temptask.id] = temptask;\n        }\n        this.updateJob(tasks);\n        // this.setState({\n        //   tasks: tasks\n        // });\n      }\n    }\n  }\n\n  handleCompleteAll = () => {\n    const job_tasks = this.props.all_jobs_data[this.state.selected_job].tasks;\n    window.openModal((\n      <ModalWarning\n        message={(\n          <div>\n            <p>\n              <span>{MarkAllTasksCompleteWarning.message_1}</span>\n              <strong>{this.props.all_jobs_data[this.state.selected_job].name}</strong>\n              <span>{MarkAllTasksCompleteWarning.message_2}</span>\n            </p>\n            <p>{MarkAllTasksCompleteWarning.message_3}</p>\n          </div>\n        )}\n        cancel={MarkAllTasksCompleteWarning.cancel}\n        confirm={MarkAllTasksCompleteWarning.confirm}\n        handleConfirm={()=>{\n          let tasks = {};\n          for (var t=0; t<job_tasks.length; t++) {\n            let task = this.props.all_tasks_data[job_tasks[t]];\n            task.completed = true;\n            tasks[task.id] = task;\n          }\n          this.props.updateTasksData(tasks);\n          this.updateJob(tasks);\n        }}\n        handleCancel={()=>{}}\n      />\n    ));\n  }\n\n  handleIncompleteAll = () => {\n    let tasks = {};\n    const job_tasks = this.props.all_jobs_data[this.state.selected_job].tasks;\n    for (var t=0; t<job_tasks.length; t++) {\n      let task = this.props.all_tasks_data[job_tasks[t]];\n      task.completed = false;\n      tasks[task.id] = task;\n    }\n    this.props.updateTasksData(tasks);\n    this.updateJob(tasks);\n  }\n\n  handleDeleteAll = () => {\n    const job_tasks = this.props.all_jobs_data[this.state.selected_job].tasks;\n    window.openModal((\n      <ModalWarning\n        message={(\n          <div>\n            <p>\n              <span>{DeleteAllTasksWarning.message_1}</span>\n              <strong>{this.props.all_jobs_data[this.state.selected_job].name}</strong>\n              <span>{DeleteAllTasksWarning.message_2}</span>\n            </p>\n            <p>{DeleteAllTasksWarning.message_3}</p>\n            <p>{DeleteAllTasksWarning.message_4}</p>\n          </div>\n        )}\n        cancel={DeleteAllTasksWarning.cancel}\n        confirm={DeleteAllTasksWarning.confirm}\n        handleConfirm={()=>{\n          let tasks = [...job_tasks];\n          this.props.deleteTasks(tasks);\n        }}\n        handleCancel={()=>{}}\n      />\n    ));\n  }\n\n  handleDelete = (id) => {\n    return (e)=>{\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.deleteTasks([id]);\n      // delete tasks[id];\n      // this.setState({\n      //   tasks: tasks\n      // });\n    }\n  }\n\n\n  handleAddKeyPress = (e) => {\n    if(e.key === 'Enter'){\n      this.handleAddTask();\n    }\n  }\n\n  handleAddChange = (e) => {\n    this.setState({\n      add_task_text: e.currentTarget.value\n    });\n  }\n\n  handleAddTask = (e) => {\n    if (this.state.add_task_text) {\n      const id = \"task_\"+Math.random();\n      let task = {\n        id: id,\n        name: this.state.add_task_text,\n        completed: false\n      };\n\n      this.props.addTask(id, task, this.state.selected_job);\n\n      this.setState({\n        add_task_text: \"\"\n      });\n    }\n\n    // this.props.selectTask(\"NEWTASK\");\n  }\n\n\n  handleEdit = (id, name) => {\n    return (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      // this.setState({\n      //   currently_editing: id,\n      //   temp_edit_text: name\n      // });\n      this.props.selectTask(id);\n    }\n  }\n\n  handleEditKeyPress = (e) => {\n    if(e.key === 'Enter'){\n      this.handleConfirmEdit(e);\n    }\n  }\n\n  handleEditChange = (e) => {\n    this.setState({\n      temp_edit_text: e.currentTarget.value\n    });\n  }\n\n  handleCancelEdit = () => {\n    return (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      this.setState({\n        currently_editing: null\n      });\n    }\n  }\n\n  handleConfirmEdit = () => {\n    return (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      let id=this.state.currently_editing;\n\n      this.props.editTask(id, {name: this.state.temp_edit_text});\n\n      this.setState({\n        currently_editing: null\n      });\n    }\n  }\n\n  updateJob (tasks) {\n    // this.props.all_jobs_data[this.state.selected_job].tasks = tasks;\n    let progress = 0;\n    let total_progress = 0;\n    let total_tasks =0;\n    for (let t in tasks) {\n      if (tasks[t].completed) {\n        progress++;\n      }\n      total_tasks++;\n    }\n    total_progress = Math.round(100*(progress / total_tasks)) || 0;\n    console.log(total_progress);\n    //UPDATE JOB\n    this.props.editJob(this.props.selected_job, {progress: total_progress});\n\n  }\n\n  changeMode (mode) {\n    this.setState({\n      mode: mode\n    });\n  }\n\n  getMenu () {\n    const job_tasks = this.state.selected_job && this.state.loaded ? this.props.all_jobs_data[this.state.selected_job].tasks : [];\n    const menu = (\n      <div className=\"menu\">\n        <div>\n          <div className=\"button-group\">\n            <input type=\"text\" placeholder=\"task name\" value={this.state.add_task_text} onChange={this.handleAddChange} onKeyPress={this.handleAddKeyPress} />\n            <button onClick={(e)=>{this.handleAddTask(e)}}><i className=\"fas fa-plus\"></i><span>add task</span></button>\n          </div>\n        </div>\n        <div>\n          {(!this.checkIfAllComplete(job_tasks) || !job_tasks.length) ?(\n            <button onClick={(e)=>{this.handleCompleteAll(e)}} disabled={!job_tasks.length}><i className=\"fas fa-check-circle\"></i><span>mark all as complete</span></button>\n          ):(\n            <button onClick={(e)=>{this.handleIncompleteAll(e)}}><i className=\"far fa-circle\"></i><span>mark all as incomplete</span></button>\n          )}\n          <button onClick={(e)=>{this.handleDeleteAll()}} disabled={!job_tasks.length}><i className=\"fas fa-trash\"></i><span>delete all</span></button>\n        </div>\n      </div>\n    );\n    return menu;\n  }\n\n  handleTaskDragStart = (e) => {\n    this.dragged_id= e.target.dataset.id;\n    this.dragged_index= e.target.dataset.index;\n  }\n\n  handleTaskDragEnd = (e) => {\n    window.setStyle(``);\n    if (this.drop_id) {\n      this.handleTaskDrop(e);\n    }\n  }\n\n  handleTaskDragOver = (e) => {\n    e.preventDefault();\n    if (e.currentTarget.dataset.id !== this.drop_id) {\n      //To fix performance issues, rather than calling render, we change a stylesheet to apply styles\n      if (parseInt(e.currentTarget.dataset.index, 10) >= parseInt(this.dragged_index,10)) {\n        window.setStyle(`\n          [data-id=\"` + e.currentTarget.dataset.id + `\"]:after {\n            bottom: 0 !important;\n            opacity: 1 !important;\n          }\n        `);\n      } else {\n        window.setStyle(`\n          [data-id=\"` + e.currentTarget.dataset.id + `\"]:after {\n            top: 0 !important;\n            opacity: 1 !important;\n          }\n        `);\n      }\n      this.drop_id = e.currentTarget.dataset.id;\n      this.drop_index = e.currentTarget.dataset.index;\n    }\n  }\n\n  handleTaskDragLeave = (e) => {\n    e.preventDefault();\n  }\n\n  handleTaskDrop = (e) => {\n    e.preventDefault();\n    let tasks = [...this.props.all_jobs_data[this.state.selected_job].tasks];\n    let old_index = this.dragged_index;\n    let new_index = this.drop_index;\n\n    this.drop_id = null;\n    window.setStyle(``);\n\n    ArrayMove(tasks, parseInt(old_index,10), parseInt(new_index,10));\n\n    this.props.editJob(this.state.selected_job, {tasks});\n  }\n\n\n  render() {\n    let task_nodes = [];\n    if (this.state.selected_job) {\n      const job_tasks = this.props.all_jobs_data[this.state.selected_job].tasks;\n\n      if (job_tasks && this.state.loaded) {\n        let tasks = [...job_tasks];\n\n        for (var t=0; t<tasks.length; t++) {\n          const task = this.props.all_tasks_data[tasks[t]];\n          if (task) {\n            task_nodes.push((\n              <li\n                key={this.state.selected_job + \"_\" + task.id}\n                className={\n                  \"task\" +\n                  (task.completed ? \" completed\" : \"\") +\n                  (task.id === this.state.currently_editing ? \" currently-editing\" : \"\") +\n                  (this.state.drop_id === task.id ? (\" drop-\"+this.state.drop_location) : \"\")\n                }\n                data-id={task.id}\n                data-index={t}\n                onClick={this.handleTaskClick(task.id)}\n\n                draggable\n                onDrag={this.handleTaskDragStart}\n                onDragEnd={this.handleTaskDragEnd}\n\n                onDragOver={this.handleTaskDragOver}\n                onDragLeave={this.handleTaskDragLeave}\n                onDrop={this.handleTaskDrop}\n              >\n                <h3>\n                  <span className=\"icon-holder\"><i className=\"fas fa-check-circle check\"></i><i className=\"far fa-circle\"></i></span>\n                  {this.state.currently_editing === task.id ? (\n                    <input className=\"\" defaultValue={task.name} onChange={this.handleEditChange} onKeyPress={this.handleEditKeyPress} />\n                  ):(\n                    <span className=\"task-name\">{task.name}</span>\n                  )}\n                </h3>\n                {(task.start_date) && (\n                  <span className=\"date\">\n                    <span className=\"date-value\">\n                      {task.start_date.toLocaleDateString()}\n                    </span>\n                    <span className=\"time-value\">\n                      {task.start_date.toLocaleTimeString() + (task.end_date ? \" - \" + task.end_date.toLocaleTimeString() : \"\")}\n                    </span>\n                  </span>\n                )}\n                <div>\n                  {this.state.currently_editing === task.id ? (\n                    <div>\n                      <button className=\"icon-button\" onClick={this.handleConfirmEdit(task.id)} title=\"Apply\"><i className=\"fas fa-check\"></i></button>\n                      <button className=\"icon-button\" onClick={this.handleCancelEdit(task.id)} title=\"Cancel\"><i className=\"fas fa-times\"></i></button>\n                    </div>\n                  ):(\n                    <div>\n                      <button className=\"icon-button\" onClick={this.handleEdit(task.id, task.name)} title=\"Edit Task\"><i className=\"fas fa-edit\"></i></button>\n                      <button className=\"icon-button\" onClick={this.handleDelete(task.id)} title=\"Delete Task\"><i className=\"fas fa-trash\"></i></button>\n                    </div>\n                  )}\n                </div>\n              </li>\n            ));\n          }\n        }\n      }\n    }\n\n    return (\n      <div className={\"job-tasks\" + (this.state.loaded?\"\":\" loading\")} >\n        {this.getMenu()}\n        <div className=\"task-list\">\n          <div className=\"load-background\"></div>\n          <ul>{task_nodes}</ul>\n        </div>\n\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_tasks_data: state.state.all_tasks_data,\n    all_jobs_data: state.state.all_jobs_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateTasksData, editJob, completeTask, deleteTasks, editTask, addTask, selectTask}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskList);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport Editor from './editor';\n\nimport DatePicker from 'react-datepicker';\n\nimport {selectTask, updateTasksData, addTask} from '../actions/actions';\n\nconst icons = [\n  \"fas fa-toolbox\",\n  \"fas fa-paint-roller\",\n  \"fas fa-wrench\",\n  \"fas fa-screwdriver\",\n  \"fas fa-hammer\",\n  \"fas fa-tint\",\n  \"fas fa-bolt\",\n  \"fas fa-clipboard-list\",\n  \"fas fa-tape\",\n  \"fas fa-file-signature\",\n  \"fas fa-dollar-sign\"\n];\n\nclass TaskEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // edit: this.props.edit || false\n      icon: icons[0],\n      task_data: this.props.all_tasks_data[this.props.selected_task] || {\n        id: Math.random()\n      }\n    };\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_task) {\n      if (this.props.selected_task !== prevProps.selected_task) {\n        this.setState({\n          task_data: this.props.all_tasks_data[this.props.selected_task] || {\n            id: Math.random()\n          }\n        });\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.selectTask(null);\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      task_data: {...this.state.task_data, [e.target.name]:e.target.value}\n    });\n  }\n\n  handleDescriptionChange = (value) => {\n    this.setState({\n      task_data: {...this.state.task_data, description:value}\n    });\n  }\n\n  handleScheduleCheckChange = (changeEvent) => {\n    console.log ()\n    if (changeEvent.target.checked) {\n      this.setState({\n        enable_schedule: true,\n        task_data: {...this.state.task_data, start_date: this.props.all_jobs_data[this.state.task_data.job_id].start_dates[this.props.selected_job_index], end_date: this.props.all_jobs_data[this.state.task_data.job_id].end_dates[this.props.selected_job_index]}\n      });\n\n    }\n    else {\n      this.setState({\n        enable_schedule: false,\n        task_data: {...this.state.task_data, start_date: null, end_date: null}\n      });\n    }\n  };\n\n  handleIconChange = (changeEvent) => {\n    this.setState({\n      icon: changeEvent.target.value\n    });\n    setTimeout(()=>{\n      this.setState({\n        icon: icons[0],\n        task_data: {}\n      });\n    },500);\n  };\n\n  handleSaveChanges = (e) => {\n    if (this.props.selected_task === \"NEWTASK\") {\n      let id=Math.random();\n      let new_task = {\n        ...this.state.task_data,\n        id: id,\n        icon: this.state.icon,\n        completed: false\n      }\n      this.props.addTask(id, new_task, this.props.selected_job, null);\n    } else {\n      this.props.updateTasksData({\n        [this.props.selected_task]: this.state.task_data\n      });\n    }\n    setTimeout(()=>{\n      this.setState({\n        icon: icons[0],\n        task_data: {}\n      });\n    },500);\n  }\n\n\n  handleChangeStartTime = (value) => {\n    this.setState({\n      task_data: {...this.state.task_data, start_date: value}\n    });\n  }\n\n  handleChangeEndTime = (value) => {\n    this.setState({\n      task_data: {...this.state.task_data, end_date: value}\n    });\n  }\n  handleChangeDate = date => {\n    let start_date = new Date(this.state.task_data.start_date.setFullYear(date.getFullYear(), date.getMonth(), date.getDate()));\n    let end_date = new Date(this.state.task_data.end_date.setFullYear(date.getFullYear(), date.getMonth(), date.getDate()));\n    this.setState({\n      task_data: {...this.state.task_data, start_date: start_date, end_date: end_date}\n    });\n  };\n\n  render() {\n    let icon_radios = [];\n\n    for (let i=0; i<icons.length; i++) {\n      icon_radios.push ((\n        <div key={\"icon \" + i} className=\"radio\">\n          <label>\n            <input\n              type=\"radio\"\n              value={icons[i]}\n              checked={this.state.icon === icons[i]}\n              onChange={this.handleIconChange}\n            />\n            <i className={icons[i]}></i>\n          </label>\n        </div>\n      ));\n    }\n\n    return (\n      <div className={\"task-editor form\" + (this.props.selected_task && this.props.all_tasks_data?\" show\":\"\")}>\n        <div className=\"content\">\n          <header>\n            <h1>\n              {!this.props.selected_job && (<i className=\"fas fa-phone\"></i>)}\n              <span>{(this.state.task_data.first_name || \"\") + \" \" + (this.state.task_data.last_name || \"\")}</span>\n            </h1>\n            <div>\n              <button\n                onClick={()=>{\n                  this.handleSaveChanges();\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-check\"></i>\n                <span>save</span>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-times\"></i>\n                <span>cancel</span>\n              </button>\n            </div>\n          </header>\n          <main>\n            <div>\n              <div>\n                <label>name</label>\n                <input name=\"name\" type=\"text\" placeholder=\"task name\" value={this.state.task_data.name || \"\"} onChange={this.handleChange} />\n              </div>\n            </div>\n            {!this.props.selected_job && (\n              <div>\n                <div>\n                  <label>icon</label>\n                  <div className=\"icon-picker\">\n                    {icon_radios}\n                  </div>\n                </div>\n              </div>\n            )}\n            {!this.props.selected_job && (\n              <div>\n                <div>\n                  <label>address</label>\n                  <textarea name=\"address\" placeholder=\"address\" value={this.state.task_data.address || \"\"} onChange={this.handleChange} />\n                </div>\n              </div>\n            )}\n\n            <div>\n              <label>\n                <input\n                  type=\"checkbox\"\n                  checked={(!!this.state.task_data.start_date)}\n                  onChange={this.handleScheduleCheckChange}\n                />\n                <span>Schedule separately from parent job</span>\n              </label>\n            </div>\n            {(this.state.task_data.start_date && this.state.task_data.end_date) && (\n              <div>\n                <div>\n                  <label>on</label>\n                  <DatePicker\n                    selected={this.state.task_data.start_date}\n                    onChange={this.handleChangeDate}\n                    inline\n                  />\n                </div>\n                <div>\n                  <label>from</label>\n                  <DatePicker\n                    selected={new Date(this.state.task_data.start_date)}\n                    className=\"\"\n                    inline\n                    onChange={this.handleChangeStartTime}\n                    showTimeSelect\n                    showTimeSelectOnly\n                    timeIntervals={15}\n                    minTime={new Date(new Date(this.state.task_data.start_date).setHours(0, 0))}\n                    maxTime={new Date(this.state.task_data.end_date)}\n                    dateFormat=\"h:mm aa\"\n                    timeCaption=\"start time\"\n                  />\n                </div>\n                <div>\n                  <label>to</label>\n                  <DatePicker\n                    selected={new Date(this.state.task_data.end_date)}\n                    className=\"\"\n                    inline\n                    onChange={this.handleChangeEndTime}\n                    showTimeSelect\n                    showTimeSelectOnly\n                    timeIntervals={15}\n                    minTime={new Date(this.state.task_data.start_date)}\n                    maxTime={new Date(new Date(this.state.task_data.end_date).setHours(23, 55))}\n                    dateFormat=\"h:mm aa\"\n                    timeCaption=\"end time\"\n                  />\n                </div>\n              </div>\n            )}\n\n            <div>\n              <div>\n                <label>notes</label>\n                <Editor\n                  defaultValue={(this.props.all_tasks_data[this.props.selected_task] && this.props.all_tasks_data[this.props.selected_task].description) || \"\"}\n                  onChange={this.handleDescriptionChange}\n                  refresh={this.props.selected_task || this.state.task_data.id}\n                />\n              </div>\n            </div>\n          </main>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_job: state.state.selected_job,\n    selected_job_index: state.state.selected_job_index,\n    selected_task: state.state.selected_task,\n    all_jobs_data: state.state.all_jobs_data,\n    all_tasks_data: state.state.all_tasks_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({selectTask, updateTasksData, addTask}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskEditor);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {selectTask, addJob, editJob, addTask, closeJobCreator, updateJobTemplatesData, updateProjectTemplatesData} from '../actions/actions';\n\nimport {ProjectTemplates, JobTemplates} from '../utilities/data'\n\nimport {GenerateCode} from '../utilities/data';\n\nimport {Droppable, Draggable } from 'react-beautiful-dnd';\n\nconst icons = [\n  \"fas fa-toolbox\",\n  \"fas fa-paint-roller\",\n  \"fas fa-wrench\",\n  \"fas fa-screwdriver\",\n  \"fas fa-hammer\",\n  \"fas fa-tint\",\n  \"fas fa-bolt\",\n  \"fas fa-clipboard-list\",\n  \"fas fa-tape\",\n  \"fas fa-file-signature\",\n  \"fas fa-dollar-sign\"\n];\n\n\n\n\nconst getProjectItemStyle = (item, isDragging, draggableStyle) => {\n  return {\n    // some basic styles to make the items look a bit nicer\n    color: \"black\",\n    background: \"#c1c1c1\",\n    padding: \"1rem\",\n    margin: \"0 .5rem .5rem 0\",\n    borderRadius: \"5px\",\n    width: \"auto\",\n    // change background colour if dragging\n    // background: heat_map[heat],//isDragging ? 'lightgreen' : 'grey',\n    // boxShadow: \"rgba(0, 0, 0, 0.12) 0 0 1rem\",\n    // styles we need to apply on draggables\n    ...draggableStyle\n  }\n};\n\nconst getItemStyle = (item, isDragging, draggableStyle) => {\n  return {\n    // some basic styles to make the items look a bit nicer\n    color: \"black\",\n    background: \"#c1c1c1\",\n    padding: \"1rem\",\n    margin: \"0 .5rem .5rem 0\",\n    borderRadius: \"5px\",\n    width: \"auto\",\n    // change background colour if dragging\n    // background: heat_map[heat],//isDragging ? 'lightgreen' : 'grey',\n    // boxShadow: \"rgba(0, 0, 0, 0.12) 0 0 1rem\",\n    // styles we need to apply on draggables\n    ...draggableStyle\n  }\n};\n\n\nconst getListStyle = isDraggingOver => ({\n    background: isDraggingOver ? '#e4e4e4' : 'transparent',\n    display: \"flex\",\n    padding: \".5rem 0\",\n    width: \"100%\",\n    minHeight: \"5rem\",\n    flex: \"1 1 auto\",\n    position: \"relative\",\n    zIndex: \"1\",\n    flexFlow: \"row wrap\"\n});\n\n\nconst getDropListStyle = isDraggingOver => ({\n    background: isDraggingOver ? 'rgba(250, 250, 250, 0.20)' : 'transparent',\n    width: \"100%\",\n    height: \"8rem\",\n    bottom: \"100%\",\n    left: 0,\n    position: \"absolute\",\n    zIndex: \"-1\"\n});\n\n\nclass JobCreator extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // edit: this.props.edit || false\\\n      icon: icons[0],\n      jobOrTask: \"job\",\n      job_data: {},\n      tab: \"project-templates\"\n    };\n  }\n\n  componentDidMount () {\n    if (!this.props.all_job_templates_data) {\n      this.props.updateProjectTemplatesData(ProjectTemplates);\n      this.props.updateJobTemplatesData(JobTemplates);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.open_job_creator) {\n      if (!prevProps.open_job_creator || this.props.open_job_creator.job_id !== prevProps.open_job_creator.job_id) {\n        this.setState({\n          job_data: this.props.all_jobs_data[this.props.open_job_creator.job_id] || {},\n          icon: this.props.open_job_creator.job_id ? this.props.all_jobs_data[this.props.open_job_creator.job_id].icon : icons[0]\n        });\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.closeJobCreator();\n    setTimeout(()=>{\n      this.setState({\n        icon: icons[0],\n        jobOrTask: \"job\",\n        job_data: {}\n      });\n    },500);\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      job_data: {...this.state.job_data, [e.target.name]:e.target.value}\n    });\n  }\n\n  validate = () => {\n    let valid = true;\n    if (!this.state.job_data.name) {\n      valid = false;\n    }\n    return valid;\n  }\n\n  addJob = (item) => (\n    (_e) => {\n      const id = GenerateCode();\n      this.props.addJob(id, {\n        ...this.state.job_data,\n        id: id,\n        tasks:[],\n        start_dates:[],\n        end_dates:[],\n        icon: this.state.icon,\n        project_id: this.props.open_job_creator.project_id,\n        project_name: this.props.all_projects_data[this.props.open_job_creator.project_id].name,\n        project_color: this.props.all_projects_data[this.props.open_job_creator.project_id].color\n      }, this.props.open_job_creator.project_id);\n    }\n  )\n\n  handleTypeChange = (changeEvent) => {\n    this.setState({\n      jobOrTask: changeEvent.target.value\n    });\n  };\n\n  handleIconChange = (changeEvent) => {\n    this.setState({\n      icon: changeEvent.target.value\n    });\n  };\n\n\n  createJob = (item, index) => {\n    return (<Draggable\n      key={item.id}\n      draggableId={item.id}\n      index={index}>\n      {(provided, snapshot) => (\n        <div\n          className=\"job\"\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n\n          style={getItemStyle(\n            item,\n            snapshot.isDragging,\n            provided.draggableProps.style\n          )}>\n\n          <i className={item.icon}></i>\n          <span>{item.name}</span>\n        </div>\n      )}\n    </Draggable>);\n  }\n\n  createProject = (item, index) => {\n    return (<div className=\"drag-project\" key={item.id}>\n      <Draggable\n        key={item.id}\n        draggableId={item.id}\n        index={index}\n      >\n        {(provided, snapshot) => (\n          <div\n            ref={provided.innerRef}\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            style={getProjectItemStyle(\n              item,\n              snapshot.isDragging,\n              provided.draggableProps.style\n            )}>\n            <div>{item.name}</div>\n          </div>\n        )}\n      </Draggable>\n      {this.props.all_job_templates_data && (\n        <div className=\"jobs\">{\n          item.jobs.map((job, index) => (\n            <div key={job}>\n              <i className={this.props.all_job_templates_data[job].icon}></i>\n              {this.props.all_job_templates_data[job].name}\n            </div>\n          ))\n        }</div>\n      )}\n    </div>);\n  }\n\n\n  changeMode (mode) {\n    this.setState({\n      tab: mode\n    });\n  }\n\n  render() {\n\n    let icon_radios = [];\n\n    for (let i=0; i<icons.length; i++) {\n      icon_radios.push ((\n        <div key={\"icon \" + i} className=\"radio\">\n          <label>\n            <input\n              type=\"radio\"\n              value={icons[i]}\n              checked={this.state.icon === icons[i]}\n              onChange={this.handleIconChange}\n            />\n            <i className={icons[i]}></i>\n          </label>\n        </div>\n      ));\n    }\n\n    let job_templates = [];\n    let project_templates = [];\n    let sort_value = \"name\";\n\n    if (this.props.all_job_templates_data) {\n      for (var j in this.props.all_job_templates_data) {\n        job_templates.push(this.props.all_job_templates_data[j]);\n      }\n\n      job_templates.sort(function(a, b){\n        var x = a[sort_value].toLowerCase();\n        var y = b[sort_value].toLowerCase();\n        if (x < y) {return -1;}\n        if (x > y) {return 1;}\n        return 0;\n      });\n    }\n\n    if (this.props.all_project_templates_data) {\n      for (var p in this.props.all_project_templates_data) {\n        project_templates.push(this.props.all_project_templates_data[p]);\n      }\n\n      project_templates.sort(function(a, b){\n        var x = a[sort_value].toLowerCase();\n        var y = b[sort_value].toLowerCase();\n        if (x < y) {return -1;}\n        if (x > y) {return 1;}\n        return 0;\n      });\n    }\n\n\n    return (\n      <div className={\"job-creator form\" + (this.props.open_job_creator && this.props.open_job_creator && this.props.all_tasks_data?\" show\":\"\")}>\n        <div className=\"content\">\n          <header>\n            <h1><span>{(\"Add Jobs\")}</span></h1>\n            <div>\n              <button\n                onClick={()=>{\n                  this.handleCloseButton();\n                }}\n                className=\"icon-button\"\n              >\n                <i className=\"fas fa-times\"></i>\n              </button>\n            </div>\n          </header>\n          <main>\n            <div>\n            {(project_templates.length && job_templates.length) && (\n              <div className=\"job-templates\">\n\n                <Droppable\n                  className=\"droppable-column\"\n                  droppableId={\"project-timeline-\" + this.props.selected_project}\n                  type=\"JOB\"\n                  direction=\"horizontal\"\n                >\n                  {(provided, snapshot) => (\n                    <div\n                      ref={provided.innerRef}\n                      style={getDropListStyle(snapshot.isDraggingOver)}\n                    >\n\n                    {provided.placeholder}\n\n                    </div>\n                  )}\n                </Droppable>\n                <header>\n                  <button className={\"tab-button \" + (this.state.tab === \"project-templates\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"project-templates\")}}>project templates</button>\n                  <button className={\"tab-button \" + (this.state.tab === \"job-templates\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"job-templates\")}}>job templates</button>\n                </header>\n                <div className=\"tab-panel\">\n                  <div className={this.state.tab === \"project-templates\"?\"show\":\"\"}>\n                    {this.state.tab === \"project-templates\" && (\n                      <Droppable\n                        className=\"droppable-column\"\n                        droppableId=\"template_projects_project\"\n                        type=\"JOB\"\n                        isDropDisabled\n                      >\n                        {(provided, snapshot) => (\n                          <div\n                            ref={provided.innerRef}\n                            style={getListStyle(snapshot.isDraggingOver)}>\n                            {\n                              project_templates.map((item, index) => (\n                                this.createProject(item, index)\n                              ))\n                            }\n                          </div>\n                        )}\n                      </Droppable>\n                    )}\n                  </div>\n                  <div className={this.state.tab === \"job-templates\"?\"show\":\"\"}>\n                    {this.state.tab === \"job-templates\" && (\n                      <Droppable\n                        className=\"droppable-column\"\n                        droppableId=\"template_jobs\"\n                        type=\"JOB\"\n                        direction=\"horizontal\"\n                        isDropDisabled\n                      >\n                        {(provided, snapshot) => (\n                          <div\n                            ref={provided.innerRef}\n                            style={getListStyle(snapshot.isDraggingOver)}>\n                            {\n                              job_templates.map((item, index) => (\n                                this.createJob(item, index)\n                              ))\n                            }\n                          </div>\n                        )}\n                      </Droppable>\n                    )}\n                  </div>\n                </div>\n              </div>\n            )}\n            </div>\n          </main>\n        </div>\n      </div>\n    );\n  }\n}\n\n// <Draggable\n//   key={\"filler\"}\n//   draggableId={\"filler\"}\n//   index={0}\n//   isDragDisabled=\"true\">\n//   {(provided, snapshot) => (\n//     <div\n//       className=\"filler\"\n//       ref={provided.innerRef}\n//       {...provided.draggableProps}\n//       {...provided.dragHandleProps}\n//\n//       style={provided.draggableProps.style}>\n//\n//     </div>\n//   )}\n// </Draggable>\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_task: state.state.selected_task,\n    open_job_creator: state.state.open_job_creator,\n    all_jobs_data: state.state.all_jobs_data,\n    all_tasks_data: state.state.all_tasks_data,\n    all_projects_data: state.state.all_projects_data,\n    all_job_templates_data: state.state.all_job_templates_data,\n    all_project_templates_data: state.state.all_project_templates_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({selectTask, addJob, editJob, addTask, closeJobCreator, updateJobTemplatesData, updateProjectTemplatesData}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(JobCreator);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport DatePicker from 'react-datepicker';\n\n// import {USE_12_HOUR_CLOCK} from '../config/account-settings';\nimport \"react-datepicker/dist/react-datepicker.css\";\n\n\nimport {selectJobSchedule, updateJobsData, editJob, assignJobToUser} from '../actions/actions';\n\n\n// const format = 'h:mm a';\n\nclass JobTimePicker extends React.Component {\n  constructor(props) {\n    super(props);\n    var name=\"\";\n    var icon=\"\";\n    var assigned_user=\"\";\n    if (this.props.selected_job && this.props.all_jobs_data[this.props.selected_job].start_date) {\n      this.default_start_time = this.props.all_jobs_data[this.props.selected_job].start_date;\n      this.default_end_time = this.props.all_jobs_data[this.props.selected_job].end_date;\n      name = this.props.all_jobs_data[this.props.selected_job].name;\n      icon = this.props.all_jobs_data[this.props.selected_job].icon;\n      assigned_user = this.props.all_jobs_data[this.props.selected_job].assigned_user || this.props.selected_job_schedule.user_id;\n    }\n    else {\n      this.default_start_time = new Date();\n      this.default_end_time = new Date();\n    }\n    this.state = {\n      start_date: this.default_start_time,\n      end_date: this.default_end_time,\n      name: name,\n      assigned_user: assigned_user,\n      icon: icon\n    };\n\n  }\n\n  componentDidMount () {\n    var name=\"\";\n    var icon=\"\";\n    var assigned_user=\"\";\n    if (this.props.selected_job && this.props.all_jobs_data[this.props.selected_job].start_date) {\n      this.default_start_time = this.props.all_jobs_data[this.props.selected_job].start_date;\n      this.default_end_time = this.props.all_jobs_data[this.props.selected_job].end_date;\n      name = this.props.all_jobs_data[this.props.selected_job].name;\n      icon = this.props.all_jobs_data[this.props.selected_job].icon;\n      assigned_user = this.props.all_jobs_data[this.props.selected_job].assigned_user || this.props.selected_job_schedule.user_id;\n    }\n    else {\n      this.default_start_time = new Date();\n      this.default_end_time = new Date();\n    }\n    this.setState({\n      start_date: this.default_start_time,\n      end_date: this.default_end_time,\n      name: name,\n      assigned_user: assigned_user,\n      icon: icon\n    });\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_job) {\n      if ((this.props.selected_job !== prevProps.selected_job && this.props.all_jobs_data[this.props.selected_job]) || this.props.selected_job_schedule.user_id !== prevProps.selected_job_schedule.user_id) {\n        if (this.props.all_jobs_data[this.props.selected_job].start_date) {\n          this.default_start_time = this.props.all_jobs_data[this.props.selected_job].start_date;\n          this.default_end_time = this.props.all_jobs_data[this.props.selected_job].end_date;\n\n        }\n        this.setState({\n          start_date: this.default_start_time,\n          end_date: this.default_end_time,\n          name: this.props.all_jobs_data[this.props.selected_job].name,\n          assigned_user: this.props.all_jobs_data[this.props.selected_job].assigned_user || this.props.selected_job_schedule.user_id,\n          icon: this.props.all_jobs_data[this.props.selected_job].icon\n        });\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.selectJobSchedule(null, null);\n  }\n\n\n\n  handleChangeStartTime = (value) => {\n    let start_dates = [...this.props.all_jobs_data[this.props.selected_job].start_dates];\n\n    start_dates[this.props.selected_job_index] = value;\n\n    this.props.editJob(this.props.selected_job, {start_dates:start_dates});\n    this.props.assignJobToUser(this.props.all_jobs_data[this.props.selected_job].assigned_user, this.state.assigned_user, this.props.selected_job);\n  }\n\n  handleChangeEndTime = (value) => {\n    let end_dates = [...this.props.all_jobs_data[this.props.selected_job].end_dates];\n\n    end_dates[this.props.selected_job_index] = value;\n\n    this.props.editJob(this.props.selected_job, {end_dates:end_dates});\n    this.props.assignJobToUser(this.props.all_jobs_data[this.props.selected_job].assigned_user, this.state.assigned_user, this.props.selected_job);\n  }\n\n  // handleChangeStart = date => {\n  //   if (!this.state.endDate || date < this.state.endDate) {\n  //     this.setState({\n  //       startDate: date,\n  //       pickend: true\n  //     });\n  //   }\n  // };\n  // handleChangeEnd = date => {\n  //   if (!this.state.startDate || date > this.state.startDate) {\n  //     this.setState({\n  //       endDate: date,\n  //       pickend: false\n  //     });\n  //   }\n  // };\n\n  handleSaveChanges = (e) => {\n    if (this.props.selected_job === \"NEWLEAD\") {\n      let id=Math.random();\n      let new_job = {\n        ...this.state.selected_job_data,\n        id: id,\n        new_date: new Date(),\n        status: 'new'\n      }\n      this.props.updateLeadsData({\n        [id]: new_job\n      });\n    } else {\n      this.props.updateLeadsData({\n        [this.props.selected_job]: this.state.selected_job_data\n      });\n    }\n  }\n\n  render() {\n\n    // const user = this.props.all_users_data[this.props.selected_job_schedule.user_id] || {};\n    let user = {};\n    if (this.props.all_users_data) {\n      user = this.props.all_users_data[this.state.assigned_user] || {};\n    }\n    return (\n      <div className={\"job-time-picker form\" + (this.props.selected_job && this.props.all_jobs_data && this.props.selected_job_schedule && this.props.selected_job_schedule.user_id?\" show\":\"\")}>\n      {(this.props.selected_job && this.props.all_jobs_data) &&\n        (<div className=\"content\">\n          <header>\n            <h1><i className={this.state.icon}></i><span>{this.state.name}</span></h1>\n            <div>\n              <button\n                onClick={()=>{\n                  this.handleCloseButton();\n                }}\n                className=\"icon-button\"\n              >\n                <i className=\"fas fa-check\"></i>\n              </button>\n            </div>\n          </header>\n          <main>\n            <p>\n              <span>assigned to: </span>\n              <span>{user.first_name + \" \" + user.last_name + \" \"}</span>\n            </p>\n            <div>\n              <div>\n                <label>from</label>\n                <DatePicker\n                  selected={new Date(this.state.start_date)}\n                  className=\"\"\n                  inline\n                  onChange={this.handleChangeStartTime}\n                  showTimeSelect\n                  showTimeSelectOnly\n                  timeIntervals={15}\n                  minTime={new Date(new Date(this.state.start_date).setHours(0, 0))}\n                  maxTime={new Date(this.state.end_date)}\n                  dateFormat=\"h:mm aa\"\n                  timeCaption=\"start time\"\n                />\n              </div>\n              <div>\n                <label>to</label>\n                <DatePicker\n                  selected={new Date(this.state.end_date)}\n                  className=\"\"\n                  inline\n                  onChange={this.handleChangeEndTime}\n                  showTimeSelect\n                  showTimeSelectOnly\n                  timeIntervals={15}\n                  minTime={new Date(this.state.start_date)}\n                  maxTime={new Date(new Date(this.state.end_date).setHours(23, 55))}\n                  dateFormat=\"h:mm aa\"\n                  timeCaption=\"end time\"\n                />\n              </div>\n            </div>\n          </main>\n        </div>)\n      }\n      </div>\n    );\n  }\n}\n\n\n// <div>\n//   <label>on</label>\n//   {!this.state.pickend?(\n//     <DatePicker\n//       selected={this.state.startDate}\n//       selectsStart\n//       startDate={this.state.startDate}\n//       endDate={this.state.endDate}\n//       onChange={this.handleChangeStart}\n//       inline\n//     />\n//   ):(\n//     <DatePicker\n//       selected={this.state.endDate}\n//       selectsEnd\n//       startDate={this.state.startDate}\n//       endDate={this.state.endDate}\n//       onChange={this.handleChangeEnd}\n//       inline\n//     />\n//   )}\n// </div>\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_job_schedule: state.state.selected_job_schedule,\n    selected_job: state.state.selected_job,\n    selected_job_index: state.state.selected_job_index,\n    all_jobs_data: state.state.all_jobs_data,\n    all_users_data: state.state.all_users_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({selectJobSchedule, updateJobsData, editJob, assignJobToUser}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(JobTimePicker);\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {editJob, deleteJob, selectJob, openJobCreator} from '../actions/actions'\n\nimport Editor from './editor'\nimport Scheduler from './scheduler'\nimport TaskList from './task-list'\nimport TaskEditor from './task-editor'\nimport JobCreator from './job-creator'\nimport JobTimePicker from './job-time-picker'\n\n// import ProjectSummary from './project-summary';\n\nimport {JobsById} from '../utilities/data'\n// import {JobsById, TasksById} from '../utilities/data'\n\nclass JobDetails extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false,\n      show_content: true,\n      detail_mode: \"schedule\",\n      job_data: null\n    }\n  }\n\n  callAPI (detail) {\n    if (this.props.selected_job) {\n      this.temp_api_call = setTimeout(()=>{\n        this.setState({\n          loaded: true\n        });\n        const job_data = this.props.all_jobs_data[this.props.selected_job] || JobsById[this.props.selected_job];\n        if (detail) {\n          this.setState({\n            detail_mode: job_data.start_dates[0] ? \"task\" : \"schedule\"\n          });\n        }\n        if (this.state.show_content){\n          this.setState({\n            start_description: job_data.description,\n            job_data: job_data\n          });\n        } else {\n          this.setState({\n            start_description: job_data.description,\n            temp_job_data: job_data\n          });\n        }\n      }, 30);\n    }\n  }\n\n  componentDidMount () {\n    this.callAPI(true);\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.props.selected_job !== prevProps.selected_job || (!this.props.open_job_editor && prevProps.open_job_editor && this.props.selected_job === prevProps.open_job_editor.job_id)) {\n      // this.setState({loaded: false});\n      //API CALL HERE\n      this.callAPI();\n\n      // if (this) {\n      //   this.setState({loaded: false, show_content: false});\n      //   this.show_content_animation = setTimeout(()=>{\n      //     this.setState({\n      //       show_content: true\n      //     });\n      //     if (this.state.loaded) {\n      //       this.setState({\n      //\n      //         job_data: this.state.temp_job_data,\n      //         temp_job_data: null\n      //       });\n      //     }\n      //   }, 500);\n      // }\n    }\n  }\n\n  componentWillUnmount () {\n    window.clearTimeout(this.temp_api_call);\n    window.clearTimeout(this.show_content_animation);\n  }\n\n  changeMode (mode) {\n    this.setState({\n      detail_mode: mode,\n      start_description: this.state.job_data.description\n    });\n  }\n\n  handleDescriptionChange = (value) => {\n    this.setState({\n      job_data: {...this.state.job_data, description: value}\n    });\n    this.props.editJob(this.props.selected_job, {...this.state.job_data, description: value});\n  }\n\n  handleCheck (mode) {\n    this.setState({\n      job_data: {...this.state.job_data, progress: 100}\n    });\n    this.props.editJob(this.props.selected_job, {...this.state.job_data, progress: 100});\n  }\n\n  handleEditButton = (_e) => {\n    this.props.openJobCreator(this.props.selected_project, this.props.selected_job);\n  }\n\n  handleTrashButton = (_e) => {\n    //TODO add delete\n\n    this.props.deleteJob(this.props.selected_job, this.props.selected_project);\n  }\n\n  updateJobProgress = (job_id, tasks, progress) => {\n    // JobsById[job_id].progress = progress;\n    // let task_ids = [];\n    // let task;\n    // for (let t=0; t<tasks.length; t++) {\n    //   task = tasks[t];\n    //   task_ids.push(task.id);\n    //   TasksById[task.id] = {...task};\n    // }\n    // JobsById[job_id].tasks = task_ids;\n    // this.props.updateJob(job_id, {...JobsById[job_id]});\n  }\n\n\n  handleCloseButton = (e) => {\n    this.props.selectJob(this.props.selected_project);\n  }\n\n  render () {\n    return (\n      <div className={\"job-detail-panel\" +\n        (this.state.loaded&&this.state.show_content?\" loaded\":\"\")\n      }>\n        { this.props.selected_job ? (\n          this.state.job_data && (\n            <div>\n              <div className=\"job-details\">\n                <header>\n                  <div>\n                    <h2>{this.state.job_data.icon?(<i className={this.state.job_data.icon} />):[]}{this.state.job_data.name}</h2>\n                    <button className={\"tab-button \" + (this.state.detail_mode === \"schedule\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"schedule\")}}>schedule job</button>\n                    <button className={\"tab-button \" + (this.state.detail_mode === \"task\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"task\")}}>manage tasks</button>\n                    <button className={\"tab-button \" + (this.state.detail_mode === \"note\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"note\")}}>take notes</button>\n                    <button disabled={!this.props.all_jobs_data[this.props.selected_job].start_dates[0]} className={\"icon-button check-button\" + (this.props.all_jobs_data[this.props.selected_job].progress === 100 ? \" completed\":\"\")} onClick={()=>{this.handleCheck()}}><i className=\"fas fa-check-circle check\"></i><i className=\"far fa-circle\"></i></button>\n                  </div>\n                  <div>\n                    <button title=\"remove\" className={\"icon-button \"} onClick={this.handleTrashButton}><i className=\"fas fa-trash\" /></button>\n                    <button title=\"edit\" className={\"icon-button \"} onClick={this.handleEditButton}><i className=\"fas fa-edit\" /></button>\n                    <button title=\"close\" onClick={this.handleCloseButton} className=\"icon-button\"><i className=\"fas fa-times\"></i></button>\n                  </div>\n                </header>\n                <div className=\"tab-panel\">\n                  <div className={this.state.detail_mode === \"note\"?\"show\":\"\"}>\n                    {\n                      this.state.detail_mode === \"note\" &&\n                      (<Editor\n                        defaultValue={this.state.start_description || \"\"}\n                        onChange={this.handleDescriptionChange}\n                        refresh={this.state.job_data.id}\n                      />)\n                    }\n                  </div>\n                  <div className={this.state.detail_mode === \"task\"?\"show\":\"\"}>\n                    {\n                      this.state.detail_mode === \"task\"?\n                        (<TaskList\n                          selected_job={this.state.job_data.id}\n                          default_trade={this.state.job_data.default_trade}\n                         />)\n                      :\n                        []\n                    }\n                  </div>\n                  <div className={this.state.detail_mode === \"schedule\"?\"show\":\"\"}>\n                    {\n                      this.state.detail_mode === \"schedule\"&&\n                      (<Scheduler\n                        selected_job={this.state.job_data.id}\n                        selected_job_data={{...this.state.job_data, index: this.props.selected_job_index, start_date: this.state.job_data.start_dates[this.props.selected_job_index], end_date: this.state.job_data.end_dates[this.props.selected_job_index]}}\n                        default_trade={this.state.job_data.default_trade}\n                       />)\n                    }\n                  </div>\n                </div>\n              </div>\n\n              <span className=\"no-task-selected load-screen\">\n                <h3>loading...</h3>\n              </span>\n            </div>\n          )\n        ):(\n          <div className=\"no-task-selected\">\n            <i className=\"fas fa-hand-point-up\"></i>\n            <h3>select a job</h3>\n          </div>\n        )}\n        <JobCreator />\n        <TaskEditor />\n        <JobTimePicker />\n      </div>\n    );\n  }\n}\n\n// <ProjectSummary />\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_project: state.state.selected_project,\n    selected_job: state.state.selected_job,\n    selected_job_index: state.state.selected_job_index,\n    open_job_editor: state.state.open_job_editor,\n    all_jobs_data: state.state.all_jobs_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({editJob, deleteJob, selectJob, openJobCreator}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(JobDetails);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {\n  Redirect\n} from 'react-router-dom'\n\nimport {selectJob} from '../actions/actions'\n// import JobTimePicker from './job-time-picker'\n\nimport Project from './project';\nimport JobDetails from './job-details';\n\nclass ProjectEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false,\n      last_selected_project: this.props.selected_project\n    };\n  }\n  componentDidMount() {\n    // setTimeout(()=>{\n    //   var projects_by_id = {};\n    //   for (var p=0;p<ProjectData.length; p++) {\n    //     projects_by_id[ProjectData[p].id]=ProjectData[p];\n    //   }\n    //   this.setState({\n    //     loaded: true,\n    //     projects_by_id: projects_by_id\n    //   });\n    // }, 50);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_project !== prevProps.selected_project) {\n      this.selectProject(this.props.selected_project, this.props.selected_job);\n    }\n  }\n\n  componentWillUnmount () {\n    window.clearTimeout(this.transition_finish);\n    window.clearTimeout(this.transition);\n  }\n\n  selectProject (id, job_id) {\n    this.transition = setTimeout(()=>{\n      this.setState({\n        transition_last_selected_project: false,\n      });\n    }, 50);\n    this.transition_finish = setTimeout(()=>{\n      this.setState({\n        last_selected_project: this.props.selected_project\n      });\n    }, 1500);\n    this.setState({\n      transition_last_selected_project: true\n    });\n  }\n\n\n  render() {\n    let color;\n    if (this.props.all_projects_data && this.props.all_projects_data[this.props.selected_project]) {\n      color = this.props.all_projects_data[this.props.selected_project].color || \"black\";\n    }\n    return (\n      <div id=\"project-details\" className={(this.props.selected_project && this.props.all_projects_data?\" show\":\"\")}>\n        {!(this.props.all_projects_data && this.props.all_projects_data[this.props.selected_project]) && (\n          <Redirect to=\"/projects\" />\n        )}\n        <div className=\"card\">\n          <div className=\"header-color\" style={{\n            backgroundColor: color\n          }} />\n\n          <div className={ \"selected_project\" +\n            (this.state.transition_last_selected_project ? \" transition_last_selected\" : \"\")\n          }>\n            {this.state.last_selected_project && (\n              <Project\n                id={this.state.last_selected_project}\n                last_selected={true}\n                project_data={this.props.all_projects_data[this.state.last_selected_project]}\n              />\n            )}\n            { this.props.selected_project &&\n              (<Project\n                id={this.props.selected_project}\n                project_data={this.props.all_projects_data[this.props.selected_project]}\n              />)\n            }\n          </div>\n          <JobDetails />\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_job: state.state.selected_job,\n    selected_project: state.state.selected_project,\n    all_projects_data: state.state.all_projects_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({selectJob}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectEditor);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\n// import Editor from './editor';\nimport DatePicker from 'react-datepicker';\n\nimport {openInvoiceEditor, editInvoice, editProject} from '../actions/actions';\n\n\n\nclass InvoiceEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.input_refs = {};\n    this.state = {\n      // edit: this.props.edit || false\n      invoice_data: {},\n      project_data: {}\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.open_invoice_editor) {\n      if (this.props.open_invoice_editor !== prevProps.open_invoice_editor) {\n        // this.callAPI();\n        this.setState({\n          invoice_data: this.props.all_invoices_data[this.props.open_invoice_editor.invoice_id] || {\n            id: \"invoice\"+ Math.random(),\n            terms:\"receipt\",\n            project_id: this.props.open_invoice_editor.project_id,\n            project_address: this.props.all_projects_data[this.props.open_invoice_editor.project_id].address,\n            billing_address: this.props.all_users_data[this.props.all_projects_data[this.props.open_invoice_editor.project_id].customer_id].billing_address,\n            items: []\n          },\n          project_data: this.props.all_projects_data[this.props.open_invoice_editor.project_id] || {\n            id: Math.random()\n          }\n        });\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.openInvoiceEditor(null);\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      invoice_data: {...this.state.invoice_data, [e.target.name]:e.target.value}\n    });\n  }\n\n  handleDescriptionChange = (value) => {\n    this.setState({\n      invoice_data: {...this.state.invoice_data, description:value}\n    });\n  }\n\n  handleIconChange = (changeEvent) => {\n    this.setState({\n      icon: changeEvent.target.value\n    });\n    setTimeout(()=>{\n      this.setState({\n        invoice_data: {}\n      });\n    },500);\n  };\n\n  handleSaveChanges = (e) => {\n    this.props.editInvoice(this.state.invoice_data.id, this.state.invoice_data);\n    this.props.editProject(this.props.open_invoice_editor.project_id, {invoice_id: this.state.invoice_data.id});\n\n    console.log(this.props.open_invoice_editor.project_id);\n\n    setTimeout(()=>{\n      this.setState({\n        invoice_data: {}\n      });\n    },500);\n  }\n\n  handleItemProductChange = (i, prop) => {\n    return (e) => {\n      let items = [...this.state.invoice_data.items];\n\n      if (items[i]) {\n        items[i][prop] = e.target.value;\n      } else {\n        items.push({\n          [prop]: e.target.value\n        })\n      }\n\n      this.setState({\n        invoice_data: {...this.state.invoice_data, items: items}\n      });\n    }\n  }\n\n  selectTerms = (e) => {\n    this.setState({\n      invoice_data: {...this.state.invoice_data, terms:e.target.value}\n    });\n  }\n\n  handleKeyPress = (i, type)=>{\n    return (e) => {\n      if(e.key === 'Enter'){\n        const input = document.getElementById(\"invoice\"+(i+1)+type);\n        console.log(input);\n        if (input) {\n          input.focus();\n        }\n      }\n    }\n  }\n\n  handleDelete = (id) => {\n    return (e)=>{\n      let items = [...this.state.invoice_data.items];\n\n      items.splice(id, 1);\n\n      this.setState({\n        invoice_data: {...this.state.invoice_data, items: items}\n      });\n    }\n  }\n\n  render() {\n    if (this.props.all_projects_data) {\n      let project_manager = \"no manager\";\n      const project = this.state.project_data;\n      const customer = this.props.all_users_data[this.state.project_data.customer_id] || {};\n\n      if (this.props.open_invoice_editor && this.props.open_invoice_editor.project_id) {\n\n        if (this.props.all_users_data[project.project_manager]) {\n          project_manager = this.props.all_users_data[project.project_manager].first_name + \" \" + this.props.all_users_data[project.project_manager].last_name;\n        }\n      }\n\n      let terms_nodes = [];\n\n      for (let t in this.props.terms) {\n        terms_nodes.push((\n          <option key={this.props.terms[t].id} value={this.props.terms[t].id}>{this.props.terms[t].name}</option>\n        ));\n      }\n\n      let table_rows = [];\n      let total = 0;\n      if (this.state.invoice_data.items) {\n        for (var i=0; i<this.state.invoice_data.items.length+1; i++) {\n          let item = this.state.invoice_data.items[i] || {};\n          const amount = (parseInt(item.quantity, 10) * parseInt(item.rate, 10));\n          table_rows.push((\n            <tr key={i} className={i < this.state.invoice_data.items.length ? \"\" : \"new\"}>\n              <td>\n                {i < this.state.invoice_data.items.length && (<button className=\"icon-button\" onClick={this.handleDelete(i)} title=\"Delete Task\"><i className=\"fas fa-trash\"></i></button>)}\n              </td>\n              <td>{i+1}</td>\n              <td><input\n                type=\"text\"\n                onKeyPress={this.handleKeyPress(i, \"product\")}\n                id={\"invoice\"+i+\"product\"}\n                value={item.product || \"\"}\n                onChange={this.handleItemProductChange(i, \"product\")}\n              /></td>\n              <td><input\n                type=\"text\"\n                onKeyPress={this.handleKeyPress(i, \"description\")}\n                id={\"invoice\"+i+\"description\"}\n                value={item.description || \"\"}\n                onChange={this.handleItemProductChange(i, \"description\")}\n              /></td>\n              <td><input\n                onKeyPress={this.handleKeyPress(i, \"quantity\")}\n                id={\"invoice\"+i+\"quantity\"}\n                type=\"number\" min=\"1\"\n                value={item.quantity || \"\"}\n                onChange={this.handleItemProductChange(i, \"quantity\")}\n              /></td>\n              <td><input\n                onKeyPress={this.handleKeyPress(i, \"rate\")}\n                id={\"invoice\"+i+\"rate\"}\n                type=\"number\" min=\"0\"\n                value={item.rate || \"\"}\n                onChange={this.handleItemProductChange(i, \"rate\")}\n              /></td>\n              <td className=\"value\">{i < this.state.invoice_data.items.length && (amount || \"0\")}</td>\n            </tr>\n          ));\n          total += (amount || 0);\n        }\n      }\n\n      return (\n        <div className={\"invoice-editor form\" + (this.props.open_invoice_editor && this.props.all_projects_data?\" show\":\"\")}>\n          <div className=\"content\">\n            <header>\n              <h1>\n                <span>{(project.name || \"\")}</span>\n              </h1>\n              <div>\n                <button\n                  onClick={()=>{\n                    this.handleSaveChanges();\n                    this.handleCloseButton();\n                  }}\n                  className=\"\"\n                >\n                  <i className=\"fas fa-check\"></i>\n                  <span>save</span>\n                </button>\n                <button\n                  onClick={()=>{\n                    this.handleCloseButton();\n                  }}\n                  className=\"\"\n                >\n                  <i className=\"fas fa-times\"></i>\n                  <span>cancel</span>\n                </button>\n              </div>\n            </header>\n            <main>\n              <div>\n                <div>\n                  <label>project manager</label>\n                  <p>{project_manager}</p>\n                </div>\n                <div>\n                  <label>invoice number</label>\n                  <p>{this.state.invoice_data.invoice_number}</p>\n                </div>\n              </div>\n              <div>\n                <div>\n                  <label>project address</label>\n                  <textarea name=\"project_address\" placeholder=\"project address\" value={this.state.invoice_data.project_address || \"\"} onChange={this.handleChange} />\n                </div>\n              </div>\n              <div>\n                <div>\n                  <label>bill to</label>\n                  <p>{customer.first_name + \" \" + customer.last_name}</p>\n                </div>\n              </div>\n              <div>\n                <div>\n                  <label>billing address</label>\n                  <textarea name=\"billing_address\" placeholder=\"billing address\" value={this.state.invoice_data.billing_address || \"\"} onChange={this.handleChange} />\n                </div>\n              </div>\n              <div>\n                <div>\n                  <label>terms</label>\n                  <div className=\"select-container\">\n                    <select value={this.state.invoice_data.terms} onChange={this.selectTerms}>\n\n                      {terms_nodes}\n                    </select>\n                    <i className=\"fas fa-caret-down\"></i>\n                  </div>\n                </div>\n              </div>\n              <div>\n                <div>\n                  <label>invoice date</label>\n                  <DatePicker\n                    selected={this.state.invoice_data.invoice_date ? new Date(this.state.invoice_data.invoice_date) : new Date()}\n                    className=\"\"\n                    onChange={this.handleChangeInvoieDate}\n                  />\n                </div>\n                <div>\n                  <label>invoice expiration date</label>\n                  <DatePicker\n                    selected={this.state.invoice_data.invoice_date ? new Date(this.state.invoice_data.expiration_date) : new Date()}\n                    className=\"\"\n                    onChange={this.handleChangeInvoieDate}\n                  />\n                </div>\n                <div>\n                  <label>payment due date</label>\n                  <DatePicker\n                    selected={this.state.invoice_data.invoice_date ? new Date(this.state.invoice_data.expiration_date) : new Date()}\n                    className=\"\"\n                    onChange={this.handleChangeInvoieDate}\n                  />\n                </div>\n              </div>\n\n              <div>\n                <div>\n                  <table>\n                    <tbody>\n                      <tr>\n                        <th></th>\n                        <th>#</th>\n                        <th>product/service</th>\n                        <th>description</th>\n                        <th>quantity</th>\n                        <th>rate</th>\n                        <th>amount</th>\n                      </tr>\n                      {table_rows}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n\n\n              <div>\n                <div>\n                  <label>message displayed on estimate</label>\n                  <textarea name=\"message\" placeholder=\"message\" value={this.state.invoice_data.message || \"\"} onChange={this.handleChange} />\n                </div>\n                <div className=\"f\">\n                  <label>total</label>\n                  <div className=\"value\">{total}</div>\n                </div>\n              </div>\n            </main>\n          </div>\n        </div>\n      );\n    } else {\n      return ([]);\n    }\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_job: state.state.selected_job,\n    open_invoice_editor: state.state.open_invoice_editor,\n    all_invoices_data: state.state.all_invoices_data,\n    all_projects_data: state.state.all_projects_data,\n    terms: state.state.terms,\n    all_users_data: state.state.all_users_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({openInvoiceEditor, editInvoice, editProject}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InvoiceEditor);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {UsersById, TasksById} from '../utilities/data'\n\nimport {openProjectSummary, updateUsersData, updateTasksData} from '../actions/actions';\n\nclass ProjectNotes extends React.Component {\n  state = {\n    project: null\n  }\n\n  callAPI () {\n    let updateUsers = {};\n    if (!this.props.all_users_data[this.props.all_projects_data[this.props.open_project_summary].customer_id]) {\n      updateUsers[this.props.all_projects_data[this.props.open_project_summary].customer_id] = {...UsersById[this.props.all_projects_data[this.props.open_project_summary].customer_id]};\n    }\n\n    let updateTasks = {};\n\n    for (var t=0; t<this.props.all_projects_data[this.props.open_project_summary].tasks.length; t++) {\n      let task_id = this.props.all_projects_data[this.props.open_project_summary].tasks[t];\n      if (!this.props.all_tasks_data[task_id]) {\n        updateTasks[task_id] = {...TasksById[task_id]};\n        if (TasksById[task_id].assigned_user && !this.props.all_users_data[TasksById[task_id].assigned_user]) {\n          updateUsers[TasksById[task_id].assigned_user] = {...UsersById[TasksById[task_id].assigned_user]};\n        }\n      }\n    }\n    for (var j=0; j<this.props.all_projects_data[this.props.open_project_summary].jobs.length; j++) {\n      let job = this.props.all_jobs_data[this.props.all_projects_data[this.props.open_project_summary].jobs[j]];\n\n      if (this.props.all_jobs_data[job.id].assigned_user && !this.props.all_users_data[this.props.all_jobs_data[job.id].assigned_user]) {\n        updateUsers[this.props.all_jobs_data[job.id].assigned_user] = {...UsersById[this.props.all_jobs_data[job.id].assigned_user]};\n      }\n\n\n      for (t=0; t<job.tasks.length; t++) {\n        let task_id = job.tasks[t];\n        if (!this.props.all_tasks_data[task_id]) {\n          updateTasks[task_id] = {...TasksById[task_id]};\n\n          if (TasksById[task_id].assigned_user && !this.props.all_users_data[TasksById[task_id].assigned_user]) {\n            updateUsers[TasksById[task_id].assigned_user] = {...UsersById[TasksById[task_id].assigned_user]};\n          }\n        }\n      }\n    }\n    this.props.updateUsersData(updateUsers);\n    this.props.updateTasksData(updateTasks);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.open_project_summary && this.props.all_projects_data) {\n      if (this.props.open_project_summary !== prevProps.open_project_summary) {\n        this.callAPI();\n        this.setState({\n          project: this.props.all_projects_data[this.props.open_project_summary]\n        });\n      }\n    }\n  }\n\n\n  handleCloseButton = (e) => {\n    this.props.openProjectSummary(null);\n  }\n\n  handlePrintButton = (e) => {\n    window.printDiv(\"print-project-notes\");\n  }\n\n\n  render() {\n    if (this.props.all_projects_data && this.state.project) {\n      let project = this.state.project;\n      let customer = project.customer_id ? this.props.all_users_data[project.customer_id] || {} : {}\n      let note_objects = [];\n      let note_nodes = [];\n\n      if (project.jobs && project.tasks) {\n\n        for (var j = 0; j<project.jobs.length; j++) {\n          let job = this.props.all_jobs_data[project.jobs[j]];\n          // if (job.description || job.tasks.length) {\n          let job_object = {\n            icon: job.icon,\n            name: job.name,\n            assigned: (job.assigned_user ? this.props.all_users_data[job.assigned_user] : \"\"),\n            start_date: job.start_dates[0],\n            end_date: job.end_dates[0],\n            description: job.description\n          };\n\n          if (job.tasks.length) {\n            job_object.tasks = [];\n            for (var t=0; t<job.tasks.length; t++) {\n              let task = this.props.all_tasks_data[job.tasks[t]];\n              let task_user = (task.assigned_user ? this.props.all_users_data[task.assigned_user] : \"\");\n              job_object.tasks.push((\n                <li key={j+\"\"+t+\"task\"}>\n                  <h5>{task.name}<span className=\"user\">{task_user && (task_user.first_name + \" \" + task_user.last_name)}</span></h5>\n                  { task.description && (\n                    <p key={j+\"\"+t+\"descripiton\"} dangerouslySetInnerHTML={{__html: task.description}}/>\n                  )}\n                </li>\n              ));\n            }\n          }\n\n          // }\n\n          note_objects.push(job_object);\n        }\n      }\n\n      note_objects.sort(function(a, b){\n        var x = -a.start_date || -b.start_date-10;\n        var y = -b.start_date || -a.start_date-10;\n        if (x < y) {return 1;}\n        if (x > y) {return -1;}\n        return 0;\n      });\n\n      for (var n=0; n<note_objects.length; n++) {\n        var note = note_objects[n];\n\n        let date=[];\n        if (note.start_date) {\n          date = (\n            <span className=\"date\" key={\"dates\"+n}>\n              <span className=\"date-value\">\n                {note.start_date.toLocaleDateString()}\n              </span>\n              <span className=\"time-value\">\n                {note.start_date.toLocaleTimeString() + (note.end_date ? \" - \" + note.end_date.toLocaleTimeString() : \"\")}\n              </span>\n            </span>\n          );\n        } else if (note.deadline) {\n          date = (\n            <span className=\"date\" key={\"deadline\"+n}>{\"due by \" + note.deadline.toLocaleDateString()}</span>\n          );\n        } else {\n          date = (\n            <span className=\"date tbd\" key={\"dates\"+n}>{\"to be scheduled\"}</span>\n          );\n        }\n\n        let description;\n        if (note.description) {\n          description = (\n            <p key={\"description\"+n} dangerouslySetInnerHTML={{__html: note.description}} />\n          );\n        }\n\n        let assigned = (\n          <span className=\"user\" key={\"assigned\"+n}>[\n            {note.assigned ?\n              (note.assigned.first_name + \" \" + note.assigned.last_name):\n              (<span className=\"tbd\">to be assigned</span>)\n            }\n          ]</span>\n        );\n        // }\n\n        let name;\n        if (note.name) {\n          name = (\n            <h3 key={\"name\"+n}>\n              <span>\n                {note.icon && (<i className={note.icon} />)}\n                {note.name}\n                {assigned}\n              </span>\n              {date}\n            </h3>\n          );\n          note_nodes.push((\n            <li key={\"job\"+n}>\n              {name}\n              {description}\n              {note.tasks && (\n                <div>\n                  <h4 key={\"tasklabel\"+n}>job tasks</h4>\n                  <ul key={\"tasks\"+n}>\n                    {note.tasks}\n                  </ul>\n                </div>\n              )}\n            </li>\n          ));\n        }\n\n      }\n\n\n      const description = window.unescape(project.description);\n\n      return (\n        <div className={\"project-notes form\" + (this.props.open_project_summary && this.props.all_projects_data?\" show\":\"\")}>\n          <div className=\"content\">\n            <header>\n              <div>\n                <button\n                  onClick={()=>{\n                    this.handlePrintButton();\n                  }}\n                  className=\"\"\n                >\n                  <i className=\"fas fa-print\"></i>\n                  <span>print</span>\n                </button>\n                <button\n                  onClick={()=>{\n                    this.handleCloseButton();\n                  }}\n                  className=\"\"\n                >\n                  <i className=\"fas fa-times\"></i>\n                  <span>close</span>\n                </button>\n              </div>\n            </header>\n            <main>\n              <div id=\"print-project-notes\" className=\"document\">\n                <h1>\n                  <span>{(project.name || \"\")}</span>\n                </h1>\n                <h2>customer</h2>\n                <div>\n                  <div>\n                    <h3>name</h3>\n                    <p>{(customer.last_name ? customer.first_name + \" \" + customer.last_name : \"\")}</p>\n                  </div>\n                  <div>\n                    <h3>address</h3>\n                    <p>{project.address}</p>\n                  </div>\n                </div>\n                {project.description ? [\n                  (<h2 key=\"pnotes\">project notes</h2>),\n                  (<p key=\"pdescription\" dangerouslySetInnerHTML={{__html: description}} />)\n                ]:[]}\n                <h2>project timeline</h2>\n                <ul>\n                  {note_nodes}\n                </ul>\n              </div>\n            </main>\n          </div>\n        </div>\n      );\n    }\n    else {\n      return [];\n    }\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    open_project_summary: state.state.open_project_summary,\n    all_jobs_data: state.state.all_jobs_data,\n    all_tasks_data: state.state.all_tasks_data,\n    all_users_data: state.state.all_users_data,\n    all_projects_data: state.state.all_projects_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({openProjectSummary, updateUsersData, updateTasksData}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectNotes);\n","import React from \"react\";\n\nconst Checkmark = ({ selected }) => (\n  <div\n    style={\n      selected\n        ? { left: \"4px\", top: \"4px\", position: \"absolute\", zIndex: \"1\" }\n        : { display: \"none\" }\n    }\n  >\n    <svg\n      style={{ fill: \"white\", position: \"absolute\" }}\n      width=\"24px\"\n      height=\"24px\"\n    >\n      <circle cx=\"12.5\" cy=\"12.2\" r=\"8.292\" />\n    </svg>\n    <svg\n      style={{ fill: \"#06befa\", position: \"absolute\" }}\n      width=\"24px\"\n      height=\"24px\"\n    >\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\" />\n    </svg>\n  </div>\n);\n\nconst imgStyle = {\n  transition: \"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s\"\n};\nconst selectedImgStyle = {\n  transform: \"translateZ(0px) scale3d(0.9, 0.9, 1)\",\n  transition: \"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s\"\n};\nconst cont = {\n  backgroundColor: \"#eee\",\n  cursor: \"pointer\",\n  overflow: \"hidden\",\n  position: \"relative\"\n};\n\nconst SelectedImage = ({\n  index,\n  onClick,\n  photo,\n  margin,\n  direction,\n  top,\n  left\n}) => {\n  //calculate x,y scale\n  const sx = (100 - (30 / photo.width) * 100) / 100;\n  const sy = (100 - (30 / photo.height) * 100) / 100;\n  selectedImgStyle.transform = `translateZ(0px) scale3d(${sx}, ${sy}, 1)`;\n\n  if (direction === \"column\") {\n    cont.position = \"absolute\";\n    cont.left = left;\n    cont.top = top;\n  }\n  return (\n    <div\n      style={{ margin, height: photo.height, width: photo.width, ...cont }}\n      className={!photo.selected ? \"not-selected\" : \"\"}\n    >\n      <Checkmark selected={photo.selected ? true : false} />\n      <img\n        alt={photo.name}\n        style={\n          photo.selected\n            ? { ...imgStyle, ...selectedImgStyle }\n            : { ...imgStyle }\n        }\n        {...photo}\n        onClick={e => onClick(e, { index, photo })}\n      />\n      <style>{`.not-selected:hover{outline:2px solid #06befa}`}</style>\n    </div>\n  );\n};\n\nexport default SelectedImage;\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport Gallery from 'react-photo-gallery';\n\nimport SelectedImage from './selected-image';\nimport Editor from './editor';\n\nimport {openPhotoGallery, updatePhotosData, editPhoto} from '../actions/actions';\n\nimport {PhotosById} from '../utilities/data';\n\n\n// const format = 'h:mm a';\n\nclass ProjectPhotoGallery extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      project_data: {},\n      photos: [],\n      columns: 6\n    }\n  }\n\n  callAPI () {\n    this.temp_api_timeout = setTimeout(()=>{\n      let photos = [];\n      let photos_by_id = {};\n      let photos_to_update = {};\n      if (!this.props.all_photos_data[this.props.all_projects_data[this.props.open_photos].photos[0]]) {\n        photos_by_id = {...PhotosById};\n      } else {\n        photos_by_id = {...this.props.all_photos_data}\n      }\n\n      for (var p=0; p<this.props.all_projects_data[this.props.open_photos].photos.length; p++) {\n        var photo_id =  this.props.all_projects_data[this.props.open_photos].photos[p];\n        photos.push(photos_by_id[photo_id]);\n        photos_to_update[photo_id] = photos_by_id[photo_id];\n      }\n\n      this.props.updatePhotosData(photos_to_update);\n\n      this.setState({\n        photos: photos\n      });\n    }, 500);\n\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.open_photos) {\n      if (this.props.open_photos !== prevProps.open_photos && this.props.all_projects_data[this.props.open_photos]) {\n        let photos = this.props.all_projects_data[this.props.open_photos].photos;\n        if (photos.length) {\n          this.callAPI();\n        }\n        this.setState({\n          project_data: this.props.all_projects_data[this.props.open_photos],\n          photos_ids: this.props.all_projects_data[this.props.open_photos].photos\n        });\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.openPhotoGallery(null);\n  }\n\n  handleZoomOutButton = (e) => {\n    if (this.state.columns < 15 && this.state.photos && this.state.columns < this.state.photos.length-1) {\n      this.setState({\n        columns: this.state.columns+1\n      })\n    }\n  }\n\n  handleZoomInButton = (e) => {\n    if (this.state.columns > 1) {\n      this.setState({\n        columns: this.state.columns-1\n      })\n    }\n  }\n\n  selectPhoto = (_e, obj) => {\n    let photos = this.state.photos;\n    // photos[obj.index].selected = !photos[obj.index].selected;\n    let selected = photos[obj.index];\n    this.setState({\n      photos: photos,\n      selected: this.props.all_photos_data[selected.id],\n      show_selected: !this.state.selected || this.state.selected.id !== selected.id || !this.state.show_selected ? this.props.all_photos_data[selected.id] : null\n    });\n  }\n  toggleSelect = () => {\n    let photos = this.state.photos.map((photo, index) => {\n      return { ...photo, selected: !this.state.selectAll };\n    });\n    this.setState({ photos: photos, selectAll: !this.state.selectAll });\n  }\n\n\n  handleChange = (e) => {\n    this.setState({\n      selected: {...this.state.selected, [e.target.name]:e.target.value}\n    });\n\n    this.props.editPhoto(this.state.selected.id, {...this.state.selected, [e.target.name]:e.target.value});\n  }\n\n  handleDescriptionChange = (value) => {\n    this.props.editPhoto(this.state.selected.id, {...this.state.selected, description:value});\n  }\n\n  render() {\n    return (\n      <div className={\"photo-gallery form\" + (this.props.open_photos && this.props.all_projects_data ? \" show\":\"\")}>\n      {(this.state.photos) &&\n        (<div className=\"content\">\n          <header>\n            <h1>{this.state.project_data.name}</h1>\n            <div>\n              <button\n                onClick={()=>{\n                  this.toggleSelect();\n                }}\n                className=\"icon-button\"\n              >\n                <i className=\"fas fa-check-double\"></i>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleZoomOutButton();\n                }}\n                className=\"icon-button\"\n              >\n                <i className=\"fas fa-search-minus\"></i>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleZoomInButton();\n                }}\n                className=\"icon-button\"\n              >\n                <i className=\"fas fa-search-plus\"></i>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleCloseButton();\n                }}\n                className=\"icon-button\"\n              >\n                <i className=\"fas fa-times\"></i>\n              </button>\n            </div>\n          </header>\n          <main>\n            <div className=\"gallery-container\">\n              <Gallery\n                photos={this.state.photos}\n                columns={this.state.columns}\n                onClick={this.selectPhoto}\n                ImageComponent={SelectedImage}\n              />\n            </div>\n              <div className={\"selected-panel\" + (this.state.show_selected ? \" show\" : \"\")}>\n                {this.state.selected && (\n                  <div>\n                    <div className=\"selected-photo\">\n                      <img\n                        alt={this.state.selected.name}\n                        {...this.state.selected}\n                      />\n                    </div>\n                    <div className=\"photo-details\">\n                      <label>caption</label>\n                      <input name=\"name\" type=\"text\" placeholder=\"photo caption\" value={this.state.selected.name || \"\"} onChange={this.handleChange} />\n                      <label>notes</label>\n                      <Editor\n                        defaultValue={(this.state.selected.description) || \"\"}\n                        onChange={this.handleDescriptionChange}\n                        refresh={this.state.selected.id}\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n          </main>\n        </div>)\n      }\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    open_photos: state.state.open_photos,\n    all_projects_data: state.state.all_projects_data,\n    all_photos_data: state.state.all_photos_data,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({openPhotoGallery, updatePhotosData, editPhoto}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectPhotoGallery);\n","import React from 'react';\nimport {\n  Route\n} from 'react-router-dom'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {updateProjectsData, selectJob, selectJobSchedule} from '../actions/actions'\n\nimport ProjectList from './project-list';\nimport ProjectOpener from './project-opener';\nimport ProjectEditor from './project-editor';\nimport InvoiceEditor from './invoice-editor';\nimport ProjectNotes from './project-notes';\nimport ProjectPhotoGallery from './project-photo-gallery';\n\nimport {URLString} from '../utilities/string';\nimport {ProjectData} from '../utilities/data';\n\nclass PageProjects extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false\n    };\n  }\n\n  componentDidMount() {\n    var projects_by_id = {};\n    const keys = Object.keys(this.props.all_projects_data);\n    const location_array = this.props.location.pathname.split(\"/\");\n    // let selected_id;\n\n    if (keys.length) {\n      for (var pr in this.props.all_projects_data) {\n        if (URLString(this.props.all_projects_data[pr].id) === location_array[2]) {\n          // selected_id = this.props.all_projects_data[pr].id;\n        }\n      }\n      projects_by_id = {...this.props.all_projects_data};\n      setTimeout(()=>{\n        this.setState({\n          loaded: true,\n        });\n      }, 1);\n    }\n    else {\n\n      this.temp_load_data = setTimeout(()=>{\n\n        for (var p=0;p<ProjectData.length; p++) {\n          projects_by_id[ProjectData[p].id]=ProjectData[p];\n          if (URLString(ProjectData[p].id) === location_array[2]) {\n            // selected_id = ProjectData[p].id;\n          }\n        }\n        this.props.updateProjectsData(projects_by_id);\n\n        setTimeout(()=>{\n          this.setState({\n            loaded: true,\n          });\n        }, 1);\n      }, 2000);\n    }\n\n    this.props.selectJobSchedule(null);\n  }\n\n  componentWillUnmount () {\n    window.clearTimeout(this.temp_load_data);\n  }\n\n  render() {\n    return (\n      <section id=\"page-projects\" className={\"projects \" + (this.state.loaded?\"loaded\":\"loading\")}>\n        <div className=\"load-background\"></div>\n        <Route path=\"/projects/:p\" component={ProjectOpener} />\n        <Route path=\"/projects\" component={ProjectList} />\n        <ProjectEditor />\n        <ProjectNotes />\n        <ProjectPhotoGallery />\n        <InvoiceEditor />\n      </section>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_project: state.state.selected_project,\n    all_projects_data: state.state.all_projects_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateProjectsData, selectJob, selectJobSchedule}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageProjects);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {updateCompanySettings} from '../actions/actions';\n\nimport {Content} from \"../utilities/content\";\n\nconst WeekDaysShort = Content[window.loc].WeekDaysShort;\n\nclass UserEditor extends React.Component {\n\n  handleChangeSetting = (setting, value) => {\n    this.props.updateCompanySettings({\n      ...this.props.company_settings,\n      [setting]: value\n    });\n  }\n\n  onRoleChange = (day) => {\n    return (e) => {\n      let days = [...(this.props.company_settings.weekend || [])];\n      if (!e.target.checked) {\n        days.push(day);\n      } else {\n        days.splice(days.indexOf(day),1);\n      }\n      this.handleChangeSetting(\"weekend\", days)\n    }\n  }\n\n  handleWorkHours = (e) => {\n    let value = parseInt(e.target.value, 10);\n    if (value>24) {\n      value = 24;\n    }\n    else if (value<1) {\n      value = 1;\n    }\n    this.handleChangeSetting(\"daily_work_hours\", value)\n  }\n\n  render() {\n    let weekend_nodes = [];\n\n    for (var r=0; r<WeekDaysShort.length; r++) {\n      var day = WeekDaysShort[r];\n\n      weekend_nodes.push((\n        <label className=\"checkbox-container\" key={day}>\n          <input\n            type=\"checkbox\"\n            onChange={this.onRoleChange(r)}\n            checked={!(this.props.company_settings.weekend.indexOf(r)+1)}\n          />\n          <i className=\"fas fa-check-square\"></i>\n          <i className=\"far fa-square\"></i>\n          <span>{day}</span>\n        </label>\n      ));\n    }\n\n\n    return (\n      <div className={\"advanced-settings\"}>\n\n        <div className=\"week-days\">\n          <h3>work days</h3>\n          {weekend_nodes}\n        </div>\n\n        <div className=\"daily-hours\">\n          <h3>daily work hours</h3>\n          <input\n            value={this.props.company_settings.daily_work_hours}\n            onChange={this.handleWorkHours}\n            type=\"number\" max=\"24\" min=\"1\"\n          />\n        </div>\n\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    company_settings: state.state.company_settings\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateCompanySettings}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserEditor);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {UsersById} from '../utilities/data'\n\nimport {SplitString} from '../utilities/string'\nimport {ObjectToArray} from '../utilities/array'\n\nimport {updateUsersData, selectUser} from '../actions/actions';\n\nclass UserList extends React.Component {\n  state = {\n    trade_filter: \"all\",\n    trade_names: [],\n    sort: \"last_name\"\n  }\n\n  callAPI () {\n    let trades = {};\n    for (var i in UsersById) {\n      trades[SplitString(UsersById[i].trade_name,\",\")] = !!SplitString(UsersById[i].trade_name,\",\");\n    }\n    let trade_names = Object.keys(trades);\n    trade_names.sort(function(a, b){\n      var x = a.toLowerCase();\n      var y = b.toLowerCase();\n      if (x < y) {return -1;}\n      if (x > y) {return 1;}\n      return 0;\n    });\n    this.setState({\n      trades: trades,\n      trade_names: trade_names,\n      trade_filter: \"all\",\n      loaded: true\n    });\n\n    this.props.updateUsersData(UsersById);\n\n  }\n\n  componentDidMount() {\n    if (this.props.all_users_data && !this.props.all_users_data[0]) {\n      this.callAPI();\n    }\n  }\n\n\n  selectSort = (e) => {\n    this.setState({sort: e.target.value});\n  }\n\n  selectTradeFilter = (e) => {\n    this.setState({trade_filter: e.target.value});\n  }\n\n  handleUserClick = (id) => {\n    return (_e) => {\n      this.props.selectUser(id);\n    }\n  }\n\n  render() {\n    let user_nodes = [];\n    let users_sorted = ObjectToArray(this.props.all_users_data);\n    let trades = [];\n    for (var t=0; t<this.state.trade_names.length; t++) {\n      trades.push((\n        <option key={this.state.trade_names[t]} value={this.state.trade_names[t]}>{this.state.trade_names[t]}</option>\n      ));\n    }\n\n    const sort_value = this.state.sort;\n    const trade_value = this.state.trade_filter;\n\n    users_sorted.sort(function(a, b){\n      var x = a[sort_value] ? (a.trade_name.indexOf(trade_value)===0 ? \"a\" : a[sort_value].toLowerCase()) : \"zzzzzz\";\n      var y = b[sort_value] ? (b.trade_name.indexOf(trade_value)===0 ? \"a\" : b[sort_value].toLowerCase()) : \"zzzzzz\";\n      if (x < y) {return -1;}\n      if (x > y) {return 1;}\n      return 0;\n    });\n\n    for (var u in users_sorted) {\n      let user = users_sorted[u];\n      if (user.trade_name !== \"Customer\" && !(user.trade_name.indexOf(\"Contractor\")+1)) {\n        if (this.state.trade_filter === \"all\" || (user.trade_name.indexOf(this.state.trade_filter)+1)){\n          let role_nodes = [];\n          for (var r=0; r<user.roles.length; r++) {\n            role_nodes.push((\n              <span key={this.props.roles[user.roles[r]].name}>{this.props.roles[user.roles[r]].name}</span>\n            ))\n          }\n\n          user_nodes.push ((\n            <li key={user.id}\n              onClick={this.handleUserClick(user.id)}\n            >\n              {user.photo_uri ? (\n                <img src={user.photo_uri} alt={user.first_name + \" \" + user.last_name} />\n              ):(\n                <i className=\"fas fa-user\"></i>\n              )}\n              <div className=\"info\">\n                <h3>{user.first_name + \" \" + user.last_name}</h3>\n                <p>{user.email}</p>\n              </div>\n              <div className=\"roles\">\n                {role_nodes}\n              </div>\n            </li>\n          ));\n        }\n      }\n    }\n    return (\n      <div className={\"user-list\"}>\n        <header>\n          <div>\n            <h2>Users</h2>\n            <input id=\"filter-selects\" type=\"checkbox\" />\n            <label className=\"filter-selects-button\" htmlFor=\"filter-selects\">\n              <i className=\"fas fa-sort-amount-up\"></i>\n            </label>\n            <div className=\"filter-selects\">\n              <div className=\"select-container\">\n                <i className=\"fas fa-sort-alpha-down\"></i>\n                <select onChange={this.selectSort}>\n                <option value=\"last_name\">sort by last name</option>\n                <option value=\"first_name\">sort by first name</option>\n                  <option value=\"trade_name\">sort by trade</option>\n                </select>\n                <i className=\"fas fa-caret-down\"></i>\n              </div>\n\n              <div className=\"select-container\">\n                <i className=\"fas fa-filter\"></i>\n                <select value={this.state.trade_filter} onChange={this.selectTradeFilter}>\n                  <option value=\"all\">all</option>\n                  {trades}\n                </select>\n                <i className=\"fas fa-caret-down\"></i>\n              </div>\n            </div>\n          </div>\n          <div>\n            <button\n              onClick={()=>{\n                this.props.selectUser(\"NEWUSER\");\n              }}\n              className=\"\"\n            >\n              <i className=\"fas fa-plus\"></i>\n              <span>add a new user</span>\n            </button>\n          </div>\n        </header>\n        <ul>\n          {user_nodes}\n        </ul>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_users_data: state.state.all_users_data,\n    roles: state.state.roles\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateUsersData, selectUser}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserList);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {UsersById} from '../utilities/data'\n\nimport {SplitString} from '../utilities/string'\nimport {ObjectToArray} from '../utilities/array'\n\nimport {updateUsersData, selectUser} from '../actions/actions';\n\nclass UserContractorList extends React.Component {\n  state = {\n    trade_filter: \"all\",\n    trade_names: [],\n    sort: \"last_name\"\n  }\n\n  callAPI () {\n    let trades = {};\n    for (var i in UsersById) {\n      trades[SplitString(UsersById[i].trade_name,\",\")] = !!SplitString(UsersById[i].trade_name,\",\");\n    }\n    let trade_names = Object.keys(trades);\n    trade_names.sort(function(a, b){\n      var x = a.toLowerCase();\n      var y = b.toLowerCase();\n      if (x < y) {return -1;}\n      if (x > y) {return 1;}\n      return 0;\n    });\n    this.setState({\n      trades: trades,\n      trade_names: trade_names,\n      trade_filter: \"all\",\n      loaded: true\n    });\n\n    this.props.updateUsersData(UsersById);\n\n  }\n\n  componentDidMount() {\n    if (this.props.all_users_data && !this.props.all_users_data[0]) {\n      this.callAPI();\n    }\n  }\n\n\n  selectSort = (e) => {\n    this.setState({sort: e.target.value});\n  }\n\n  selectTradeFilter = (e) => {\n    this.setState({trade_filter: e.target.value});\n  }\n\n  handleUserClick = (id) => {\n    return (_e) => {\n      this.props.selectUser(id);\n    }\n  }\n\n  render() {\n    let user_nodes = [];\n    let users_sorted = ObjectToArray(this.props.all_users_data);\n    let trades = [];\n    for (var t=0; t<this.state.trade_names.length; t++) {\n      trades.push((\n        <option key={this.state.trade_names[t]} value={this.state.trade_names[t]}>{this.state.trade_names[t]}</option>\n      ));\n    }\n\n    const sort_value = this.state.sort;\n    const trade_value = this.state.trade_filter;\n\n    users_sorted.sort(function(a, b){\n      var x = a[sort_value] ? (a.trade_name.indexOf(trade_value)===0 ? \"a\" : a[sort_value].toLowerCase()) : \"zzzzzz\";\n      var y = b[sort_value] ? (b.trade_name.indexOf(trade_value)===0 ? \"a\" : b[sort_value].toLowerCase()) : \"zzzzzz\";\n      if (x < y) {return -1;}\n      if (x > y) {return 1;}\n      return 0;\n    });\n\n    for (var u in users_sorted) {\n      let user = users_sorted[u];\n      if (user.trade_name.indexOf(\"Contractor\")+1) {\n        if (this.state.trade_filter === \"all\" || (user.trade_name.indexOf(this.state.trade_filter)+1)){\n          let role_nodes = [];\n          if (user.roles) {\n            for (var r=0; r<user.roles.length; r++) {\n              role_nodes.push((\n                <span key={this.props.roles[user.roles[r]].name}>{this.props.roles[user.roles[r]].name}</span>\n              ))\n            }\n          }\n\n          user_nodes.push ((\n            <li key={user.id}\n              onClick={this.handleUserClick(user.id)}\n            >\n              {user.photo_uri ? (\n                <img src={user.photo_uri} alt={user.first_name + \" \" + user.last_name} />\n              ):(\n                <i className=\"fas fa-user\"></i>\n              )}\n              <div className=\"info\">\n                <h3>{user.first_name + \" \" + user.last_name}</h3>\n                <p>{user.email}</p>\n              </div>\n              <div className=\"roles\">\n                {role_nodes}\n              </div>\n            </li>\n          ));\n        }\n      }\n    }\n    return (\n      <div className={\"user-list\"}>\n        <header>\n          <div>\n            <h2>Contractors</h2>\n            <input id=\"filter-selects\" type=\"checkbox\" />\n            <label className=\"filter-selects-button\" htmlFor=\"filter-selects\">\n              <i className=\"fas fa-sort-amount-up\"></i>\n            </label>\n            <div className=\"filter-selects\">\n              <div className=\"select-container\">\n                <i className=\"fas fa-sort-alpha-down\"></i>\n                <select onChange={this.selectSort}>\n                <option value=\"last_name\">sort by last name</option>\n                <option value=\"first_name\">sort by first name</option>\n                  <option value=\"trade_name\">sort by trade</option>\n                </select>\n                <i className=\"fas fa-caret-down\"></i>\n              </div>\n\n              <div className=\"select-container\">\n                <i className=\"fas fa-filter\"></i>\n                <select value={this.state.trade_filter} onChange={this.selectTradeFilter}>\n                  <option value=\"all\">all</option>\n                  {trades}\n                </select>\n                <i className=\"fas fa-caret-down\"></i>\n              </div>\n            </div>\n          </div>\n          <div>\n            <button\n              onClick={()=>{\n                this.props.selectUser(\"NEWUSER\");\n              }}\n              className=\"\"\n            >\n              <i className=\"fas fa-plus\"></i>\n              <span>add a new user</span>\n            </button>\n          </div>\n        </header>\n        <ul>\n          {user_nodes}\n        </ul>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    all_users_data: state.state.all_users_data,\n    roles: state.state.roles\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateUsersData, selectUser}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserContractorList);\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport Editor from './editor';\n\nimport {selectUser, updateUsersData} from '../actions/actions';\n\nclass UserEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // edit: this.props.edit || false\n      selected_user: this.props.all_users_data[this.props.selected_user] || {\n        id: Math.random()\n      }\n    };\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_user) {\n      if (this.props.selected_user !== prevProps.selected_user) {\n        this.setState({\n          selected_user: this.props.all_users_data[this.props.selected_user] || {\n            id: Math.random()\n          }\n        });\n      }\n    }\n  }\n\n  handleCloseButton = (e) => {\n    this.props.selectUser(null);\n    setTimeout(()=>{\n      this.setState({\n        selected_user: {\n          id: Math.random()\n        }\n      });\n    },500);\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      selected_user: {...this.state.selected_user, [e.target.name]:e.target.value}\n    });\n  }\n\n  handleDescriptionChange = (value) => {\n    this.setState({\n      task_data: {...this.state.task_data, description:value}\n    });\n  }\n\n  handleSaveChanges = (e) => {\n    if (this.props.selected_user === \"NEWUSER\") {\n      let id=Math.random();\n      let new_user = {\n        ...this.state.selected_user,\n        trade_name: \"\",\n        id: id,\n        jobs: [],\n        tasks: [],\n        new_date: new Date(),\n        status: 'new'\n      }\n      this.props.updateUsersData({\n        [id]: new_user\n      });\n    } else {\n      this.props.updateUsersData({\n        [this.props.selected_user]: this.state.selected_user\n      });\n    }\n\n    setTimeout(()=>{\n      this.setState({\n        selected_user: {\n          id: Math.random()\n        }\n      });\n    },500);\n  }\n\n  onRoleChange = (id) => {\n    return (e) => {\n      let roles = [...(this.state.selected_user.roles || [])];\n      if (e.target.checked) {\n        roles.push(id);\n      } else {\n        roles.splice(roles.indexOf(id),1);\n      }\n      this.setState({\n        selected_user: {...this.state.selected_user, roles:roles}\n      })\n    }\n  }\n\n  render() {\n    let role_nodes = [];\n\n    for (var r in this.props.roles) {\n      var role = this.props.roles[r];\n\n      role_nodes.push((\n        <label className=\"checkbox-container\" key={role.id}>\n          <input type=\"checkbox\" onChange={this.onRoleChange(role.id)} checked={this.state.selected_user.roles && (this.state.selected_user.roles.indexOf(role.id)+1)} />\n          <i className=\"fas fa-check-square\"></i>\n          <i className=\"far fa-square\"></i>\n          <span>{role.name}</span>\n        </label>\n      ));\n    }\n\n\n    return (\n      <div className={\"user-editor form\" + (this.props.selected_user && this.props.all_users_data?\" show\":\"\")}>\n        <div className=\"content\">\n          <header>\n            <h1><i className=\"fas fa-phone\"></i><span>{(this.state.selected_user.first_name || \"\") + \" \" + (this.state.selected_user.last_name || \"\")}</span></h1>\n            <div>\n              <button\n                onClick={()=>{\n                  this.handleSaveChanges();\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-check\"></i>\n                <span>save</span>\n              </button>\n              <button\n                onClick={()=>{\n                  this.handleCloseButton();\n                }}\n                className=\"\"\n              >\n                <i className=\"fas fa-times\"></i>\n                <span>cancel</span>\n              </button>\n            </div>\n          </header>\n          <main>\n            <div>\n              <div>\n                <label>first name</label>\n                <input name=\"first_name\" type=\"text\" placeholder=\"first name\" value={this.state.selected_user.first_name || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>last name</label>\n                <input name=\"last_name\" type=\"text\" placeholder=\"last name\" value={this.state.selected_user.last_name || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>email</label>\n                <input name=\"email\" type=\"email\" placeholder=\"email\" value={this.state.selected_user.email || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>phone</label>\n                <input name=\"phone\" type=\"text\" placeholder=\"phone\" value={this.state.selected_user.phone || \"\"} onChange={this.handleChange} />\n              </div>\n            </div>\n            <div>\n              <div>\n                <label>company name</label>\n                <input name=\"company_name\" type=\"text\" placeholder=\"company name\" value={this.state.selected_user.company_name || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>website</label>\n                <input name=\"website\" type=\"text\" placeholder=\"website\" value={this.state.selected_user.website || \"\"} onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>birthday</label>\n                <input name=\"birthday\" type=\"text\" placeholder=\"birthday\" value={this.state.selected_user.birthday || \"\"} onChange={this.handleChange} />\n              </div>\n            </div>\n            <div>\n              <div>\n                <label>address</label>\n                <textarea name=\"address\" placeholder=\"address\" value={this.state.selected_user.address || \"\"} onChange={this.handleChange} />\n              </div>\n            </div>\n            <div className=\"roles-list\">\n              {role_nodes}\n            </div>\n\n            <div>\n              <div>\n                <label>notes</label>\n                <Editor\n                  defaultValue={this.state.selected_user.description || \"\"}\n                  onChange={this.handleDescriptionChange}\n                  refresh={this.props.selected_user || this.state.selected_user.id}\n                />\n              </div>\n            </div>\n\n          </main>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    selected_user: state.state.selected_user,\n    all_users_data: state.state.all_users_data,\n    roles: state.state.roles\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({selectUser, updateUsersData}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserEditor);\n","import React from 'react'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { updateLeadsData } from '../actions/actions';\n\nimport AdvancedSettings from './advanced-settings';\nimport UserList from './user-list';\nimport UserContractorList from './user-contractor-list';\nimport UserEditor from './user-editor';\n\n\nclass PageAdmin extends React.Component {\n  state = {\n    loaded: false,\n    tab: \"user\"\n  };\n  componentDidMount() {\n    this.temp_load_data = setTimeout(()=>{\n      this.setState({loaded: true});\n    }, 1000);\n  }\n\n  componentWillUnmount () {\n    window.clearTimeout(this.temp_load_data);\n  }\n\n  changeMode (mode) {\n    this.setState({\n      tab: mode\n    });\n  }\n\n  render() {\n    return (\n      <section id=\"page-admin\" className={this.state.loaded?\"loaded\":\"loading\"}>\n        <div className=\"load-background\"></div>\n        <div className=\"card f-nogrow\">\n          <div className=\"admin-panel\">\n            <header>\n              <div>\n                <h1>Admin Panel</h1>\n                <button className={\"tab-button \" + (this.state.tab === \"user\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"user\")}}>add/edit users</button>\n                <button className={\"tab-button \" + (this.state.tab === \"contractor\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"contractor\")}}>add/edit contractors</button>\n                <button className={\"tab-button \" + (this.state.tab === \"advanced\"?\"selected\":\"\")} onClick={()=>{this.changeMode(\"advanced\")}}>advanced settings</button>\n\n              </div>\n            </header>\n            <div className=\"tab-panel\">\n              <div className={this.state.tab === \"user\"?\"show\":\"\"}>\n                { this.state.tab === \"user\" && (\n                  <UserList />\n                )}\n              </div>\n              <div className={this.state.tab === \"contractor\"?\"show\":\"\"}>\n                { this.state.tab === \"contractor\" && (\n                  <UserContractorList />\n                )}\n              </div>\n              <div className={this.state.tab === \"advanced\"?\"show\":\"\"}>\n                { this.state.tab === \"advanced\" && (\n                  <AdvancedSettings />\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n        <UserEditor />\n      </section>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    all_leads_data: state.state.all_leads_data\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({updateLeadsData}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageAdmin);\n","import React from 'react'\n\nclass PageSchedule extends React.Component {\n  render() {\n    return (\n      <section id=\"page-404\">\n        <div>\n          <h1>{\"404\"}</h1>\n          <h2>{\"Your request could not be found.\"}</h2>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default PageSchedule\n","import React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { signOutUser, signInUser, updateRoles } from '../actions/actions';\n\n//import\nimport {\n  Route,\n  Switch,\n  Redirect\n} from 'react-router-dom'\n\nimport DragDropContainer from './drag-drop-container';\n\n\nimport Header from './header';\nimport Footer from './footer';\nimport {URLString} from '../utilities/string';\n\nimport PageSignIn from './page-signin';\nimport PageSetup from './page-setup';\nimport PageDashboard from './page-dashboard';\nimport PageSchedule from './page-schedule';\nimport PageLeads from './page-leads';\nimport PageProjects from './page-projects';\nimport PageAdmin from './page-admin';\nimport Page404 from './page-404';\n\n\nimport {DefaultUser, Roles} from '../utilities/data';\n\n// import API from '../utilities/api';\n// import Axios from 'axios';\n\nimport {HOMEPAGE, applicationConfig} from '../config/config';\n\n\nimport * as Msal from 'msal';\n// let Msal = window.Msal;\n\n\nclass App extends Component {\n  constructor (props) {\n    const authCallback = (errorDesc, token, error, tokenType) => {\n        //This function is called after loginRedirect and acquireTokenRedirect. Not called with loginPopup\n        // msal object is bound to the window object after the constructor is called.\n      if (token) {\n        this.props.signInUser(DefaultUser);\n        console.log(token);\n      }\n      else {\n        console.log(error + \":\" + errorDesc);\n      }\n    }\n\n    window.clientApplication = new Msal.UserAgentApplication(\n      applicationConfig.clientID,\n      applicationConfig.authority,\n      authCallback,\n      {\n        redirectUri: 'http://localhost:3000/',\n        cacheLocation: 'localStorage',\n        validateAuthority: false\n      }\n    );\n\n    props.updateRoles(Roles);\n\n    // window.clientApplication.cacheLocation = 'localStorage';\n\n    super(props);\n    this.state = {\n\n    }\n  }\n  componentDidMount() {\n    window.openModal = (modal_object) => {\n      this.setState({\n        modal: modal_object\n      });\n      setTimeout(()=>{\n        this.setState({modal_state: \"show\"});\n      }, 50);\n    }\n    window.closeModal = () => {\n      this.setState({modal_state: \"\"});\n      setTimeout(()=>{\n        this.setState({\n          modal: null\n        });\n      }, 750);\n    }\n    // Create a new style element\n    const el = document.createElement('style');\n    el.type = 'text/css';\n\n    // Add it to the head of the document\n    const head = document.querySelector('head');\n    head.appendChild(el);\n\n    // At some future point we can totally redefine the entire content of the style element\n    window.setStyle = (newStyles) => {\n      el.innerHTML = newStyles;\n    };\n\n    window.printDiv = (divId) => {\n      let printDivCSS = '<link href=\"./printstyle.css\" rel=\"stylesheet\" type=\"text/css\"><link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.4.2/css/all.css\" integrity=\"sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns\" crossorigin=\"anonymous\"><div class=\"document\">';\n\n      window.frames[\"print_frame\"].document.body.innerHTML=printDivCSS + document.getElementById(divId).innerHTML + \"</div>\";\n      window.frames[\"print_frame\"].window.focus();\n\n      setTimeout(()=>{\n        window.frames[\"print_frame\"].window.print();\n      }, 1000);\n    }\n\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.selected_project !== prevProps.selected_project) {\n      // this.props.history.push(\"/projects\" + (this.props.selected_project ? \"/\" + URLString(this.props.all_projects_data[this.props.selected_project].id) : \"\"));\n      this.props.history.push(\"/projects\" + (this.props.selected_project ? \"/\" + URLString(this.props.selected_project) : \"\"));\n    }\n  }\n\n  render() {\n    const {current_user} = this.props;\n    const homepage = current_user ? current_user.config.homepage || current_user.company_config.homepage || HOMEPAGE : HOMEPAGE;\n    let redirect;\n\n    if (localStorage.getItem(\"redirect\")) {\n      redirect = localStorage.getItem(\"redirect\");\n      // localStorage.removeItem(\"redirect\");\n    }\n\n    if (window.location.pathname !== \"/\") {\n      localStorage.setItem(\"redirect\", window.location.pathname);\n    }\n\n    return (\n      <div id=\"app\">\n        { this.state.modal && (\n          <div id=\"modal-container\" className={this.state.modal_state}>{this.state.modal}</div>\n        )}\n        <input id=\"nav-menu-checkbox\" type=\"checkbox\" />\n\n        <Route component={Header} />\n        <main>\n          <DragDropContainer>\n            <Switch>\n              <Route exact path=\"/ah-geez-404\" component={Page404} key=\"404\" />\n\n              { current_user ? (\n                !current_user.company_setup || !current_user.user_setup ? [\n                  <Route exact path=\"/setup\" component={PageSetup} key=\"setup\" />,\n                  <Redirect to=\"/setup\" key=\"to-setup\" />\n                ]:[\n                  <Redirect exact from=\"/signin\" to={homepage} key=\"to-home-from-signin\" />,\n                  <Redirect exact from=\"/\" to={redirect || homepage} key=\"to-home\" />,\n                  <Route exact path=\"/dashboard\" component={PageDashboard} key=\"dashboard\" />,\n                  <Route path=\"/projects\" component={PageProjects} key=\"projects\" />,\n                  <Route exact path=\"/schedule\" component={PageSchedule} key=\"schedule\" />,\n                  <Route path=\"/leads\" component={PageLeads} key=\"leads\" />,\n                  (current_user.roles.indexOf(\"admin\")+1) && <Route path=\"/admin\" component={PageAdmin} key=\"admin\" />\n                ]\n              ):[\n                // !code ? [\n                //   <Route component={PageSignIn} key=\"sign-in\" />\n                // ]:[\n                  <Route exact path=\"/\" component={PageSignIn} key=\"sign-in\" />,\n                  <Redirect to=\"/\" key=\"to-home\" />\n                // ]\n              ]}\n              <Route component={Page404} />\n              <Redirect to=\"/ah-geez-404\" key=\"to-404\" />\n            </Switch>\n          </DragDropContainer>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    current_user: state.state.current_user,\n    selected_project: state.state.selected_project\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({signOutUser, signInUser, updateRoles}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './store/store';\n\nimport {\n  BrowserRouter as Router,\n  Route\n} from 'react-router-dom'\n\nimport './styles/app.css';\nimport App from './components/app';\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <Route component={App} />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}