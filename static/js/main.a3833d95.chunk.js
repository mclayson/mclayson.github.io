(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(33),l=a.n(r),o=a(9),c=a(8),i=a(18),d=a(2);window.loc="en";var m={en:{MonthNames:["January","Fabruary","March","April","May","June","July","August","September","October","November","December"],MonthNamesShort:["Jan","Fab","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WeekDaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DeleteAllTasksWarning:{message_1:"You're about to delete all of the tasks for the job: ",message_2:".",message_3:"This cannot be undone.",message_4:"Are you sure?",confirm:"delete tasks",cancel:"cancel"},MarkAllTasksCompleteWarning:{message_1:"You're about to mark all of the tasks for the job: ",message_2:" as completed.",message_3:"Are you sure?",confirm:"they're all done!",cancel:"hang on"}}},u={company_setup:!0,user_setup:!0,company_config:{homepage:"/dashboard"},config:{homepage:"/schedule"},first_name:"Joe",last_name:"Smith",email:"joe.smith@projulcustomer.com",company_id:Math.random(),roles:["admin","owner","scheduler","project-manager"],trades:["Company Owner"]},p={current_user:null,all_job_data:{},all_task_data:{}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EXAMPLE":return Object(d.a)({},e,{examplePropOne:"newPropOne"});case"EXAMPLE-TWO":return Object(d.a)({},e,{examplePropTwo:t.sampleData+t.moreData});case"SETUP-COMPANY":return Object(d.a)({},e,{current_user:Object(d.a)({},e.current_user||{},{company_setup:!0})});case"SETUP-USER":return Object(d.a)({},e,{current_user:Object(d.a)({},e.current_user||{},{user_setup:!0})});case"SIGNIN-USER":return Object(d.a)({},e,{current_user:t.user_data});case"SIGNOUT-USER":return Object(d.a)({},e,{current_user:null});case"SELECT-JOB":return Object(d.a)({},e,{selected_project:t.project_id,selected_job:t.job_id});case"UPDATE-ALL-USERS-DATA":return Object(d.a)({},e,{all_users_data:t.all_users_data});case"UPDATE-USERS-DATA":return Object(d.a)({},e,{all_users_data:Object(d.a)({},e.all_users_data,t.users_data)});case"UPDATE-ALL-LEADS-DATA":return Object(d.a)({},e,{all_leads_data:t.all_leads_data});case"UPDATE-LEADS-DATA":return Object(d.a)({},e,{all_leads_data:Object(d.a)({},e.all_leads_data,t.leads_data)});case"UPDATE-ALL-PROJECT-DATA":return Object(d.a)({},e,{all_project_data:t.all_project_data});case"UPDATE-ALL-JOB-DATA":return Object(d.a)({},e,{all_job_data:t.all_job_data});case"UPDATE-JOB-DATA":return Object(d.a)({},e,{all_job_data:Object(d.a)({},e.all_job_data,t.job_data)});case"EDIT-JOB":return Object(d.a)({},e,{all_job_data:Object(d.a)({},e.all_job_data,Object(i.a)({},t.job_id,Object(d.a)({},e.all_job_data[t.job_id],t.job_object)))});case"UPDATE-ALL-TASK-DATA":return Object(d.a)({},e,{all_task_data:t.all_task_data});case"UPDATE-TASK-DATA":return Object(d.a)({},e,{all_task_data:Object(d.a)({},e.all_task_data,t.task_data)});case"ADD-TASK":var a=Object(d.a)({},e.all_job_data),n=Object(d.a)({},e.all_project_data);return t.job_id&&a[t.job_id].tasks.push(t.task_id),t.project_id&&n[t.project_id].tasks.push(t.task_id),Object(d.a)({},e,{all_project_data:n,all_job_data:a,all_task_data:Object(d.a)({},e.all_task_data,Object(i.a)({},t.task_id,t.task_object))});case"EDIT-TASK":return Object(d.a)({},e,{all_task_data:Object(d.a)({},e.all_task_data,Object(i.a)({},t.task_id,Object(d.a)({},e.all_task_data[t.task_id],t.task_object)))});case"DELETE-TASKS":a=Object(d.a)({},e.all_job_data),n=Object(d.a)({},e.all_project_data);for(var s=Object(d.a)({},e.all_task_data),r=0;r<t.task_ids.length;r++){var l=s[t.task_ids[r]];if(l.job_id)for(var o=0;o<a[l.job_id].tasks.length;o++)a[l.job_id].tasks[o]===t.task_ids[r]&&a[l.job_id].tasks.splice(o,1);if(l.project_id)for(var c=0;c<n[l.project_id].tasks.length;c++)n[l.project_id].tasks[c]===t.task_ids[r]&&n[l.project_id].tasks.splice(c,1);delete s[t.task_ids[r]]}return Object(d.a)({},e,{all_job_data:a,all_project_data:n,all_task_data:s});case"COMPLETE-TASK":var m=Object(d.a)({},e.all_task_data[t.task_id],{completed:!0});return Object(d.a)({},e,{all_task_data:Object(d.a)({},e.all_task_data,Object(i.a)({},t.task_id,m))});default:return e}},_=Object(c.e)(Object(c.c)({state:h}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),b=(a(72),a(3)),f=a(4),g=a(6),j=a(5),E=a(7),v=function(){return{type:"SETUP-USER"}},y=function(){return{type:"SETUP-COMPANY"}},k=function(){return{type:"SIGNOUT-USER"}},O=function(e){return{type:"SIGNIN-USER",user_data:e}},D=function(e){return{type:"UPDATE-USERS-DATA",users_data:e}},M=function(e){return{type:"UPDATE-LEADS-DATA",leads_data:e}},C=function(e){return{type:"UPDATE-ALL-PROJECT-DATA",all_project_data:e}},w=function(e){return{type:"UPDATE-JOB-DATA",job_data:e}},N=function(e,t){return{type:"EDIT-JOB",job_id:e,job_object:t}},S=function(e,t){return{type:"SELECT-JOB",project_id:e,job_id:t}},T=function(e){return{type:"UPDATE-TASK-DATA",task_data:e}},A=function(e,t,a,n){return{type:"ADD-TASK",task_id:e,task_object:t,job_id:a,project_id:n}},P=function(e,t){return{type:"EDIT-TASK",task_id:e,task_object:t}},x=function(e){return{type:"DELETE-TASKS",task_ids:e}},I=function(e){return{type:"COMPLETE-TASK",task_id:e}},U=a(130),L=a(127),J=a(131),R=a(129),F=a(58),H=a(128),B=a(57),Y=a.n(B),W=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).signOut=function(e){e.preventDefault(),window.clientApplication.logout(),a.props.signOutUser()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return s.a.createElement("header",null,s.a.createElement(F.a,{to:"/"},s.a.createElement("img",{src:Y.a,alt:"Projul Logo"})),this.props.current_user&&s.a.createElement("ul",{className:"flex-center"+(!this.props.current_user||this.props.current_user.company_setup||this.props.current_user.user_setup?"":" menu-placeholder")},s.a.createElement("li",null,s.a.createElement(H.a,{exact:!0,to:"/dashboard"},s.a.createElement("i",{className:"fas fa-home"}),s.a.createElement("span",null,"dashboard"))),s.a.createElement("li",null,s.a.createElement(H.a,{to:"/projects"},s.a.createElement("i",{className:"fas fa-toolbox"}),s.a.createElement("span",null,"projects"))),s.a.createElement("li",null,s.a.createElement(H.a,{exact:!0,to:"/schedule"},s.a.createElement("i",{className:"far fa-calendar-alt"}),s.a.createElement("span",null,"schedule"))),s.a.createElement("li",null,s.a.createElement(H.a,{exact:!0,to:"/leads"},s.a.createElement("i",{className:"fas fa-phone"}),s.a.createElement("span",null,"leads")))),s.a.createElement("nav",null,this.props.current_user&&s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("a",{href:"#sign-out",onClick:this.signOut},s.a.createElement("i",{className:"fas fa-sign-out-alt"}),s.a.createElement("span",null,"sign out"))))))}}]),t}(s.a.Component),z=Object(o.b)(function(e){return{current_user:e.state.current_user}},function(e){return Object(c.b)({signOutUser:k},e)})(W),K=function(){return s.a.createElement("footer",null,"Projul \xa9 ",(new Date).getFullYear())},G={clientID:"097b5df2-496e-4e2a-87ac-dcb775b2b170",authority:"https://projul.b2clogin.com/projul.onmicrosoft.com/b2c_1_siupin",b2cScopes:["https://projul.onmicrosoft.com/dev-api/user_impersonation"],webApi:"https://functionapp220181204090627.azurewebsites.net/api/Function1?name=Projul"},V=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={signed_in:!1,loading:!1},a.SignIn=function(){a.props.signInUser(u)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("section",{id:"signin",className:this.state.loading?"loading":""},s.a.createElement("div",{className:"card"},s.a.createElement("h1",null,"welcome back"),s.a.createElement("button",{className:"button-sign-in load-button",disabled:this.state.loading,onClick:function(t){e.setState({loading:!0}),e.SignIn()}},s.a.createElement("span",null,"sign in"),s.a.createElement("span",null)),s.a.createElement("div",null,s.a.createElement(F.a,{to:"/signup"},"Need an account? Try it out!"))))}}]),t}(s.a.Component),X=Object(o.b)(function(e){return{current_user:e.state.current_user}},function(e){return Object(c.b)({signInUser:O},e)})(V),q=["General Contractor - Commercial","Custom Home Builder","Production Builder","Remodeler - Renovation","Design Build","Specialty Contractor","Subcontractor","Construction Manager","Property Developer","Real Estate Agent","Architect - Designer","Supplier - Vendor","Other"],Q=["North America","Latin America","South America","Europe","Australia","Middle East","Africa","Asia & India","Other"],Z=["Company Owner or Partner","Project Manager","Office Manager","Superintendent","Estimator","Architect","Engineer","Accountant","Other"],$=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={setup_complete:!1,loading:!1,slider_state:0,company_name:"",phone:"",construction_type:"",region:"",role:""},a.CompleteSetup=function(){setTimeout(function(){a.props.setupUser(),a.props.setupCompany()},2e3)},a.HandleChange=function(e){var t={};t[e.target.name]=e.target.value,a.setState(t)},a.HandleCheckboxChange=function(e){var t={};t[e.target.id]=e.target.checked,a.setState(t)},a.HandleSubmit=function(e){e.preventDefault(),a.Validate()&&(a.setState({loading:!0}),a.CompleteSetup())},a.Validate=function(e){var t=[""!==a.state.company_name&&""!==a.state.phone&&""!==a.state.construction_type&&""!==a.state.region&&""!==a.state.role,!0];return e?t[e-1]:t[0]&&t[1]},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({slider_state:1})},1e3)}},{key:"render",value:function(){var e=this,t=[s.a.createElement("option",{disabled:!0,key:"default"},"construction type")],a=[s.a.createElement("option",{disabled:!0,key:"default"},"region")],n=[s.a.createElement("option",{disabled:!0,key:"default"},"your role")];for(var r in q)t.push(s.a.createElement("option",{value:q[r],key:q[r]},q[r]));for(var l in Q)a.push(s.a.createElement("option",{value:Q[l],key:Q[l]},Q[l]));for(var o in Z)n.push(s.a.createElement("option",{value:Z[o],key:Z[o]},Z[o]));return s.a.createElement("section",{id:"page-setup"},s.a.createElement("div",null,s.a.createElement("div",{className:"card f-column f-space-between"},s.a.createElement("form",{className:"slider t-center"+(this.state.loading?" loading":""),onSubmit:this.HandleSubmit},s.a.createElement("div",{className:"f-column"+(1===this.state.slider_state?" active":"")},s.a.createElement("h2",null,"Tell us a little about your construction company..."),s.a.createElement("div",{className:"f-column f-center f-a-center f-grow"},s.a.createElement("p",null,s.a.createElement("input",{name:"company_name",type:"text",placeholder:"company name",value:this.state.company_name,onChange:this.HandleChange})),s.a.createElement("p",null,s.a.createElement("input",{name:"phone",type:"text",placeholder:"phone number",value:this.state.phone,onChange:this.HandleChange})),s.a.createElement("p",{className:"select-container"},s.a.createElement("select",{className:this.state.construction_type?"":"placeholder",defaultValue:"construction type",name:"construction_type",onChange:this.HandleChange},t),s.a.createElement("i",{className:"fas fa-caret-down"})),s.a.createElement("p",{className:"select-container"},s.a.createElement("select",{className:this.state.region?"":"placeholder",defaultValue:"region",name:"region",onChange:this.HandleChange},a),s.a.createElement("i",{className:"fas fa-caret-down"})),s.a.createElement("p",{className:"select-container"},s.a.createElement("select",{className:this.state.role?"":"placeholder",defaultValue:"your role",name:"role",onChange:this.HandleChange},n),s.a.createElement("i",{className:"fas fa-caret-down"}))),s.a.createElement("footer",null,s.a.createElement("button",{className:"next-button",type:"button",disabled:this.state.loading||!this.Validate(1),onClick:function(t){e.setState({slider_state:2})}},s.a.createElement("span",null,"next")))),s.a.createElement("div",{className:"f-column"+(2===this.state.slider_state?" active":"")},s.a.createElement("h2",null,"Which Projul features interest you the most?"),s.a.createElement("div",{className:"f-column f-center f-a-center f-grow"},s.a.createElement("p",null,s.a.createElement("input",{id:"feature-1",className:"feature",name:"feature-1",type:"checkbox",onChange:this.HandleCheckboxChange}),s.a.createElement("label",{htmlFor:"feature-1"},"Project Managment!")),s.a.createElement("p",null,s.a.createElement("input",{id:"feature-2",className:"feature",name:"feature-2",type:"checkbox",onChange:this.HandleCheckboxChange}),s.a.createElement("label",{htmlFor:"feature-2"},"Customer Communication!")),s.a.createElement("p",null,s.a.createElement("input",{id:"feature-3",className:"feature",name:"feature-3",type:"checkbox",onChange:this.HandleCheckboxChange}),s.a.createElement("label",{htmlFor:"feature-3"},"Project Photo Organization!"))),s.a.createElement("footer",null,s.a.createElement("button",{className:"back-button",type:"button",disabled:this.state.loading,onClick:function(t){e.setState({slider_state:1})}},s.a.createElement("span",null,"back")),s.a.createElement("button",{className:"load-button",disabled:this.state.loading||!this.Validate(2)},s.a.createElement("span",null,"complete setup"),s.a.createElement("span",null))))))))}}]),t}(s.a.Component),ee=Object(o.b)(function(e){return{current_user:e.state.current_user}},function(e){return Object(c.b)({setupUser:v,setupCompany:y},e)})($),te=a(35),ae=a.n(te).a.create({baseURL:"https://",timeout:1e3,headers:{}});function ne(e){ae({type:"GET",url:G.webApi,headers:{Authorization:"Bearer "+e}}).then(function(e){console.log("Web APi returned:\n"+JSON.stringify(e))}).catch(function(e){console.log("Error calling the Web api:\n"+e)})}var se=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={loaded:!1},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({loaded:!0}),window.clientApplication.acquireTokenSilent(G.b2cScopes).then(function(e){ne(e)},function(e){window.clientApplication.acquireTokenPopup(G.b2cScopes).then(function(e){ne(e)},function(e){console.log("Error acquiring the access token to call the Web api:\n"+e)})})},50)}},{key:"render",value:function(){return s.a.createElement("section",{id:"page-dashboard"},s.a.createElement("div",{className:this.state.loaded?"loaded":"loading"},s.a.createElement("div",{className:"card d1"}),s.a.createElement("div",{className:"card d2"})),s.a.createElement("div",{className:this.state.loaded?"loaded":"loading"},s.a.createElement("div",{className:"card d3"})))}}]),t}(s.a.Component),re=[0,6],le=8;function oe(e,t){return new Date(t,e+1,0).getDate()}function ce(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var ie=["Marcia Byrd","Homer Jensen","Derrick Hopkins","Sara Bowman","Ora Hawkins","Traci Gonzalez","Charles Knight","Shari Palmer","Alfred Mcbride","Josephine Martinez","Geraldine Page","Pete Grant","Brooke Cummings","Willis Yates","Randy Thomas","Mack George","Melanie Reid","Terence Rodgers","Meredith Foster","Patsy Campbell","Carolyn Dixon","Esther Weaver","Lillian Maxwell","Gladys Watts","Mae Nunez","Sammy Clark","Sandra Rios","Kathryn Terry","Courtney Dennis","Don Caldwell","Kenny Glover","Marcus Harrison","Molly Young","Joshua Edwards","Bertha Warner","Gayle Stokes","Victoria Harris","Jana Singleton","Orville Hoffman","Benjamin Fleming","Erma Lowe","Miguel Stephens","Rafael Smith","Albert Marsh","Wayne Goodman","Tasha Parsons","Johnnie Munoz","Wade Ward","Blanche Carter","Cesar Cooper"],de={},me=["#1abc9c","#16a085","#27ae60","#3498db","#2980b9","#4a69bd","#6a89cc","#60a3bc","#079992","#3c6382","#d35400","#e74c3c","#e15f41","#e77f67","#c0392b"];function ue(){var e=me[Math.round(Math.random()*(me.length-1))];return de[e]?ue():(de[e]=!0,e)}var pe=[0,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9],he=["Project Manager","Operations Manager","Plumber","Technician","Electrician","Laborer","Dry Wall Installer","Tile Setter","Hardwood Installer","Framer"],_e={"Sign Contract":"Customer","Pre Deposit":"Customer",Estimation:"Project Manager",Demolition:"Laborer",Protection:"Laborer","Tile Installation":"Tile Setter","Hardwood Installation":"Hardwood Installer",Plumbing:"Plumber","Clean Up":"Laborer",Inspection:"Project Manager","Final Payment":"Customer"},be={"Sign Contract":["Sign contract"],"Pre Deposit":["Recieve pre deposit"],Estimation:["Complete Estimation"],Demolition:["Break it down"],Protection:["Lay down plastic","Tape up walls"],"Tile Installation":["Put the tile in"],"Hardwood Installation":["Put the hardwood in"],Plumbing:["Fix the pipes"],"Clean Up":["Clean up mess"],Inspection:["Complete Inspection"],"Final Payment":["Reviece final payment"]},fe={"Sign Contract":"fas fa-file-signature","Pre Deposit":"fas fa-dollar-sign",Estimation:"fas fa-balance-scale",Demolition:"fas fa-hammer",Protection:"fas fa-tape","Tile Instalation":"fas fa-toolbox",Plumbing:"fas fa-tint","Clean Up":"fas fa-broom",Inspection:"fas fa-clipboard-list","Final Payment":"fas fa-dollar-sign"},ge="fas fa-toolbox";var je=0;function Ee(e,t,a,n,s){je++;var r,l=6+Math.random()*le/4,o=Math.max(1,l+Math.random()*le),c="t"+je+"p"+e.id,i=_e[t];if(n&&i&&Oe[i])if("Customer"===i){for(var d=0;d<Oe[i].length;d++)e.id===Oe[i][d].visible_projects[0]&&(r=Oe[i][d]);r||(n=!1)}else r=Oe[i][Math.floor(Math.random()*Oe[i].length)];else n=!1;var m=function(e,t,a,n){var s=[],r="";if(be[e])for(var l=0;l<be[e].length;l++)r="task_"+Math.random(),ke[r]={name:be[e][l],description:'"'+be[e][l]+'" is a cool task.',completed:!(!t||!a)&&!!(Math.round(100*Math.random())%5),id:r,job_id:n},s.push(r);return s}(t,n,s,c);s=0;for(var u=0;u<m.length;u++)m[u].completed&&s++;var p={start_date:n?new Date(a.getFullYear(),a.getMonth(),a.getDate(),l):null,end_date:n?new Date(a.getFullYear(),a.getMonth(),a.getDate(),o,-Math.round(10*Math.random())):null,assigned_user:n?r.id:null,project_id:e.id,project_color:e.color,project_name:e.name,default_trade:i,name:t,icon:fe[t]||ge,progress:n&&Math.round(s/m.length*100)||0,id:c,tasks:m};return r&&r.jobs.push(p.id),p}var ve={},ye={},ke={},Oe={Customer:[]};function De(e){var t={jobs:[],id:Math.random(),first_name:"",last_name:e.name.substr(0,e.name.indexOf(" ")),trade_name:"Customer",visible_projects:[e.id]};Oe.Customer.push(t),Ce.push(t)}var Me=[{name:"Scott Livingroom Remodel",color:ue(),id:100,jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Clean Up","Inspection","Final Payment"]},{name:"Johnson Kitchen Remodel",color:ue(),id:200,jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Plumbing","Clean Up","Inspection","Final Payment"]},{name:"Smith Bathroom Remodel",color:ue(),id:300,jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Plumbing","Clean Up","Inspection","Final Payment"]},{name:"Osborn Kitchen Tile",color:ue(),id:400,jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Hardwood Installation","Plumbing","Clean Up","Inspection","Final Payment"]},{name:"Harmon Home Exterior",color:ue(),id:500,jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Clean Up","Inspection","Final Payment"]},{name:"Burke Bathroom Remodel",color:ue(),id:600,jobs:[],tasks:[],temp_progress:Math.round(100*Math.random())%5,temp_jobs:["Sign Contract","Pre Deposit","Estimation","Demolition","Protection","Tile Installation","Plumbing","Clean Up","Inspection","Final Payment"]}],Ce=[{jobs:[],id:Math.random(),first_name:"Tmc Builders Inc",last_name:"",trade_name:"Contractor,Plumber"},{jobs:[],id:Math.random(),first_name:"Wood N'Things Llc",last_name:"",trade_name:"Contractor"},{jobs:[],id:Math.random(),first_name:"Cabinet Pros",last_name:"",trade_name:"Contractor"},{jobs:[],id:Math.random(),first_name:"Gilman Contractors Inc",last_name:"",trade_name:"Contractor"},{jobs:[],id:Math.random(),first_name:"Crowne Closets & Cabinetry",last_name:"",trade_name:"Contractor"},{jobs:[],id:Math.random(),first_name:"The Structures Group Southwest Inc",last_name:"",trade_name:"Contractor"},{jobs:[],id:Math.random(),first_name:"B Smith Construction Inc",last_name:"",trade_name:"Contractor"},{jobs:[],id:Math.random(),first_name:"Turner CO",last_name:"",trade_name:"Contractor"},{jobs:[],id:Math.random(),first_name:"Tower Mechanical Sv",last_name:"",trade_name:"Contractor"},{jobs:[],id:Math.random(),first_name:"Rice",last_name:"Werthmann",trade_name:he[6]},{jobs:[],id:Math.random(),first_name:"Ollen",last_name:"Hampshire",trade_name:he[5]},{jobs:[],id:Math.random(),first_name:"Michael",last_name:"Goermar",trade_name:he[4]},{jobs:[],id:Math.random(),first_name:"Dianne",last_name:"Rossini",trade_name:he[3]+",Plumber"},{jobs:[],id:Math.random(),first_name:"Marjan",last_name:"Berishaj",trade_name:he[2]},{jobs:[],id:Math.random(),first_name:"Robert",last_name:"Hudson",trade_name:he[1]},{jobs:[],id:Math.random(),first_name:"Jeremy",last_name:"Tilton",trade_name:he[0]+",Plumber"},{jobs:[],id:Math.random(),first_name:"Lance",last_name:"Keever",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Manuel",last_name:"Patridge",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Herbert",last_name:"Baylor",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Jorge",last_name:"Brzezinski",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Calvin",last_name:"Youngquist",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Richard",last_name:"Sturtz",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Hugh",last_name:"Raymond",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Adrian",last_name:"Beutel",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Samuel",last_name:"Manwaring",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Tony",last_name:"Hallowell",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Randy",last_name:"Drumm",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Tim",last_name:"Geist",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Glen",last_name:"Lotz",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Jamie",last_name:"Bare",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Adrian",last_name:"Cabana",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Albert",last_name:"Mossman",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Richard",last_name:"Spikes",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Alexander",last_name:"Tanksley",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Earl",last_name:"Rutledge",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Leon",last_name:"Blasi",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Jerome",last_name:"Deegan",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Edgar",last_name:"Christine",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Thomas",last_name:"Alvardo",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]},{jobs:[],id:Math.random(),first_name:"Alexander",last_name:"Guidi",trade_name:he[pe[Math.floor(Math.random()*pe.length)]]}];!function(){for(var e=new Date,t={},a=0;a<re.length;a++)t[re[a]]=!0;for(var n=0;n<Ce.length;n++){var s=Ce[n];Oe[s.trade_name]=Oe[s.trade_name]||[],Oe[s.trade_name].push(s)}for(var r=0;r<Me.length;r++){var l=Me[r],o=new Date(e.getFullYear(),e.getMonth(),e.getDate()-2*r),c=0;De(l);for(var i=0;i<l.temp_jobs.length;i++){for(var d=new Date(o.getFullYear(),o.getMonth(),o.getDate()+i+c),m=i<r?100:i===r?Math.min(Math.round(100*Math.random()),100):0;t[d.getDay()];)c++,d=new Date(o.getFullYear(),o.getMonth(),o.getDate()+i+c);var u=Ee(l,l.temp_jobs[i],d,0!==m||!!Math.round(100*Math.random()%4),m);l.jobs.push(u.id),ve[d.getFullYear()+"_"+d.getMonth()]||(ve[d.getFullYear()+"_"+d.getMonth()]=[]),ve[d.getFullYear()+"_"+d.getMonth()].push(u),ye[u.id]=u}}}();var we={},Ne=["new","scheduled","pending","estimate","approved","rejected"],Se={new:3,scheduled:7,pending:10,estimate:8,approved:6,rejected:3},Te={0:20,1:10,2:5,3:5,4:6,5:4};!function(){var e,t=0,a=new Date;for(var n in Te)for(var s=0;s<Te[n];s++){e="lead_"+Math.random();for(var r=n,l={},o=a,c=r;c>=0;c--)o=new Date(o.getFullYear(),o.getMonth(),o.getDate()-Math.floor(Math.random()*Se[Ne[r]])),l[Ne[c]]=o;var i=(t<ie.length?ie[t]:ie[Math.floor(Math.random()*ie.length)]).split(" ");we[e]={id:e,index:s,new_date:l.new,scheduled_date:l.scheduled,pending_date:l.pending,estimate_date:l.estimate,approved_date:l.approved,rejected_date:l.rejected,status:Ne[r],first_name:i[0],last_name:i[1]},t++}}();var Ae=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={selected_day:0,jobs_by_day:[],jobs_by_id:{}},a.handleDayClick=function(e){var t=parseInt(e.currentTarget.dataset.id,10),n=parseInt(e.currentTarget.dataset.index,10);a.props.handleDayClick(t,n)},a.handleJobClick=function(e){var t=e.currentTarget.dataset.id,n=e.currentTarget.dataset.project;a.props.selectJob(n,t)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"calcJobsByDay",value:function(){for(var e=[],t=0;t<oe(this.props.month,this.props.year);t++)e.push([]);for(var a=0;a<this.props.user.jobs.length;a++){var n=this.props.user.jobs[a],s=ye[n];s.start_date&&s.start_date.getMonth()===this.props.month&&e[s.start_date.getDate()-1].push(s)}return e}},{key:"componentDidMount",value:function(){var e=this.calcJobsByDay();this.setState({jobs_by_day:e}),this.props.selected_day&&this.setState({selected_day:this.props.selected_day})}},{key:"componentDidUpdate",value:function(e){this.props.month!==e.month&&this.setState({jobs_by_day:this.calcJobsByDay()}),this.props.selected_day&&this.props.selected_day!==e.selected_day&&this.setState({selected_day:this.props.selected_day})}},{key:"render",value:function(){var e=[],t=[],a=["jobs-0","jobs-1","jobs-2","jobs-3","jobs-4","jobs-5","jobs-6","jobs-7","jobs-8"];if(!this.props.selected_day&&this.state.jobs_by_day&&this.state.jobs_by_day.length===oe(this.props.month,this.props.year))for(var n=0;n<oe(this.props.month,this.props.year);n++){for(var r=new Date(this.props.year,this.props.month,n+1),l=0,o=0;o<this.state.jobs_by_day[n].length;o++){var c=this.state.jobs_by_day[n][o];l+=(c.end_date-c.start_date)/1e3/60/60}for(var i="",d=0;d<re.length;d++)r.getDay()===re[d]&&(i=" weekend");e.push(s.a.createElement("li",{key:this.props.user.id+"_"+n,"data-id":n+1,"data-index":this.props.index,className:"cell "+a[Math.min(Math.round(8*l/le),a.length-1)]+i+(r.toDateString()===(new Date).toDateString()||this.props.month/20+this.props.year>(new Date).getMonth()/20+(new Date).getFullYear()&&0===n?" today":"")+(this.props.selected_job_data&&this.props.selected_job_data.start_date&&ce(this.props.selected_job_data.start_date,r)&&this.props.selected_job_data.assigned_user===this.props.user.id?" assigned":""),onClick:this.handleDayClick},l?Math.round(10*l)/10+" hrs":""))}if(this.state.selected_day){for(var m=0;m<24;m++)t.push(s.a.createElement("li",{key:"hour-"+m,className:"day-cell"}));if(this.state.jobs_by_day[this.state.selected_day-1])for(o=0;o<this.state.jobs_by_day[this.state.selected_day-1].length;o++){var u=this.state.jobs_by_day[this.state.selected_day-1][o],p=(u.end_date-u.start_date)/1e3/60/60/24*100,h=(u.start_date-new Date(this.props.year,this.props.month,this.state.selected_day))/1e3/60/60/24*100;t.push(s.a.createElement("li",{key:"job-"+u.id,"data-id":u.id,"data-project":u.project_id,className:"job"+(u.id===this.props.selected_job?" selected":""),style:{left:h+"%",maxWidth:p+"%",minWidth:p+"%",backgroundColor:u.project_color},onClick:this.handleJobClick},s.a.createElement("h4",null,s.a.createElement("i",{className:u.icon}),s.a.createElement("span",null,s.a.createElement("strong",null,u.name))),s.a.createElement("div",null,u.project_name)))}}return s.a.createElement("div",{className:"user-schedule"+(this.props.selected_day?" show-day":"")},this.props.selected_day?s.a.createElement("ul",{className:"day-schedule",style:{}},t):s.a.createElement("ul",{className:"month-schedule"},e))}}]),t}(s.a.Component),Pe=Object(o.b)(function(e){return{}},function(e){return Object(c.b)({selectJob:S},e)})(Ae),xe=m[window.loc].WeekDaysShort,Ie=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={selected_day:0},a.handleDayClick=function(e){var t=parseInt(e.currentTarget.dataset.id,10);a.props.handleDayClick(t)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.selected_day&&this.props.selected_day!==e.selected_day&&this.setState({selected_day:this.props.selected_day})}},{key:"render",value:function(){for(var e=[],t=[],a=0;a<oe(this.props.month,this.props.year);a++){var n=new Date(this.props.year,this.props.month,a+1);e.push(s.a.createElement("li",{key:a+1,"data-id":a+1,className:"cell"+(n.toDateString()===(new Date).toDateString()?" today":"")+(this.props.selected_job_data&&this.props.selected_job_data.start_date&&ce(this.props.selected_job_data.start_date,n)?" assigned":""),onClick:this.handleDayClick},s.a.createElement("span",null,a+1),s.a.createElement("small",null,xe[n.getDay()])))}if(this.state.selected_day)for(var r=0;r<24;r++){var l=new Date(this.props.year,this.props.month,this.state.selected_day,r);t.push(s.a.createElement("li",{key:r,className:"day-cell"},s.a.createElement("span",null,(l.getHours()%12||12)+" "+(l.getHours()>=12?"pm":"am"))))}return s.a.createElement("div",{className:"user-schedule heatmap-dates"+(this.props.selected_day?" show-day":"")},this.props.selected_day?s.a.createElement("ul",{className:"day-schedule",style:{}},t):s.a.createElement("ul",{className:"month-schedule"},e))}}]),t}(s.a.Component);function Ue(e,t){return e.indexOf(t)>0?e.substr(0,e.indexOf(t)):e}function Le(e){return e.replace(/\s+/g,"-").toLowerCase()}var Je=function(e,t,a){if(a>=e.length)for(var n=a-e.length+1;n--;)e.push(void 0);e.splice(a,0,e.splice(t,1)[0])},Re=m[window.loc].WeekDaysShort,Fe=m[window.loc].MonthNames,He=m[window.loc].MonthNamesShort,Be=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={sort:"trade_name",trade_filter:"all",date:new Date,selected_day:0,selected_index:0,loaded:!1},a.selectSort=function(e){console.log(e.target.value),a.setState({sort:e.target.value})},a.selectTradeFilter=function(e){console.log(e.target.value),a.setState({trade_filter:e.target.value})},a.handleJobClick=function(e,t){},a.handleDayClick=function(e,t){a.setState({selected_day:e,selected_index:t})},a.handleClearSelectedDay=function(e){a.setState({selected_day:0})},a.handleNextDay=function(e){var t=a.state.selected_day,n=a.state.date;t===oe(n.getMonth(),n.getFullYear())?(a.handleNextMonth(),t=1):t++,a.setState({selected_day:t})},a.handlePrevDay=function(e){var t,n=a.state.selected_day;1===n?n=oe((t=a.handlePrevMonth()).getMonth(),t.getFullYear()):n--,a.setState({selected_day:n})},a.handleGotoToday=function(e){var t=new Date;a.gotoDate(t)},a.gotoDate=function(e){a.setState({date:e,selected_day:e.getDate()}),a.props.selected_job&&a.props.selected_job_data.assigned_user&&(a[a.props.selected_job_data.assigned_user]?a[a.props.selected_job_data.assigned_user].parentNode.parentNode.scrollTop=a[a.props.selected_job_data.assigned_user].offsetTop-200:setTimeout(function(){a[a.props.selected_job_data.assigned_user]&&(a[a.props.selected_job_data.assigned_user].parentNode.parentNode.scrollTop=a[a.props.selected_job_data.assigned_user].offsetTop-200)},100))},a.handleNextMonth=function(e){var t,n=a.state.date;return t=11===n.getMonth()?new Date(n.getFullYear()+1,0,1):new Date(n.getFullYear(),n.getMonth()+1,1),a.setState({date:t}),t},a.handlePrevMonth=function(e){var t,n=a.state.date;return t=0===n.getMonth()?new Date(n.getFullYear()-1,11,1):new Date(n.getFullYear(),n.getMonth()-1,1),a.setState({date:t}),t},a.createRef=function(e){return function(t){a[e]=t}},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){for(var t={},a={},n=0;n<Ce.length;n++)t[Ue(Ce[n].trade_name,",")]=!!Ue(Ce[n].trade_name,","),a[Ce[n].id]=Ce[n];var s=Object.keys(t);s.sort(function(e,t){var a=e.toLowerCase(),n=t.toLowerCase();return a<n?-1:a>n?1:0}),e.setState({trades:t,trade_names:s,trade_filter:"all",loaded:!0}),e.props.updateUsersData(a),e.props.selected_job&&(e.props.selected_job_data.start_date?e.gotoDate(e.props.selected_job_data.start_date):e.props.selected_job_data.default_trade&&t[e.props.selected_job_data.default_trade]&&e.setState({trade_filter:e.props.selected_job_data.default_trade}))},1e3)}},{key:"componentDidUpdate",value:function(e){this.props.selected_job!==e.selected_job&&(this.props.selected_job_data.start_date?(this.setState({trade_filter:"all"}),this.gotoDate(this.props.selected_job_data.start_date)):(this.handleClearSelectedDay(),this.props.selected_job_data.default_trade&&this.state.trades[this.props.selected_job_data.default_trade]?this.setState({trade_filter:this.props.selected_job_data.default_trade}):this.setState({trade_filter:"all"})))}},{key:"render",value:function(){var e=this,t=[],a=[],n=[];if(this.state.loaded){for(var r=function(e){var t=[];for(var a in e)t.push(e[a]);return t}(this.props.all_users_data),l=0;l<this.state.trade_names.length;l++)n.push(s.a.createElement("option",{key:this.state.trade_names[l],value:this.state.trade_names[l]},this.state.trade_names[l]));var o=this.state.sort,c=this.state.trade_filter;r.sort(function(e,t){var a=e[o]?0===e.trade_name.indexOf(c)?"a":e[o].toLowerCase():"zzzzzz",n=t[o]?0===t.trade_name.indexOf(c)?"a":t[o].toLowerCase():"zzzzzz";return a<n?-1:a>n?1:0});for(var i=0;i<r.length;i++)("all"===this.state.trade_filter||r[i].trade_name.indexOf(this.state.trade_filter)+1)&&(t.push(s.a.createElement("li",{key:"user-"+r[i].id},s.a.createElement("h3",null,r[i].first_name+" "+r[i].last_name),s.a.createElement("h4",null,Ue(r[i].trade_name,",")))),a.push(s.a.createElement("li",{key:"user-"+r[i].id,ref:this.createRef(r[i].id)},s.a.createElement(Pe,{handleDayClick:this.handleDayClick,handleJobClick:this.handleJobClick,selected_day:this.state.selected_day,selected_index:this.state.selected_index,user:r[i],month:this.state.date.getMonth(),year:this.state.date.getFullYear(),selected_job:this.props.selected_job,selected_job_data:this.props.selected_job_data,index:i}))))}return s.a.createElement("div",{className:this.props.className+" scheduler"+(this.state.loaded?" loaded":" loading")},s.a.createElement("div",{className:"menu"},s.a.createElement("div",null,s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-sort-alpha-down"}),s.a.createElement("select",{onChange:this.selectSort},s.a.createElement("option",{value:"trade_name"},"sort by trade"),s.a.createElement("option",{value:"last_name"},"sort by last name"),s.a.createElement("option",{value:"first_name"},"sort by first name")),s.a.createElement("i",{className:"fas fa-caret-down"})),s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-filter"}),s.a.createElement("select",{value:this.state.trade_filter,onChange:this.selectTradeFilter},s.a.createElement("option",{value:"all"},"all"),n),s.a.createElement("i",{className:"fas fa-caret-down"}))),this.state.selected_day?s.a.createElement("div",null,s.a.createElement("button",{onClick:function(t){e.handlePrevDay(t)}},s.a.createElement("i",{className:"fas fa-angle-left"}),s.a.createElement("span",null,"Previous Day")),s.a.createElement("button",{onClick:function(t){e.handleClearSelectedDay(t)}},s.a.createElement("i",{className:"fas fa-angle-up"}),s.a.createElement("span",null,Fe[this.state.date.getMonth()])),s.a.createElement("button",{onClick:function(t){e.handleNextDay(t)}},s.a.createElement("span",null,"Next Day"),s.a.createElement("i",{className:"fas fa-angle-right"}))):s.a.createElement("div",null,s.a.createElement("button",{onClick:function(t){e.handlePrevMonth(t)}},s.a.createElement("i",{className:"fas fa-angle-left"}),s.a.createElement("span",null,"Previous Month")),s.a.createElement("button",{onClick:function(t){e.handleGotoToday(t)}},s.a.createElement("span",null,"Today")),s.a.createElement("button",{onClick:function(t){e.handleNextMonth(t)}},s.a.createElement("span",null,"Next Month"),s.a.createElement("i",{className:"fas fa-angle-right"})))),s.a.createElement("div",{className:"schedule-grid schedule-grid-header"},s.a.createElement("ul",{className:"user-names"},s.a.createElement("li",{className:"month-name"},s.a.createElement("h3",null,this.state.selected_day?Re[new Date(this.state.date.getFullYear(),this.state.date.getMonth(),this.state.selected_day).getDay()]+" "+He[this.state.date.getMonth()]+" "+this.state.selected_day:Fe[this.state.date.getMonth()]),s.a.createElement("h4",null,this.state.date.getFullYear()))),s.a.createElement("ul",{className:"heat-maps"},s.a.createElement("li",null,s.a.createElement(Ie,{handleDayClick:this.handleDayClick,selected_day:this.state.selected_day,month:this.state.date.getMonth(),year:this.state.date.getFullYear(),selected_job:this.props.selected_job,selected_job_data:this.props.selected_job_data})))),s.a.createElement("div",{className:"schedule-grid"},s.a.createElement("div",{className:"load-background"}),s.a.createElement("ul",{className:"user-names"},t),s.a.createElement("ul",{className:"heat-maps"},a)))}}]),t}(s.a.Component),Ye=Object(o.b)(function(e){return{all_users_data:e.state.all_users_data}},function(e){return Object(c.b)({updateUsersData:D},e)})(Be),We=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={loaded:!1},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({loaded:!0})},1)}},{key:"render",value:function(){return s.a.createElement("section",{id:"page-schedule",className:this.state.loaded?"loaded":"loading"},s.a.createElement(Ye,{className:"card"}))}}]),t}(s.a.Component),ze=Object(o.b)(function(e){return{all_users_data:e.state.all_users_data,all_project_data:e.state.all_project_data}})(We),Ke=a(17),Ge=a(38),Ve=a(13),Xe=["white","#fff3e9","#ffe5cf","#ffd7b6","#ffc99c","#ffbb83","#ffad69","#ff9f50","#ff9136"],qe={new:3,scheduled:7,pending:10,estimate:10,approved:10,rejected:10},Qe=function(e,t,a){var n=Math.min(Math.round((new Date-e[e.status+"_date"])/1e3/60/60/24*8/qe[e.status]),Xe.length-1);return Object(d.a)({color:n>=8?"white":"black",border:"1px solid #3a3a3a",background:Xe[n]},a)},Ze=function(e){return{background:e?"#e4e4e4":"white",border:"1px solid transparent",padding:".5rem",width:"100%",flex:"1 1 auto"}},$e=function(e,t,a){var n=Array.from(e),s=n.splice(t,1),r=Object(Ge.a)(s,1)[0];return n.splice(a,0,r),n},et=function(e,t,a,n){var s=Array.from(e),r=Array.from(t),l=s.splice(a.index,1),o=Object(Ge.a)(l,1)[0];o.status={new_leads:"new",scheduled_leads:"scheduled",pending_leads:"pending",estimate_leads:"estimate",approved_leads:"approved",rejected_leads:"rejected",other_leads:""}[n.droppableId],o[o.status+"_date"]=o[o.status+"_date"]||new Date,r.splice(n.index,0,o);var c={};return c.source=s,c.dest=r,c},tt=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={sort:"heat"},a.onBeforeDragStart=function(){},a.onDragStart=function(){},a.onDragUpdate=function(){},a.onDragEnd=function(e){return function(t){var n=t.source,s=t.destination;if(s)if(n.droppableId===s.droppableId){var r=Object(Ke.a)(e[s.droppableId]),l=$e(r,n.index,s.index);a.props.updateLeadsData(l.reduce(function(e,t,a){return t.index=a,e[t.id]=t,e},{}))}else{var o=Object(Ke.a)(e[n.droppableId]),c=Object(Ke.a)(e[s.droppableId]),i=et(o,c,n,s),d=i.source.concat(i.dest);a.props.updateLeadsData(d.reduce(function(e,t,a){return t.index=a,e[t.id]=t,e},{}))}}},a.selectSort=function(e){console.log(e.target.value),a.setState({sort:e.target.value})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e={new_leads:[],pending_leads:[],scheduled_leads:[],estimate_leads:[],approved_leads:[],rejected_leads:[],other_leads:[]};for(var t in this.props.all_leads_data)switch(this.props.all_leads_data[t].status){case"new":e.new_leads.push(Object(d.a)({},this.props.all_leads_data[t]));break;case"pending":e.pending_leads.push(Object(d.a)({},this.props.all_leads_data[t]));break;case"scheduled":e.scheduled_leads.push(Object(d.a)({},this.props.all_leads_data[t]));break;case"estimate":e.estimate_leads.push(Object(d.a)({},this.props.all_leads_data[t]));break;case"approved":e.approved_leads.push(Object(d.a)({},this.props.all_leads_data[t]));break;case"rejected":e.rejected_leads.push(Object(d.a)({},this.props.all_leads_data[t]));break;default:e.other_leads.push(Object(d.a)({},this.props.all_leads_data[t]))}var a=this.state.sort;for(var n in e)e[n].sort(function(e,t){var n="heat"===a?Math.round(e[e.status+"_date"]/1e3/60/60/24*8/qe[e.status]-new Date):e[a].toLowerCase(),s="heat"===a?Math.round(t[t.status+"_date"]/1e3/60/60/24*8/qe[t.status]-new Date):t[a].toLowerCase();return n<s?-1:n>s?1:0});return s.a.createElement(Ve.a,{onBeforeDragStart:this.onBeforeDragStart,onDragStart:this.onDragStart,onDragUpdate:this.onDragUpdate,onDragEnd:this.onDragEnd(e)},s.a.createElement("div",{className:"lead-kanban"},s.a.createElement("div",{className:"menu"},s.a.createElement("div",null,s.a.createElement("div",{className:"select-container"},s.a.createElement("i",{className:"fas fa-sort-alpha-down"}),s.a.createElement("select",{onChange:this.selectSort},s.a.createElement("option",{value:"heat"},"sort by time in column"),s.a.createElement("option",{value:"last_name"},"sort by last name"),s.a.createElement("option",{value:"first_name"},"sort by first name")),s.a.createElement("i",{className:"fas fa-caret-down"})))),s.a.createElement("div",{className:"columns"},this.props.all_leads_data&&[s.a.createElement("div",{className:"droppable-column",key:"new"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-star-of-life"}),s.a.createElement("span",null,"new leads")),s.a.createElement("div",null,s.a.createElement(Ve.c,{className:"droppable-column",droppableId:"new_leads",type:"LEAD"},function(t,a){return s.a.createElement("div",{ref:t.innerRef,style:Ze(a.isDraggingOver)},e.new_leads.map(function(e,t){return s.a.createElement(Ve.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Qe(e,a.isDragging,t.draggableProps.style)}),e.first_name+" "+e.last_name)})}),t.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"scheduled"},s.a.createElement("h3",null,s.a.createElement("i",{className:"far fa-calendar-alt"}),s.a.createElement("span",null,"estimate scheduled")),s.a.createElement("div",null,s.a.createElement(Ve.c,{className:"droppable-column",droppableId:"scheduled_leads",type:"LEAD"},function(t,a){return s.a.createElement("div",{ref:t.innerRef,style:Ze(a.isDraggingOver)},e.scheduled_leads.map(function(e,t){return s.a.createElement(Ve.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Qe(e,a.isDragging,t.draggableProps.style)}),e.first_name+" "+e.last_name)})}),t.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"pending"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-clock"}),s.a.createElement("span",null,"estimate pending")),s.a.createElement("div",null,s.a.createElement(Ve.c,{className:"droppable-column",droppableId:"pending_leads",type:"LEAD"},function(t,a){return s.a.createElement("div",{ref:t.innerRef,style:Ze(a.isDraggingOver)},e.pending_leads.map(function(e,t){return s.a.createElement(Ve.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Qe(e,a.isDragging,t.draggableProps.style)}),e.first_name+" "+e.last_name)})}),t.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"estimate"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-clipboard"}),s.a.createElement("span",null,"estimate sent")),s.a.createElement("div",null,s.a.createElement(Ve.c,{className:"droppable-column",droppableId:"estimate_leads",type:"LEAD"},function(t,a){return s.a.createElement("div",{ref:t.innerRef,style:Ze(a.isDraggingOver)},e.estimate_leads.map(function(e,t){return s.a.createElement(Ve.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Qe(e,a.isDragging,t.draggableProps.style)}),e.first_name+" "+e.last_name)})}),t.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"approved"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-user-check"}),s.a.createElement("span",null,"estimate approved")),s.a.createElement("div",null,s.a.createElement(Ve.c,{className:"droppable-column",droppableId:"approved_leads",type:"LEAD"},function(t,a){return s.a.createElement("div",{ref:t.innerRef,style:Ze(a.isDraggingOver)},e.approved_leads.map(function(e,t){return s.a.createElement(Ve.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Qe(e,a.isDragging,t.draggableProps.style)}),e.first_name+" "+e.last_name)})}),t.placeholder)}))),s.a.createElement("div",{className:"droppable-column",key:"rejected"},s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-user-times"}),s.a.createElement("span",null,"estimate rejected")),s.a.createElement("div",null,s.a.createElement(Ve.c,{className:"droppable-column",droppableId:"rejected_leads",type:"LEAD"},function(t,a){return s.a.createElement("div",{ref:t.innerRef,style:Ze(a.isDraggingOver)},e.rejected_leads.map(function(e,t){return s.a.createElement(Ve.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return s.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Qe(e,a.isDragging,t.draggableProps.style)}),e.first_name+" "+e.last_name)})}),t.placeholder)})))])))}}]),t}(s.a.Component),at=Object(o.b)(function(e){return{all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({updateLeadsData:M},e)})(tt),nt=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e={new_leads:[],pending_leads:[],scheduled_leads:[],estimate_leads:[],approved_leads:[],rejected_leads:[]},t=0;for(var a in this.props.all_leads_data){switch(this.props.all_leads_data[a].status){case"new":e.new_leads.push(Object(d.a)({},this.props.all_leads_data[a]));break;case"pending":e.pending_leads.push(Object(d.a)({},this.props.all_leads_data[a]));break;case"scheduled":e.scheduled_leads.push(Object(d.a)({},this.props.all_leads_data[a]));break;case"estimate":e.estimate_leads.push(Object(d.a)({},this.props.all_leads_data[a]));break;case"approved":e.approved_leads.push(Object(d.a)({},this.props.all_leads_data[a]));break;case"rejected":e.rejected_leads.push(Object(d.a)({},this.props.all_leads_data[a]));break;default:e.other_leads.push(Object(d.a)({},this.props.all_leads_data[a]))}t++}Math.max(e.new_leads.length,e.pending_leads.length,e.scheduled_leads.length,e.estimate_leads.length,e.approved_leads.length,e.rejected_leads.length);var n={new_leads:{range:20},scheduled_leads:{range:30},pending_leads:{range:4,flip:!0},estimate_leads:{range:5},approved_leads:{range:15},rejected_leads:{range:4,flip:!0}},r={};for(var l in e)r[l]=s.a.createElement("div",{className:"chart-node",key:l},s.a.createElement("div",{className:n[l].flip&&e[l].length>n[l].range?"l-0":"l-10",style:{transform:"scaleY("+e[l].length/t*5+") scaleX(4) rotate(45deg)"}}),n[l].flip&&e[l].length>n[l].range&&s.a.createElement("i",{className:"fas fa-exclamation-triangle"}));return s.a.createElement("div",{className:"lead-chart"},s.a.createElement("div",{className:"bar"}),s.a.createElement("div",{className:"chart"},r.new_leads,r.scheduled_leads,r.pending_leads,r.estimate_leads,r.approved_leads,r.rejected_leads))}}]),t}(s.a.Component),st=Object(o.b)(function(e){return{all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({updateLeadsData:M},e)})(nt),rt=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={loaded:!1},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.props.updateLeadsData(we),e.setState({loaded:!0})},1e3)}},{key:"render",value:function(){return s.a.createElement("section",{id:"page-leads",className:this.state.loaded?"loaded":"loading"},s.a.createElement("div",{className:"load-background"}),s.a.createElement("div",{className:"card f-nogrow"},s.a.createElement(st,null)),s.a.createElement("div",{className:"card d1 f-grow"},s.a.createElement(at,null)))}}]),t}(s.a.Component),lt=Object(o.b)(function(e){return{all_leads_data:e.state.all_leads_data}},function(e){return Object(c.b)({updateLeadsData:M},e)})(rt),ot=m[window.loc].MonthNames,ct=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={loaded:!1,selected_job:"none"},a.selectJob=function(e){var t=e.currentTarget.dataset.id;e.stopPropagation(),a.props.selectJob(a.props.id,t)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"getJobData",value:function(){var e={Unscheduled:[]},t={};return this.props.project_data.jobs.map(function(a,n){var s=Object(d.a)({},ye[a]);if(t[s.id]=s,!s.start_date)return e.Unscheduled.push(s),!0;var r=s.start_date.getMonth();return e[r]||(e[r]=[]),e[r].push(s),!0}),this.props.updateJobData(t),{jobs_by_id:t,months:e}}},{key:"componentDidMount",value:function(){var e=this.getJobData();this.setState({jobs_by_id:e.jobs_by_id,months:e.months,selected_job:this.props.selected_job})}},{key:"componentDidUpdate",value:function(e){if(this.props.selected_job!==e.selected_job&&this.setState({selected_job:this.props.selected_job}),this.props.project_data.id!==e.project_data.id){var t=this.getJobData();this.setState({jobs_by_id:t.jobs_by_id,months:t.months,selected_job:this.props.selected_job})}}},{key:"render",value:function(){var e=[],t=new Date;if(this.state.months){var a=Object.keys(this.state.months),n=this.state.months,r=!1;a.sort(function(e,t){return n[e]-n[t]});for(var l=0;l<a.length;l++){var o=this.state.months[a[l]];o.sort(function(e,t){return e.start_date-t.start_date});for(var c=0;c<o.length;c++){var i=o[c],d="";!r&&i.start_date&&i.start_date>=new Date(t.getFullYear(),t.getMonth(),t.getDate())&&(r=!0,d=" after-today"),e.push(s.a.createElement("li",{key:i.id,"data-id":i.id,className:(100===i.progress?"complete":i.progress>0?"progress":"")+" "+a[l]+(i.start_date&&i.start_date.toDateString()===(new Date).toDateString()?" today":"")+d+(c===o.length-1?" last-of-month":"")+(i.id===this.state.selected_job?" selected":" not-selected")+(c<o.length-1&&o[c+1].id===this.state.selected_job?" job-before-selected":""),onClick:this.selectJob},0===c?s.a.createElement("h3",null,ot[a[l]]||a[l]):[],s.a.createElement("span",{className:"h-line"}),s.a.createElement("span",{className:"selected-arrow"}),s.a.createElement("span",{className:"date"},i.start_date?i.start_date.getDate():""),s.a.createElement("div",{className:"job-box"},s.a.createElement("h4",null,s.a.createElement("i",{className:i.icon}),s.a.createElement("span",{className:"job-name"},i.name))),s.a.createElement("span",{className:"status"},s.a.createElement("span",{className:"progress-bar",style:{transform:"scaleX("+i.progress/100+")"}}),s.a.createElement("span",{className:"status-text"},100===i.progress?s.a.createElement("i",{className:"fas fa-check"}):0===i.progress?"":i.progress+"%"))))}}}return s.a.createElement("article",{className:"project"+(this.props.last_selected?" last_selected":"")},s.a.createElement("header",null,s.a.createElement("h2",null,this.props.project_data.name)),s.a.createElement("div",{className:"header-color",style:{backgroundColor:this.props.project_data.color||"black"}}),s.a.createElement("div",{className:"timeline"},e))}}]),t}(s.a.Component),it=Object(o.b)(function(e){return{selected_job:e.state.selected_job,selected_project:e.state.selected_project}},function(e){return Object(c.b)({selectJob:S,updateJobData:w,editJob:N},e)})(ct),dt=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).selectProject=function(e){return function(t){a.props.selectJob(e,null)}},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=[];if(this.props.all_project_data){var t=0;for(var a in this.props.all_project_data)e.push(s.a.createElement("div",{key:"project-"+this.props.all_project_data[a].id,className:"card"+(t<5?" d"+(t+1):" d5"),onClick:this.selectProject(this.props.all_project_data[a].id)},s.a.createElement(it,{id:this.props.all_project_data[a].id,project_data:this.props.all_project_data[a]}))),t++}return s.a.createElement("div",null,e)}}]),t}(s.a.Component),mt=Object(o.b)(function(e){return{all_project_data:e.state.all_project_data}},function(e){return Object(c.b)({selectJob:S},e)})(dt),ut=a(37),pt=a.n(ut),ht=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={value:pt.a.createEmptyValue()},a.onChange=function(e){a.setState({value:e}),a.props.onChange&&a.props.onChange(e.toString("html"))},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return s.a.createElement(pt.a,{className:"editor",value:this.state.value,onChange:this.onChange})}}]),t}(s.a.Component),_t=function(e){return s.a.createElement("section",{id:"modal-warning"},s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement("i",{className:"fas fa-exclamation-triangle"}),s.a.createElement("span",null,e.title||"Warning")),s.a.createElement("button",{onClick:function(){window.closeModal()},className:"icon-button"},s.a.createElement("i",{className:"fas fa-times"}))),s.a.createElement("div",{className:"message"},e.message),s.a.createElement("footer",null,s.a.createElement("button",{onClick:function(){e.handleConfirm(),window.closeModal()}},s.a.createElement("i",{className:"fas fa-check"}),s.a.createElement("span",null,e.confirm)),s.a.createElement("button",{onClick:function(){e.handleCancel(),window.closeModal()}},s.a.createElement("i",{className:"fas fa-times"}),s.a.createElement("span",null,e.cancel))))},bt=m[window.loc].DeleteAllTasksWarning,ft=m[window.loc].MarkAllTasksCompleteWarning,gt=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={loaded:!1,add_task_text:"",temp_edit_text:"",currently_editing:0,all_complete:!1,selected_job:null},a.handleTaskClick=function(e){return function(t){if(a.state.currently_editing!==e){var n=Object(d.a)({},a.props.all_task_data[e]);n.completed=!n.completed,a.props.editTask(e,Object(d.a)({},n))}}},a.handleCompleteAll=function(){var e=a.props.all_job_data[a.state.selected_job].tasks;window.openModal(s.a.createElement(_t,{message:s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("span",null,ft.message_1),s.a.createElement("strong",null,a.props.all_job_data[a.state.selected_job].name),s.a.createElement("span",null,ft.message_2)),s.a.createElement("p",null,ft.message_3)),cancel:ft.cancel,confirm:ft.confirm,handleConfirm:function(){for(var t={},n=0;n<e.length;n++){var s=a.props.all_task_data[e[n]];s.completed=!0,t[s.id]=s}a.props.updateTaskData(t)},handleCancel:function(){}}))},a.handleIncompleteAll=function(){for(var e={},t=a.props.all_job_data[a.state.selected_job].tasks,n=0;n<t.length;n++){var s=a.props.all_task_data[t[n]];s.completed=!1,e[s.id]=s}a.props.updateTaskData(e)},a.handleDeleteAll=function(){var e=a.props.all_job_data[a.state.selected_job].tasks;window.openModal(s.a.createElement(_t,{message:s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("span",null,bt.message_1),s.a.createElement("strong",null,a.props.all_job_data[a.state.selected_job].name),s.a.createElement("span",null,bt.message_2)),s.a.createElement("p",null,bt.message_3),s.a.createElement("p",null,bt.message_4)),cancel:bt.cancel,confirm:bt.confirm,handleConfirm:function(){var t=Object(Ke.a)(e);a.props.deleteTasks(t)},handleCancel:function(){}}))},a.handleDelete=function(e){return function(t){t.preventDefault(),t.stopPropagation(),a.props.deleteTasks([e])}},a.handleAddKeyPress=function(e){"Enter"===e.key&&a.handleAddTask()},a.handleAddChange=function(e){a.setState({add_task_text:e.currentTarget.value})},a.handleAddTask=function(e){if(a.state.add_task_text){var t="task_"+Math.random(),n={id:t,name:a.state.add_task_text,completed:!1};a.props.addTask(t,n,a.state.selected_job),a.setState({add_task_text:""})}},a.handleEdit=function(e,t){return function(n){n.preventDefault(),n.stopPropagation(),a.setState({currently_editing:e,temp_edit_text:t})}},a.handleEditKeyPress=function(e){"Enter"===e.key&&a.handleConfirmEdit(e)},a.handleEditChange=function(e){a.setState({temp_edit_text:e.currentTarget.value})},a.handleCancelEdit=function(){return function(e){e.preventDefault(),e.stopPropagation(),a.setState({currently_editing:null})}},a.handleConfirmEdit=function(){return function(e){e.preventDefault(),e.stopPropagation();var t=a.state.currently_editing;a.props.editTask(t,{name:a.state.temp_edit_text}),a.setState({currently_editing:null})}},a.handleTaskDragStart=function(e){a.dragged_id=e.target.dataset.id,a.dragged_index=e.target.dataset.index},a.handleTaskDragEnd=function(e){window.setStyle(""),a.drop_id&&a.handleTaskDrop(e)},a.handleTaskDragOver=function(e){e.preventDefault(),e.currentTarget.dataset.id!==a.drop_id&&(parseInt(e.currentTarget.dataset.index,10)>=parseInt(a.dragged_index,10)?window.setStyle('\n          [data-id="'+e.currentTarget.dataset.id+'"]:after {\n            bottom: 0 !important;\n            opacity: 1 !important;\n          }\n        '):window.setStyle('\n          [data-id="'+e.currentTarget.dataset.id+'"]:after {\n            top: 0 !important;\n            opacity: 1 !important;\n          }\n        '),a.drop_id=e.currentTarget.dataset.id,a.drop_index=e.currentTarget.dataset.index)},a.handleTaskDragLeave=function(e){e.preventDefault()},a.handleTaskDrop=function(e){e.preventDefault();var t=Object(Ke.a)(a.props.all_job_data[a.state.selected_job].tasks),n=a.dragged_index,s=a.drop_index;a.drop_id=null,window.setStyle(""),Je(t,parseInt(n,10),parseInt(s,10)),a.props.editJob(a.state.selected_job,{tasks:t})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"callAPI",value:function(){var e=this;this.temp_api_call=setTimeout(function(){var t={};for(var a in ke)for(var n=0;n<e.props.all_job_data[e.props.selected_job].tasks.length;n++)e.props.all_job_data[e.props.selected_job].tasks[n]===ke[a].id&&(e.props.all_task_data[ke[a].id]||(t[ke[a].id]=Object(d.a)({},ke[a])));e.props.updateTaskData(t),e.setState({loaded:!0,selected_job:e.props.selected_job})},50)}},{key:"componentDidMount",value:function(){this.props.all_job_data[this.props.selected_job]&&this.callAPI()}},{key:"componentDidUpdate",value:function(e){this.props.selected_job&&this.props.selected_job!==e.selected_job&&(this.callAPI(),this.setState({loaded:!1}))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_api_call)}},{key:"checkIfAllComplete",value:function(e){for(var t=!0,a=0;a<e.length;a++){if(!this.props.all_task_data[e[a]].completed){t=!1;break}}return t&&!!e.length}},{key:"updateTasks",value:function(e){for(var t,a=0,n={},s=0;s<e.length;s++)e[s].completed&&a++,n[e[s].id]=e[s];t=Math.round(a/e.length*100)||0,this.props.updateTaskData(n),this.setState({tasks:e,all_complete:100===t})}},{key:"changeMode",value:function(e){this.setState({mode:e})}},{key:"getMenu",value:function(){var e=this,t=this.state.selected_job&&this.state.loaded?this.props.all_job_data[this.state.selected_job].tasks:[];return s.a.createElement("div",{className:"menu"},s.a.createElement("div",null,s.a.createElement("div",{className:"button-group"},s.a.createElement("input",{type:"text",placeholder:"task name",value:this.state.add_task_text,onChange:this.handleAddChange,onKeyPress:this.handleAddKeyPress}),s.a.createElement("button",{onClick:function(t){e.handleAddTask(t)}},s.a.createElement("i",{className:"fas fa-plus"}),s.a.createElement("span",null,"add task")))),s.a.createElement("div",null,this.checkIfAllComplete(t)&&t.length?s.a.createElement("button",{onClick:function(t){e.handleIncompleteAll(t)}},s.a.createElement("i",{className:"far fa-circle"}),s.a.createElement("span",null,"mark all as incomplete")):s.a.createElement("button",{onClick:function(t){e.handleCompleteAll(t)},disabled:!t.length},s.a.createElement("i",{className:"fas fa-check-circle"}),s.a.createElement("span",null,"mark all as complete")),s.a.createElement("button",{onClick:function(t){e.handleDeleteAll()},disabled:!t.length},s.a.createElement("i",{className:"fas fa-trash"}),s.a.createElement("span",null,"delete all"))))}},{key:"render",value:function(){var e=[];if(this.state.selected_job){var t=this.props.all_job_data[this.state.selected_job].tasks;if(t&&this.state.loaded)for(var a=Object(Ke.a)(t),n=0;n<a.length;n++){var r=this.props.all_task_data[a[n]];r&&e.push(s.a.createElement("li",{key:this.state.selected_job+"_"+r.id,className:"task"+(r.completed?" completed":"")+(r.id===this.state.currently_editing?" currently-editing":"")+(this.state.drop_id===r.id?" drop-"+this.state.drop_location:""),"data-id":r.id,"data-index":n,onClick:this.handleTaskClick(r.id),draggable:!0,onDrag:this.handleTaskDragStart,onDragEnd:this.handleTaskDragEnd,onDragOver:this.handleTaskDragOver,onDragLeave:this.handleTaskDragLeave,onDrop:this.handleTaskDrop},s.a.createElement("h3",null,s.a.createElement("span",{className:"icon-holder"},s.a.createElement("i",{className:"fas fa-check-circle check"}),s.a.createElement("i",{className:"far fa-circle"})),this.state.currently_editing===r.id?s.a.createElement("input",{className:"",defaultValue:r.name,onChange:this.handleEditChange,onKeyPress:this.handleEditKeyPress}):s.a.createElement("span",{className:"task-name"},r.name)),this.state.currently_editing===r.id?s.a.createElement("div",null,s.a.createElement("button",{className:"icon-button",onClick:this.handleConfirmEdit(r.id),title:"Apply"},s.a.createElement("i",{className:"fas fa-check"})),s.a.createElement("button",{className:"icon-button",onClick:this.handleCancelEdit(r.id),title:"Cancel"},s.a.createElement("i",{className:"fas fa-times"}))):s.a.createElement("div",null,s.a.createElement("button",{className:"icon-button",onClick:this.handleEdit(r.id,r.name),title:"Edit Task"},s.a.createElement("i",{className:"fas fa-edit"})),s.a.createElement("button",{className:"icon-button",onClick:this.handleDelete(r.id),title:"Delete Task"},s.a.createElement("i",{className:"fas fa-trash"})))))}}return s.a.createElement("div",{className:"task-editor"+(this.state.loaded?"":" loading")},this.getMenu(),s.a.createElement("div",{className:"task-list"},s.a.createElement("div",{className:"load-background"}),s.a.createElement("ul",null,e)))}}]),t}(s.a.Component),jt=Object(o.b)(function(e){return{all_task_data:e.state.all_task_data,all_job_data:e.state.all_job_data}},function(e){return Object(c.b)({updateTaskData:T,editJob:N,completeTask:I,deleteTasks:x,editTask:P,addTask:A},e)})(gt),Et=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(j.a)(t).call(this,e))).updateJobProgress=function(e,t,n){ye[e].progress=n;for(var s,r=[],l=0;l<t.length;l++)s=t[l],r.push(s.id),ke[s.id]=Object(d.a)({},s);ye[e].tasks=r,a.props.updateJob(e,Object(d.a)({},ye[e]))},a.state={loaded:!1,show_content:!0,detail_mode:"schedule",job_data:null},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"callAPI",value:function(e){var t=this;this.props.selected_job&&(this.temp_api_call=setTimeout(function(){t.setState({loaded:!0}),e&&t.setState({detail_mode:ye[t.props.selected_job].start_date?"task":"schedule"}),t.state.show_content?t.setState({job_data:ye[t.props.selected_job]}):t.setState({temp_job_data:ye[t.props.selected_job]})},30))}},{key:"componentDidMount",value:function(){this.callAPI(!0)}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.selected_job!==e.selected_job&&(this.setState({loaded:!1,show_content:!1}),this.callAPI(),this.show_content_animation=setTimeout(function(){t.setState({show_content:!0}),t.state.loaded&&t.setState({job_data:t.state.temp_job_data,temp_job_data:null})},500))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_api_call),window.clearTimeout(this.show_content_animation)}},{key:"changeMode",value:function(e){this.setState({detail_mode:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"job-detail-panel"+(this.state.loaded&&this.state.show_content?" loaded":"")},this.props.selected_job?this.state.job_data&&s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("header",null,s.a.createElement("h2",null,this.state.job_data.name),s.a.createElement("div",null,s.a.createElement("button",{className:"schedule"===this.state.detail_mode?"selected":"",onClick:function(){e.changeMode("schedule")}},"schedule job"),s.a.createElement("button",{className:"task"===this.state.detail_mode?"selected":"",onClick:function(){e.changeMode("task")}},"manage tasks"),s.a.createElement("button",{className:"note"===this.state.detail_mode?"selected":"",onClick:function(){e.changeMode("note")}},"take notes"))),s.a.createElement("div",{className:"tab-panel"},s.a.createElement("div",{className:"note"===this.state.detail_mode?"show":""},"note"===this.state.detail_mode&&s.a.createElement(ht,{value:"These are some notes!",onChange:function(e){console.log(e)}})),s.a.createElement("div",{className:"task"===this.state.detail_mode?"show":""},"task"===this.state.detail_mode?s.a.createElement(jt,{selected_job:this.state.job_data.id,default_trade:this.state.job_data.default_trade}):[]),s.a.createElement("div",{className:"schedule"===this.state.detail_mode?"show":""},"schedule"===this.state.detail_mode&&s.a.createElement(Ye,{selected_job:this.state.job_data.id,selected_job_data:this.state.job_data,default_trade:this.state.job_data.default_trade})))),s.a.createElement("span",{className:"no-task-selected load-screen"},s.a.createElement("h3",null,"loading..."))):s.a.createElement("div",{className:"no-task-selected"},s.a.createElement("i",{className:"fas fa-hand-point-up"}),s.a.createElement("h3",null,"select a job")))}}]),t}(s.a.Component),vt=Object(o.b)(function(e){return{selected_job:e.state.selected_job}})(Et),yt=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(j.a)(t).call(this,e))).handleCloseButton=function(e){a.props.selectJob(null,null)},a.state={loaded:!1,last_selected_project:a.props.selected_project},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.props.selected_project!==e.selected_project&&this.selectProject(this.props.selected_project,this.props.selected_job)}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.transition_finish),window.clearTimeout(this.transition)}},{key:"selectProject",value:function(e,t){var a=this;this.transition=setTimeout(function(){a.setState({transition_last_selected_project:!1})},50),this.transition_finish=setTimeout(function(){a.setState({last_selected_project:a.props.selected_project})},1500),this.setState({transition_last_selected_project:!0})}},{key:"render",value:function(){var e;return this.props.all_project_data&&this.props.all_project_data[this.props.selected_project]&&(e=this.props.all_project_data[this.props.selected_project].color||"black"),s.a.createElement("div",{id:"project-details",className:this.props.selected_project&&this.props.all_project_data?" show":""},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"header-color",style:{backgroundColor:e}}),s.a.createElement("div",{className:"button-menu"},s.a.createElement("button",{onClick:this.handleCloseButton,className:"icon-button"},s.a.createElement("i",{className:"fas fa-times"}))),s.a.createElement("div",{className:"selected_project"+(this.state.transition_last_selected_project?" transition_last_selected":"")},this.state.last_selected_project&&s.a.createElement(it,{id:this.state.last_selected_project,last_selected:!0,project_data:this.props.all_project_data[this.state.last_selected_project]}),this.props.selected_project&&s.a.createElement(it,{id:this.props.selected_project,project_data:this.props.all_project_data[this.props.selected_project]})),s.a.createElement(vt,null)))}}]),t}(s.a.Component),kt=Object(o.b)(function(e){return{selected_job:e.state.selected_job,selected_project:e.state.selected_project,all_project_data:e.state.all_project_data}},function(e){return Object(c.b)({selectJob:S},e)})(yt),Ot=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(j.a)(t).call(this,e))).state={loaded:!1},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.temp_load_data=setTimeout(function(){for(var t,a={},n=e.props.location.pathname.split("/"),s=0;s<Me.length;s++)a[Me[s].id]=Me[s],Le(Me[s].name)===n[2]&&(t=Me[s].id);e.props.updateAllProjectData(a),n[2]&&e.props.selectJob(t,null),setTimeout(function(){e.setState({loaded:!0})},1)},2e3)}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.temp_load_data)}},{key:"componentDidUpdate",value:function(e){this.props.selected_project!==e.selected_project&&this.props.history.push("/projects"+(this.props.selected_project?"/"+Le(this.props.all_project_data[this.props.selected_project].name):""))}},{key:"render",value:function(){return s.a.createElement("section",{id:"page-projects",className:"projects "+(this.state.loaded?"loaded":"loading")},s.a.createElement("div",{className:"load-background"}),s.a.createElement(L.a,{path:"/projects/:p",component:kt}),s.a.createElement(L.a,{path:"/projects",component:mt}))}}]),t}(s.a.Component),Dt=Object(o.b)(function(e){return{selected_project:e.state.selected_project,all_project_data:e.state.all_project_data}},function(e){return Object(c.b)({updateAllProjectData:C,selectJob:S},e)})(Ot),Mt=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return s.a.createElement("section",{id:"page-404"},s.a.createElement("div",null,s.a.createElement("h1",null,"404"),s.a.createElement("h2",null,"Your request could not be found.")))}}]),t}(s.a.Component),Ct=window.Msal,wt=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(j.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.openModal=function(t){e.setState({modal:t}),setTimeout(function(){e.setState({modal_state:"show"})},50)},window.closeModal=function(){e.setState({modal_state:""}),setTimeout(function(){e.setState({modal:null})},750)};var t=document.createElement("style");t.type="text/css",document.querySelector("head").appendChild(t),window.setStyle=function(e){t.innerHTML=e},window.clientApplication||(window.clientApplication=new Ct.UserAgentApplication(G.clientID,G.authority,function(e,t,a,n){t?console.log(t):console.log(a+":"+e)}))}},{key:"render",value:function(){var e=this.props.current_user,t=e&&(e.config.homepage||e.company_config.homepage)||"/dashboard";new URLSearchParams(window.location.search).get("access_token");return s.a.createElement(U.a,null,s.a.createElement("div",{id:"app"},this.state.modal&&s.a.createElement("div",{id:"modal-container",className:this.state.modal_state},this.state.modal),s.a.createElement(L.a,{component:z}),s.a.createElement("main",null,s.a.createElement(J.a,null,s.a.createElement(L.a,{exact:!0,path:"/ah-geez-404",component:Mt,key:"404"}),e?e.company_setup&&e.user_setup?[s.a.createElement(R.a,{exact:!0,from:"/signin",to:t,key:"to-home-from-signin"}),s.a.createElement(R.a,{exact:!0,from:"/",to:t,key:"to-home"}),s.a.createElement(L.a,{exact:!0,path:"/dashboard",component:se,key:"dashboard"}),s.a.createElement(L.a,{path:"/projects",component:Dt,key:"projects"}),s.a.createElement(L.a,{exact:!0,path:"/schedule",component:ze,key:"schedule"}),s.a.createElement(L.a,{path:"/leads",component:lt,key:"leads"})]:[s.a.createElement(L.a,{exact:!0,path:"/setup",component:ee,key:"setup"}),s.a.createElement(R.a,{to:"/setup",key:"to-setup"})]:[s.a.createElement(L.a,{exact:!0,path:"/",component:X,key:"sign-in"}),s.a.createElement(R.a,{to:"/",key:"to-home"})],s.a.createElement(L.a,{component:Mt}),s.a.createElement(R.a,{to:"/ah-geez-404",key:"to-404"}))),s.a.createElement(K,null)))}}]),t}(n.Component),Nt=Object(o.b)(function(e){return{current_user:e.state.current_user}},function(e){return Object(c.b)({signOutUser:k},e)})(wt);l.a.render(s.a.createElement(o.a,{store:_},s.a.createElement(Nt,null)),document.getElementById("root"))},57:function(e,t,a){e.exports=a.p+"static/media/logo.694152e3.png"},62:function(e,t,a){e.exports=a(126)},72:function(e,t,a){}},[[62,2,1]]]);
//# sourceMappingURL=main.a3833d95.chunk.js.map