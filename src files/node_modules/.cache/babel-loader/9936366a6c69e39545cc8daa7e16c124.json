{"ast":null,"code":"import _objectSpread from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/matt/Work/Projul/projul-prototype/src/components/user-heatmap.js\";\nimport React from 'react';\nimport { WEEKEND, DAILY_WORK_HOURS } from '../config/account-settings';\nimport { DaysInMonth, SameDay } from '../utilities/date';\n\nvar Scheduler =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Scheduler, _React$Component);\n\n  function Scheduler() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Scheduler);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Scheduler)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {};\n\n    _this.calcDays = function () {\n      var days = [];\n      var today = new Date();\n      var past_number_chart = [3, 8, 8, 0, 7, 1, 7, 7, 5, 6, 6, 5, 5, 6, 7, 8, 8, 8, 8];\n      var number_chart = [0, 0, 0, 0, 0, 1, 1, 2, 2, 3, 4, 5, 5, 6, 7, 8, 8, 8, 8];\n      var future_number_chart = [0, 0, 0, 0, 0, 1, 1, 2, 0, 3, 0, 5, 0, 0, 0, 0, 0, 0, 8];\n\n      for (var d = 0; d < DaysInMonth(_this.props.month, _this.props.year); d++) {\n        if (d < today.getDate() && _this.props.month / 20 + _this.props.year === today.getMonth() / 20 + today.getFullYear() || _this.props.month / 20 + _this.props.year < today.getMonth() / 20 + today.getFullYear()) {\n          days.push(Math.min(past_number_chart[Math.floor(Math.random() * past_number_chart.length)], DAILY_WORK_HOURS));\n        } else if (d > today.getDate() + 7 && _this.props.month / 20 + _this.props.year === today.getMonth() / 20 + today.getFullYear() || _this.props.month / 20 + _this.props.year > today.getMonth() / 20 + today.getFullYear()) {\n          days.push(Math.min(future_number_chart[Math.floor(Math.random() * future_number_chart.length)], DAILY_WORK_HOURS));\n        } else {\n          days.push(Math.min(number_chart[Math.floor(Math.random() * number_chart.length)], DAILY_WORK_HOURS));\n        }\n      }\n\n      return days;\n    };\n\n    _this.generateTasks = function () {\n      var tasks_by_day = [];\n      var today = new Date();\n      var next_week = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 7);\n      var past_number_chart = [3, 8, 8, 0, 7, 1, 7, 7, 5, 6, 6, 5, 5, 6, 7, 8, 8, 8, 8];\n      var number_chart = [0, 0, 0, 0, 0, 1, 1, 2, 2, 3, 4, 5, 5, 6, 7, 8, 8, 8, 8];\n      var future_number_chart = [0, 0, 0, 0, 0, 1, 1, 2, 0, 3, 0, 5, 0, 0, 0, 0, 0, 0, 8];\n\n      for (var d = 0; d < DaysInMonth(_this.props.month, _this.props.year); d++) {\n        var day_tasks = [];\n        var current_date = new Date(_this.props.year, _this.props.month, d + 1);\n\n        if (_this.props.task.start_date && SameDay(_this.props.task.start_date, current_date) && _this.props.task.assigned_user === _this.props.user.user_id) {\n          day_tasks.push(_this.generateTask(_objectSpread({}, _this.props.task)));\n        } // RANDOMLY ASSIGN A NUMBER OF HOURS BASED ON IF THE CURRENT_DATE IS BEFORE TODAY, WITHIN A WEEK OR BEYOND A WEEK\n\n\n        var number_of_hours = current_date < today ? Math.min(past_number_chart[Math.floor(Math.random() * past_number_chart.length)], DAILY_WORK_HOURS) : current_date > next_week ? Math.min(future_number_chart[Math.floor(Math.random() * future_number_chart.length)], DAILY_WORK_HOURS) : Math.min(number_chart[Math.floor(Math.random() * number_chart.length)], DAILY_WORK_HOURS);\n        var number_of_tasks = Math.ceil(Math.random() * number_of_hours);\n\n        for (var t = 0; t < number_of_tasks; t++) {\n          day_tasks.push({\n            start_date: new Date(_this.props.year, _this.props.month, d + 1, 6 + t * Math.round(number_of_hours / number_of_tasks)),\n            end_date: new Date(_this.props.year, _this.props.month, d + 1, 6 + (t + 1) * Math.round(number_of_hours / number_of_tasks)),\n            assigned_user: _this.props.user.user_id,\n            name: \"Task\",\n            icon: \"fas fa-hammer\",\n            progress: 0\n          });\n        }\n\n        tasks_by_day.push(day_tasks);\n      }\n\n      return tasks_by_day;\n    };\n\n    _this.SelectDate = function (e) {\n      // let id=parseInt(e.currentTarget.dataset.id,10);\n      console.log(e.target.value);\n\n      _this.setState({\n        sort: e.target.value\n      });\n    };\n\n    _this.HandleDayClick = function (e) {\n      var id = parseInt(e.currentTarget.dataset.id, 10);\n\n      _this.props.HandleDayClick(id);\n    };\n\n    return _this;\n  }\n\n  _createClass(Scheduler, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var tasks_by_day = this.generateTasks();\n      setTimeout(function () {\n        _this2.setState({\n          tasks_by_day: tasks_by_day\n        });\n      }, 100);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.month !== prevProps.month) {\n        this.setState({\n          tasks_by_day: this.generateTasks()\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var cells = [];\n      var day_cells = [];\n      var classes = [\"tasks-0\", \"tasks-1\", \"tasks-2\", \"tasks-3\", \"tasks-4\", \"tasks-5\", \"tasks-6\", \"tasks-7\", \"tasks-8\"];\n\n      if (this.state.tasks_by_day && this.state.tasks_by_day.length === DaysInMonth(this.props.month, this.props.year)) {\n        for (var i = 0; i < DaysInMonth(this.props.month, this.props.year); i++) {\n          var current_date = new Date(this.props.year, this.props.month, i + 1);\n          var value = this.state.tasks_by_day[i].length;\n          var weekend = \"\";\n\n          for (var w = 0; w < WEEKEND.length; w++) {\n            if (current_date.getDay() === WEEKEND[w]) {\n              value = 0;\n              weekend = \" weekend\";\n            }\n          }\n\n          cells.push(React.createElement(\"li\", {\n            key: this.props.user.user_id + \"_\" + i,\n            \"data-id\": i + 1,\n            className: \"cell \" + classes[Math.min(Math.round(value * 8 / DAILY_WORK_HOURS), classes.length - 1)] + weekend + (current_date.toDateString() === new Date().toDateString() || this.props.month / 20 + this.props.year > new Date().getMonth() / 20 + new Date().getFullYear() && i === 0 ? \" today\" : \"\") + (this.props.task.start_date && SameDay(this.props.task.start_date, current_date) && this.props.task.assigned_user === this.props.user.user_id ? \" assigned\" : \"\"),\n            onClick: this.HandleDayClick,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123\n            },\n            __self: this\n          }, value ? value + \" hrs\" : \"\"));\n        }\n\n        if (this.props.selected_day) {\n          for (var h = 1; h <= 24; h++) {\n            // const current_time = new Date(this.props.year, this.props.month, this.props.selected_day, h);\n            day_cells.push(React.createElement(\"li\", {\n              className: \"day-cell\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 140\n              },\n              __self: this\n            }));\n          }\n\n          for (var t = 0; t < this.state.tasks_by_day[this.props.selected_day - 1].length; t++) {\n            var task = this.state.tasks_by_day[this.props.selected_day - 1][t];\n            var task_duration = (task.end_date - task.start_date) / 1000 / 60 / (24 * 60);\n            console.log(new Date(this.props.year, this.props.month, this.props.selected_day));\n            console.log((task.start_date - new Date(this.props.year, this.props.month, this.props.selected_day)) / 1000 / 60 / (24 * 60));\n            var task_start = (task.start_date - new Date(this.props.year, this.props.month, this.props.selected_day) / 1000) / 60 / (24 * 60);\n            day_cells.push(React.createElement(\"li\", {\n              className: \"task\",\n              style: {\n                left: task_start + \"%\",\n                width: task_duration + \"%\"\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 153\n              },\n              __self: this\n            }, React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 159\n              },\n              __self: this\n            }, React.createElement(\"i\", {\n              className: task.icon,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 159\n              },\n              __self: this\n            }), task.name)));\n          }\n        }\n      }\n\n      return React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"day-schedule\" + (this.props.selected_day ? \" show\" : \"\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, day_cells)), cells);\n    }\n  }]);\n\n  return Scheduler;\n}(React.Component);\n\nexport default Scheduler;","map":{"version":3,"sources":["/Users/matt/Work/Projul/projul-prototype/src/components/user-heatmap.js"],"names":["React","WEEKEND","DAILY_WORK_HOURS","DaysInMonth","SameDay","Scheduler","state","calcDays","days","today","Date","past_number_chart","number_chart","future_number_chart","d","props","month","year","getDate","getMonth","getFullYear","push","Math","min","floor","random","length","generateTasks","tasks_by_day","next_week","day_tasks","current_date","task","start_date","assigned_user","user","user_id","generateTask","number_of_hours","number_of_tasks","ceil","t","round","end_date","name","icon","progress","SelectDate","e","console","log","target","value","setState","sort","HandleDayClick","id","parseInt","currentTarget","dataset","setTimeout","prevProps","cells","day_cells","classes","i","weekend","w","getDay","toDateString","selected_day","h","task_duration","task_start","left","width","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {WEEKEND, DAILY_WORK_HOURS} from '../config/account-settings'\nimport {DaysInMonth, SameDay} from '../utilities/date'\n\nclass Scheduler extends React.Component {\n  state = {\n\n  };\n\n  calcDays = () => {\n    const days = [];\n    const today = new Date();\n    const past_number_chart = [3,8,8,0,7,1,7,7,5,6,6,5,5,6,7,8,8,8,8];\n    const number_chart = [0,0,0,0,0,1,1,2,2,3,4,5,5,6,7,8,8,8,8];\n    const future_number_chart = [0,0,0,0,0,1,1,2,0,3,0,5,0,0,0,0,0,0,8];\n    for (var d=0; d<DaysInMonth(this.props.month, this.props.year); d++) {\n      if ((d < today.getDate() && ((this.props.month/20)+this.props.year) === ((today.getMonth()/20)+today.getFullYear())) || ((this.props.month/20)+this.props.year) < ((today.getMonth()/20)+today.getFullYear())) {\n        days.push(Math.min(past_number_chart[Math.floor(Math.random()*past_number_chart.length)],DAILY_WORK_HOURS));\n      }\n      else if ((d > today.getDate() + 7 && ((this.props.month/20)+this.props.year) === ((today.getMonth()/20)+today.getFullYear())) || ((this.props.month/20)+this.props.year) > ((today.getMonth()/20)+today.getFullYear())) {\n        days.push(Math.min(future_number_chart[Math.floor(Math.random()*future_number_chart.length)],DAILY_WORK_HOURS));\n      }\n      else {\n        days.push(Math.min(number_chart[Math.floor(Math.random()*number_chart.length)],DAILY_WORK_HOURS));\n      }\n    }\n    return days;\n  }\n\n  generateTasks = () => {\n    let tasks_by_day = [];\n\n    const today = new Date();\n    const next_week = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 7);\n    const past_number_chart = [3,8,8,0,7,1,7,7,5,6,6,5,5,6,7,8,8,8,8];\n    const number_chart = [0,0,0,0,0,1,1,2,2,3,4,5,5,6,7,8,8,8,8];\n    const future_number_chart = [0,0,0,0,0,1,1,2,0,3,0,5,0,0,0,0,0,0,8];\n\n    for (var d=0; d<DaysInMonth(this.props.month, this.props.year); d++) {\n      let day_tasks = [];\n      const current_date = new Date(this.props.year, this.props.month, (d+1));\n      if (this.props.task.start_date && SameDay(this.props.task.start_date, current_date) && this.props.task.assigned_user === this.props.user.user_id) {\n        day_tasks.push(this.generateTask({...this.props.task}));\n      }\n      // RANDOMLY ASSIGN A NUMBER OF HOURS BASED ON IF THE CURRENT_DATE IS BEFORE TODAY, WITHIN A WEEK OR BEYOND A WEEK\n      const number_of_hours = (current_date < today) ? Math.min(past_number_chart[Math.floor(Math.random()*past_number_chart.length)],DAILY_WORK_HOURS) :\n                              (current_date > next_week) ? Math.min(future_number_chart[Math.floor(Math.random()*future_number_chart.length)],DAILY_WORK_HOURS) :\n                              Math.min(number_chart[Math.floor(Math.random()*number_chart.length)],DAILY_WORK_HOURS);\n      const number_of_tasks = Math.ceil(Math.random()*number_of_hours)\n      for (var t=0; t<number_of_tasks; t++) {\n        day_tasks.push({\n          start_date: new Date(this.props.year, this.props.month, (d+1), (6+(t*Math.round(number_of_hours/number_of_tasks)))),\n          end_date: new Date(this.props.year, this.props.month, (d+1), (6+((t+1)*Math.round(number_of_hours/number_of_tasks)))),\n          assigned_user: this.props.user.user_id,\n          name: \"Task\",\n          icon: \"fas fa-hammer\",\n          progress: 0\n        });\n      }\n\n      tasks_by_day.push(day_tasks);\n    }\n\n    return tasks_by_day;\n  }\n\n  componentDidMount() {\n    var tasks_by_day = this.generateTasks();\n    setTimeout(()=>{\n      this.setState({\n        tasks_by_day: tasks_by_day\n      });\n    }, 100);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.month !== prevProps.month) {\n      this.setState({\n        tasks_by_day: this.generateTasks()\n      });\n    }\n  }\n\n  SelectDate = (e) => {\n    // let id=parseInt(e.currentTarget.dataset.id,10);\n    console.log(e.target.value);\n    this.setState({sort: e.target.value});\n  }\n  HandleDayClick = (e) => {\n    const id=parseInt(e.currentTarget.dataset.id,10);\n    this.props.HandleDayClick(id)\n  }\n\n  render() {\n    const cells = [];\n    const day_cells = [];\n    const classes = [\n      \"tasks-0\",\n      \"tasks-1\",\n      \"tasks-2\",\n      \"tasks-3\",\n      \"tasks-4\",\n      \"tasks-5\",\n      \"tasks-6\",\n      \"tasks-7\",\n      \"tasks-8\"\n    ];\n\n    if (this.state.tasks_by_day && this.state.tasks_by_day.length === DaysInMonth(this.props.month, this.props.year)) {\n      for (var i=0; i<DaysInMonth(this.props.month, this.props.year); i++) {\n\n        const current_date = new Date(this.props.year, this.props.month, (i+1));\n        let value =  this.state.tasks_by_day[i].length;\n        let weekend = \"\";\n\n        for (var w=0; w<WEEKEND.length; w++) {\n          if (current_date.getDay() === WEEKEND[w]) {\n            value = 0;\n            weekend = \" weekend\";\n          }\n        }\n        cells.push((\n          <li key={this.props.user.user_id + \"_\" + i} data-id={(i+1)} className={\"cell \" +\n            (classes[Math.min(Math.round(value*8/DAILY_WORK_HOURS),classes.length-1)]) +\n            weekend +\n            (((current_date.toDateString() === (new Date()).toDateString()) || (((this.props.month/20)+this.props.year) > (((new Date()).getMonth()/20)+(new Date()).getFullYear()) && i===0)) ? \" today\" : \"\") +\n            (this.props.task.start_date && SameDay(this.props.task.start_date, current_date) && this.props.task.assigned_user === this.props.user.user_id ? \" assigned\" : \"\")\n          } onClick={this.HandleDayClick}\n          >{\n            value?value+\" hrs\":\"\"\n          }</li>\n        ));\n      }\n\n      if (this.props.selected_day) {\n\n        for (var h=1; h<=24; h++) {\n          // const current_time = new Date(this.props.year, this.props.month, this.props.selected_day, h);\n          day_cells.push((\n            <li className={\n              \"day-cell\"\n            }>\n            </li>\n          ));\n        }\n        for (var t=0; t<this.state.tasks_by_day[this.props.selected_day-1].length; t++) {\n          const task = this.state.tasks_by_day[this.props.selected_day-1][t];\n          const task_duration = (((task.end_date-task.start_date)/1000)/60)/(24*60);\n          console.log(new Date(this.props.year, this.props.month, this.props.selected_day));\n          console.log( (task.start_date - new Date(this.props.year, this.props.month, this.props.selected_day))/1000/60/(24*60) );\n          const task_start = ((task.start_date - new Date(this.props.year, this.props.month, this.props.selected_day)/1000)/60)/(24*60);\n          day_cells.push((\n            <li className={\n              \"task\"\n            } style={{\n              left: task_start+\"%\",\n              width: task_duration+\"%\"\n            }}>\n              <span><i className={task.icon}></i>{task.name}</span>\n            </li>\n          ));\n        }\n      }\n    }\n\n    return (\n      <ul>\n        <li className={\"day-schedule\" + (this.props.selected_day ? \" show\" : \"\")}>\n          <ul>\n            {day_cells}\n          </ul>\n        </li>\n        {cells}\n      </ul>\n    );\n  }\n}\n\nexport default Scheduler\n"]},"metadata":{},"sourceType":"module"}