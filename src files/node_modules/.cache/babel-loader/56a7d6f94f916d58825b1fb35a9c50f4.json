{"ast":null,"code":"import _classCallCheck from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/matt/Work/Projul/projul-prototype/src/components/user-heatmap.js\";\nimport React from 'react';\nimport { WEEKEND, DAILY_WORK_HOURS } from '../config/account-settings';\nimport { DaysInMonth } from '../utilities/date';\n\nvar Scheduler =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Scheduler, _React$Component);\n\n  function Scheduler() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Scheduler);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Scheduler)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {};\n\n    _this.calcDays = function () {\n      var days = [];\n      var current_date = new Date();\n      var past_number_chart = [3, 8, 8, 0, 7, 1, 7, 7, 5, 6, 6, 5, 5, 6, 7, 8, 8, 8, 8];\n      var number_chart = [0, 0, 0, 0, 0, 1, 1, 2, 2, 3, 4, 5, 5, 6, 7, 8, 8, 8, 8];\n      var future_number_chart = [0, 0, 0, 0, 0, 1, 1, 2, 0, 3, 0, 5, 5, 6, 7, 0, 0, 8, 8];\n\n      for (var d = 0; d < DaysInMonth(_this.props.month, _this.props.year); d++) {\n        if (d < current_date.getDate() || _this.props.month < current_date.getMonth()) {\n          days.push(Math.min(past_number_chart[Math.floor(Math.random() * past_number_chart.length)], DAILY_WORK_HOURS));\n        } else if (d > current_date.getDate() + 7 || _this.props.month > current_date.getMonth()) {\n          days.push(Math.min(future_number_chart[Math.floor(Math.random() * future_number_chart.length)], DAILY_WORK_HOURS));\n        } else {\n          days.push(Math.min(number_chart[Math.floor(Math.random() * number_chart.length)], DAILY_WORK_HOURS));\n        }\n      }\n\n      return days;\n    };\n\n    _this.SelectDate = function (e) {\n      // let id=parseInt(e.currentTarget.dataset.id,10);\n      console.log(e.target.value);\n\n      _this.setState({\n        sort: e.target.value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Scheduler, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var days = this.calcDays();\n      setTimeout(function () {\n        _this2.setState({\n          days: days\n        });\n      }, 100);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.month !== prevProps.month) {\n        this.setState({\n          days: this.calcDays()\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var cells = [];\n      var classes = [\"tasks-0\", \"tasks-1\", \"tasks-2\", \"tasks-3\", \"tasks-4\", \"tasks-5\", \"tasks-6\", \"tasks-7\", \"tasks-8\"];\n\n      if (this.state.days) {\n        for (var i = 0; i < DaysInMonth(this.props.month, this.props.year); i++) {\n          var value = this.state.days[i];\n          var weekend = \"\"; //TODO remove this:\n\n          var current_date = new Date(this.props.year, this.props.month, i + 1);\n\n          for (var w = 0; w < WEEKEND.length; w++) {\n            if (current_date.getDay() === WEEKEND[w]) {\n              value = 0;\n              weekend = \" weekend\";\n            }\n          }\n\n          cells.push(React.createElement(\"li\", {\n            key: this.props.user.user_id + \"_\" + i,\n            className: \"cell \" + classes[Math.min(Math.round(value * 8 / DAILY_WORK_HOURS), classes.length - 1)] + weekend + (current_date.toDateString() === new Date().toDateString() ? \" today\" : \"\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80\n            },\n            __self: this\n          }, value ? value + \" hrs\" : \"\"));\n        }\n      }\n\n      return React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, cells);\n    }\n  }]);\n\n  return Scheduler;\n}(React.Component);\n\nexport default Scheduler;","map":{"version":3,"sources":["/Users/matt/Work/Projul/projul-prototype/src/components/user-heatmap.js"],"names":["React","WEEKEND","DAILY_WORK_HOURS","DaysInMonth","Scheduler","state","calcDays","days","current_date","Date","past_number_chart","number_chart","future_number_chart","d","props","month","year","getDate","getMonth","push","Math","min","floor","random","length","SelectDate","e","console","log","target","value","setState","sort","setTimeout","prevProps","cells","classes","i","weekend","w","getDay","user","user_id","round","toDateString","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {WEEKEND, DAILY_WORK_HOURS} from '../config/account-settings'\nimport {DaysInMonth} from '../utilities/date'\n\nclass Scheduler extends React.Component {\n  state = {\n\n  };\n\n  calcDays = () => {\n    const days = [];\n    const current_date = new Date();\n    const past_number_chart = [3,8,8,0,7,1,7,7,5,6,6,5,5,6,7,8,8,8,8];\n    const number_chart = [0,0,0,0,0,1,1,2,2,3,4,5,5,6,7,8,8,8,8];\n    const future_number_chart = [0,0,0,0,0,1,1,2,0,3,0,5,5,6,7,0,0,8,8];\n    for (var d=0; d<DaysInMonth(this.props.month, this.props.year); d++) {\n      if (d < current_date.getDate() || this.props.month < current_date.getMonth()) {\n        days.push(Math.min(past_number_chart[Math.floor(Math.random()*past_number_chart.length)],DAILY_WORK_HOURS));\n      }\n      else if (d > current_date.getDate() + 7 || this.props.month > current_date.getMonth()) {\n        days.push(Math.min(future_number_chart[Math.floor(Math.random()*future_number_chart.length)],DAILY_WORK_HOURS));\n      }\n      else {\n        days.push(Math.min(number_chart[Math.floor(Math.random()*number_chart.length)],DAILY_WORK_HOURS));\n      }\n    }\n    return days;\n  }\n\n  componentDidMount() {\n    var days = this.calcDays();\n    setTimeout(()=>{\n      this.setState({\n        days: days\n      });\n    }, 100);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.month !== prevProps.month) {\n      this.setState({\n        days: this.calcDays()\n      });\n    }\n  }\n\n  SelectDate = (e) => {\n    // let id=parseInt(e.currentTarget.dataset.id,10);\n    console.log(e.target.value);\n    this.setState({sort: e.target.value});\n  }\n\n  render() {\n    const cells = [];\n    const classes = [\n      \"tasks-0\",\n      \"tasks-1\",\n      \"tasks-2\",\n      \"tasks-3\",\n      \"tasks-4\",\n      \"tasks-5\",\n      \"tasks-6\",\n      \"tasks-7\",\n      \"tasks-8\"\n    ];\n\n    if (this.state.days) {\n      for (var i=0; i<DaysInMonth(this.props.month, this.props.year); i++) {\n        const value = this.state.days[i];\n        const weekend = \"\";\n        //TODO remove this:\n        const current_date = new Date(this.props.year, this.props.month, (i+1));\n        for (var w=0; w<WEEKEND.length; w++) {\n          if (current_date.getDay() === WEEKEND[w]) {\n            value = 0;\n            weekend = \" weekend\";\n          }\n        }\n        cells.push((\n          <li key={this.props.user.user_id + \"_\" + i} className={\"cell \" +\n            (classes[Math.min(Math.round(value*8/DAILY_WORK_HOURS),classes.length-1)]) +\n            weekend +\n            ((current_date.toDateString() === (new Date()).toDateString()) ? \" today\" : \"\")\n          }>{\n            value?value+\" hrs\":\"\"\n          }</li>\n        ));\n      }\n    }\n\n    return (\n      <ul>\n        {cells}\n      </ul>\n    );\n  }\n}\n\nexport default Scheduler\n"]},"metadata":{},"sourceType":"module"}