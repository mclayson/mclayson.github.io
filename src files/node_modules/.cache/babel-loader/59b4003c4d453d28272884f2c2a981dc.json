{"ast":null,"code":"import _objectSpread from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Projul/projul-prototype/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/matt/Work/Projul/projul-prototype/src/components/project.js\";\nimport React from 'react';\nimport { MonthNames } from '../utilities/content';\n\nvar Projects =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Projects, _React$Component);\n\n  function Projects() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Projects);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Projects)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loaded: false,\n      selected_task: \"none\",\n      show_selected_task: false\n    };\n    _this.data = [{\n      start_date: null,\n      assigned_user: Math.round(Math.random() * 12),\n      name: \"Sign Contract\",\n      id: 1,\n      icon: \"fas fa-file-signature\",\n      progress: 0\n    }, {\n      start_date: null,\n      assigned_user: Math.round(Math.random() * 12),\n      name: \"Pre Deposit\",\n      id: 2,\n      icon: \"fas fa-dollar-sign\",\n      progress: 0\n    }, {\n      start_date: null,\n      assigned_user: Math.round(Math.random() * 12),\n      name: \"Estimation\",\n      id: 3,\n      icon: \"fas fa-balance-scale\",\n      progress: 0\n    }, {\n      start_date: null,\n      assigned_user: Math.round(Math.random() * 12),\n      name: \"Demolition\",\n      id: 4,\n      icon: \"fas fa-hammer\",\n      progress: 0\n    }, {\n      start_date: null,\n      assigned_user: Math.round(Math.random() * 12),\n      name: \"Protection\",\n      id: 5,\n      icon: \"fas fa-tape\",\n      progress: 0\n    }, {\n      start_date: null,\n      assigned_user: Math.round(Math.random() * 12),\n      name: \"Tile Install\",\n      id: 6,\n      icon: \"fas fa-toolbox\",\n      progress: 0\n    }, {\n      start_date: null,\n      name: \"Plumbing\",\n      id: 7,\n      icon: \"fas fa-tint\",\n      progress: 0,\n      default_trade: \"Plumber\"\n    }, {\n      start_date: null,\n      name: \"Clean Up\",\n      id: 8,\n      icon: \"fas fa-broom\",\n      progress: 0\n    }, {\n      start_date: null,\n      name: \"Inspection\",\n      id: 9,\n      icon: \"fas fa-clipboard-list\",\n      progress: 0\n    }, {\n      start_date: null,\n      name: \"Final Payment\",\n      id: 0,\n      icon: \"fas fa-dollar-sign\",\n      progress: 0\n    }];\n\n    _this.selectTask = function (e) {\n      var id = parseInt(e.currentTarget.dataset.id, 10);\n\n      _this.setState({\n        show_selected_task: _this.state.selected_task === id ? !_this.state.show_selected_task : true\n      });\n\n      if (_this.state.selected_task !== id) {\n        _this.setState({\n          selected_task: id\n        });\n\n        _this.props.onSelectProject(_this.props.id, _this.state.tasks_by_id[id]);\n      } else {\n        _this.props.onSelectProject(null, null);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Projects, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var months = {\n        Unassigned: []\n      };\n      var tasks_by_id = {};\n      this.data.map(function (task, i) {\n        var task_insert = _objectSpread({}, task);\n\n        tasks_by_id[task_insert.id] = task_insert;\n\n        if (!task.start_date) {\n          months.Unassigned.push(task_insert);\n          return true;\n        }\n\n        var task_month = task.start_date.getMonth();\n\n        if (!months[task_month]) {\n          months[task_month] = [];\n        }\n\n        months[task_month].push(task_insert);\n        return true;\n      });\n      this.setState({\n        tasks_by_id: tasks_by_id,\n        months: months,\n        selected_task: this.props.selected_task,\n        show_selected_task: this.props.selected_task ? true : false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var display_months = [];\n\n      if (this.state.months) {\n        var month_keys = Object.keys(this.state.months);\n        month_keys.sort(function (a, b) {\n          return this.state.months[a] - this.state.months[b];\n        });\n\n        for (var i = 0; i < month_keys.length; i++) {\n          var month = this.state.months[month_keys[i]];\n          month.sort(function (a, b) {\n            return a.start_date - b.start_date;\n          });\n\n          for (var j = 0; j < month.length; j++) {\n            var task = month[j];\n            display_months.push(React.createElement(\"li\", {\n              key: task.id,\n              \"data-id\": task.id,\n              className: (task.progress === 100 ? \"complete\" : task.progress > 0 ? \"progress\" : \"\") + (\" \" + month_keys[i]) + (task.start_date && task.start_date.toDateString() === new Date().toDateString() ? \" today\" : \"\") + (j === month.length - 1 ? \" last-of-month\" : \"\") + (task.id === this.state.selected_task && this.state.show_selected_task ? \" selected\" : this.state.show_selected_task === false ? \" none-selected\" : \" not-selected\") + (j < month.length - 1 && month[j + 1].id === this.state.selected_task && this.state.show_selected_task ? \" task-before-selected\" : \"\"),\n              onClick: this.selectTask,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 155\n              },\n              __self: this\n            }, j === 0 ? React.createElement(\"h3\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 169\n              },\n              __self: this\n            }, MonthNames[month_keys[i]] || month_keys[i]) : [], React.createElement(\"span\", {\n              className: \"h-line\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 171\n              },\n              __self: this\n            }), React.createElement(\"span\", {\n              className: \"selected-arrow\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 172\n              },\n              __self: this\n            }), React.createElement(\"span\", {\n              className: \"date\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 173\n              },\n              __self: this\n            }, task.start_date ? task.start_date.getDate() : \"\"), React.createElement(\"div\", {\n              className: \"task-box\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 174\n              },\n              __self: this\n            }, React.createElement(\"h4\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 175\n              },\n              __self: this\n            }, React.createElement(\"i\", {\n              className: task.icon,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 175\n              },\n              __self: this\n            }), React.createElement(\"span\", {\n              className: \"task-name\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 175\n              },\n              __self: this\n            }, task.name))), React.createElement(\"span\", {\n              className: \"status\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 177\n              },\n              __self: this\n            }, React.createElement(\"span\", {\n              className: \"progress-bar\",\n              style: {\n                transform: \"scaleX(\" + task.progress / 100 + \")\"\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 178\n              },\n              __self: this\n            }), React.createElement(\"span\", {\n              className: \"status-text\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 179\n              },\n              __self: this\n            }, task.progress === 100 ? React.createElement(\"i\", {\n              className: \"fas fa-check\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 181\n              },\n              __self: this\n            }) : task.progress === 0 ? \"\" : task.progress + \"%\"))));\n          }\n\n          ;\n        }\n\n        ;\n      }\n\n      return React.createElement(\"article\", {\n        className: \"project\" + (this.props.last_selected ? \" last_selected\" : \"\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        style: {\n          color: this.props.project_data.color || \"black\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, this.props.project_data.name)), React.createElement(\"div\", {\n        className: \"timeline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, display_months));\n    }\n  }]);\n\n  return Projects;\n}(React.Component);\n\nexport default Projects;","map":{"version":3,"sources":["/Users/matt/Work/Projul/projul-prototype/src/components/project.js"],"names":["React","MonthNames","Projects","state","loaded","selected_task","show_selected_task","data","start_date","assigned_user","Math","round","random","name","id","icon","progress","default_trade","selectTask","e","parseInt","currentTarget","dataset","setState","props","onSelectProject","tasks_by_id","months","Unassigned","map","task","i","task_insert","push","task_month","getMonth","display_months","month_keys","Object","keys","sort","a","b","length","month","j","toDateString","Date","getDate","transform","last_selected","color","project_data","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {MonthNames} from '../utilities/content'\n\nclass Projects extends React.Component {\n  state = {\n    loaded: false,\n    selected_task: \"none\",\n    show_selected_task: false\n  };\n\n\n  ////TODO: Include Time intervals for indivitual day schedules\n\n  data = [\n    {\n      start_date: null,\n      assigned_user: Math.round(Math.random()*12),\n      name: \"Sign Contract\",\n      id: 1,\n      icon: \"fas fa-file-signature\",\n      progress: 0\n    },\n    {\n      start_date: null,\n      assigned_user: Math.round(Math.random()*12),\n      name: \"Pre Deposit\",\n      id: 2,\n      icon: \"fas fa-dollar-sign\",\n      progress: 0\n    },\n    {\n      start_date: null,\n      assigned_user: Math.round(Math.random()*12),\n      name: \"Estimation\",\n      id: 3,\n      icon: \"fas fa-balance-scale\",\n      progress: 0\n    },\n    {\n      start_date: null,\n      assigned_user: Math.round(Math.random()*12),\n      name: \"Demolition\",\n      id: 4,\n      icon: \"fas fa-hammer\",\n      progress: 0\n    },\n    {\n      start_date: null,\n      assigned_user: Math.round(Math.random()*12),\n      name: \"Protection\",\n      id: 5,\n      icon: \"fas fa-tape\",\n      progress: 0\n    },\n    {\n      start_date: null,\n      assigned_user: Math.round(Math.random()*12),\n      name: \"Tile Install\",\n      id: 6,\n      icon: \"fas fa-toolbox\",\n      progress: 0\n    },\n    {\n      start_date: null,\n      name: \"Plumbing\",\n      id: 7,\n      icon: \"fas fa-tint\",\n      progress: 0,\n      default_trade: \"Plumber\"\n    },\n    {\n      start_date: null,\n      name: \"Clean Up\",\n      id: 8,\n      icon: \"fas fa-broom\",\n      progress: 0\n    },\n    {\n      start_date: null,\n      name: \"Inspection\",\n      id: 9,\n      icon: \"fas fa-clipboard-list\",\n      progress: 0\n    },\n    {\n      start_date: null,\n      name: \"Final Payment\",\n      id: 0,\n      icon: \"fas fa-dollar-sign\",\n      progress: 0\n    }\n  ];\n\n\n\n  componentDidMount() {\n    var months = {\n      Unassigned: []\n    };\n    var tasks_by_id = {};\n    this.data.map((task, i) => {\n      let task_insert = {\n        ...task\n      };\n      tasks_by_id[task_insert.id] = task_insert;\n      if (!task.start_date) {\n        months.Unassigned.push(task_insert);\n        return true;\n      }\n      let task_month = task.start_date.getMonth();\n      if (!months[task_month]) {\n        months[task_month] = [];\n      }\n      months[task_month].push(task_insert);\n      return true;\n    });\n    this.setState({\n      tasks_by_id: tasks_by_id,\n      months: months,\n      selected_task:this.props.selected_task,\n      show_selected_task:(this.props.selected_task?true:false)\n    });\n  }\n\n\n  selectTask = (e) => {\n    let id=parseInt(e.currentTarget.dataset.id,10);\n\n    this.setState({\n      show_selected_task:(this.state.selected_task===id?!this.state.show_selected_task:true)\n    });\n    if (this.state.selected_task!==id) {\n      this.setState({\n        selected_task:id\n      });\n      this.props.onSelectProject(this.props.id, this.state.tasks_by_id[id]);\n    } else {\n      this.props.onSelectProject(null, null);\n    }\n  }\n\n\n  render() {\n    var display_months = [];\n\n    if (this.state.months) {\n      var month_keys = Object.keys(this.state.months);\n      month_keys.sort(function(a, b){return this.state.months[a] - this.state.months[b]});\n      for (var i=0; i<month_keys.length; i++) {\n        var month = this.state.months[month_keys[i]];\n        month.sort(function(a, b){return a.start_date - b.start_date});\n        for (var j=0; j<month.length; j++) {\n          var task = month[j];\n          display_months.push((\n            <li\n              key={task.id}\n              data-id={task.id}\n              className={\n                (task.progress === 100 ? \"complete\" : task.progress > 0 ? \"progress\" : \"\") +\n                (\" \"+month_keys[i]) +\n                (task.start_date && (task.start_date.toDateString() === (new Date()).toDateString())?\" today\":\"\") +\n                (j === month.length-1?\" last-of-month\":\"\") +\n                (task.id===this.state.selected_task&&this.state.show_selected_task?\" selected\":(this.state.show_selected_task===false?\" none-selected\":\" not-selected\")) +\n                ((j<month.length-1) && month[j+1].id===this.state.selected_task && this.state.show_selected_task?\" task-before-selected\":\"\")\n              }\n              onClick={this.selectTask}\n            >\n              {\n                j===0?<h3>{MonthNames[month_keys[i]] || month_keys[i]}</h3>:[]\n              }\n              <span className=\"h-line\" />\n              <span className=\"selected-arrow\" />\n              <span className=\"date\">{(task.start_date ? task.start_date.getDate() : \"\")}</span>\n              <div className=\"task-box\">\n                <h4><i className={task.icon}></i><span className=\"task-name\">{task.name}</span></h4>\n              </div>\n              <span className=\"status\">\n                <span className=\"progress-bar\" style={{transform:\"scaleX(\"+(task.progress/100)+\")\"}}></span>\n                <span className=\"status-text\">{\n                  task.progress===100 ?\n                  (<i className=\"fas fa-check\"></i>):\n                  task.progress===0 ?\n                  (\"\"):\n                  (task.progress + \"%\")\n                }</span>\n              </span>\n            </li>\n          ));\n        };\n      };\n    }\n    return (\n      <article\n        className={\"project\" +\n          (this.props.last_selected?\" last_selected\":\"\")\n      }>\n        <header style={{\n          color: this.props.project_data.color || \"black\"\n        }}>\n          <h2>{this.props.project_data.name}</h2>\n        </header>\n        <div className=\"timeline\">\n          {display_months}\n        </div>\n      </article>\n    );\n  }\n}\n\nexport default Projects\n"]},"metadata":{},"sourceType":"module"}